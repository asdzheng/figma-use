// Auto-generated - do not edit
// Contains the RPC code to inject into Figma via CDP

export const RPC_BUNDLE = "\"use strict\";(()=>{var Kx=Object.create;var Na=Object.defineProperty,zx=Object.defineProperties,Wx=Object.getOwnPropertyDescriptor,Zx=Object.getOwnPropertyDescriptors,eN=Object.getOwnPropertyNames,gh=Object.getOwnPropertySymbols,tN=Object.getPrototypeOf,wh=Object.prototype.hasOwnProperty,nN=Object.prototype.propertyIsEnumerable;var Ts=(u,c)=>(c=Symbol[u])?c:Symbol.for(\"Symbol.\"+u),rN=u=>{throw TypeError(u)},Ah=Math.pow,yh=(u,c,d)=>c in u?Na(u,c,{enumerable:!0,configurable:!0,writable:!0,value:d}):u[c]=d,_n=(u,c)=>{for(var d in c||(c={}))wh.call(c,d)&&yh(u,d,c[d]);if(gh)for(var d of gh(c))nN.call(c,d)&&yh(u,d,c[d]);return u},Ba=(u,c)=>zx(u,Zx(c));var Vn=(u,c)=>()=>(c||u((c={exports:{}}).exports,c),c.exports),vh=(u,c)=>{for(var d in c)Na(u,d,{get:c[d],enumerable:!0})},oN=(u,c,d,h)=>{if(c&&typeof c==\"object\"||typeof c==\"function\")for(let x of eN(c))!wh.call(u,x)&&x!==d&&Na(u,x,{get:()=>c[x],enumerable:!(h=Wx(c,x))||h.enumerable});return u};var aN=(u,c,d)=>(d=u!=null?Kx(tN(u)):{},oN(c||!u||!u.__esModule?Na(d,\"default\",{value:u,enumerable:!0}):d,u));var xt=(u,c,d)=>new Promise((h,x)=>{var S=v=>{try{M(d.next(v))}catch(y){x(y)}},C=v=>{try{M(d.throw(v))}catch(y){x(y)}},M=v=>v.done?h(v.value):Promise.resolve(v.value).then(S,C);M((d=d.apply(u,c)).next())}),iN=function(u,c){this[0]=u,this[1]=c};var Hr=u=>{var c=u[Ts(\"asyncIterator\")],d=!1,h,x={};return c==null?(c=u[Ts(\"iterator\")](),h=S=>x[S]=C=>c[S](C)):(c=c.call(u),h=S=>x[S]=C=>{if(d){if(d=!1,S===\"throw\")throw C;return C}return d=!0,{done:!1,value:new iN(new Promise(M=>{var v=c[S](C);v instanceof Object||rN(\"Object expected\"),M(v)}),1)}}),x[Ts(\"iterator\")]=()=>x,h(\"next\"),\"throw\"in c?h(\"throw\"):x.throw=S=>{throw S},\"return\"in c&&h(\"return\"),x};var Nh=Vn((BB,xh)=>{\"use strict\";var Ea={a:7,c:6,h:1,l:2,m:2,r:4,q:4,s:4,t:2,v:1,z:0},sN=[5760,6158,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279];function uN(u){return u===10||u===13||u===8232||u===8233||u===32||u===9||u===11||u===12||u===160||u>=5760&&sN.indexOf(u)>=0}function lN(u){switch(u|32){case 109:case 122:case 108:case 104:case 118:case 99:case 115:case 113:case 116:case 97:case 114:return!0}return!1}function cN(u){return(u|32)===97}function Xr(u){return u>=48&&u<=57}function pN(u){return u>=48&&u<=57||u===43||u===45||u===46}function hN(u){this.index=0,this.path=u,this.max=u.length,this.result=[],this.param=0,this.err=\"\",this.segmentStart=0,this.data=[]}function Ia(u){for(;u.index<u.max&&uN(u.path.charCodeAt(u.index));)u.index++}function fN(u){var c=u.path.charCodeAt(u.index);if(c===48){u.param=0,u.index++;return}if(c===49){u.param=1,u.index++;return}u.err=\"SvgPath: arc flag can be 0 or 1 only (at pos \"+u.index+\")\"}function dN(u){var c=u.index,d=c,h=u.max,x=!1,S=!1,C=!1,M=!1,v;if(d>=h){u.err=\"SvgPath: missed param (at pos \"+d+\")\";return}if(v=u.path.charCodeAt(d),(v===43||v===45)&&(d++,v=d<h?u.path.charCodeAt(d):0),!Xr(v)&&v!==46){u.err=\"SvgPath: param should start with 0..9 or `.` (at pos \"+d+\")\";return}if(v!==46){if(x=v===48,d++,v=d<h?u.path.charCodeAt(d):0,x&&d<h&&v&&Xr(v)){u.err=\"SvgPath: numbers started with `0` such as `09` are illegal (at pos \"+c+\")\";return}for(;d<h&&Xr(u.path.charCodeAt(d));)d++,S=!0;v=d<h?u.path.charCodeAt(d):0}if(v===46){for(M=!0,d++;Xr(u.path.charCodeAt(d));)d++,C=!0;v=d<h?u.path.charCodeAt(d):0}if(v===101||v===69){if(M&&!S&&!C){u.err=\"SvgPath: invalid float exponent (at pos \"+d+\")\";return}if(d++,v=d<h?u.path.charCodeAt(d):0,(v===43||v===45)&&d++,d<h&&Xr(u.path.charCodeAt(d)))for(;d<h&&Xr(u.path.charCodeAt(d));)d++;else{u.err=\"SvgPath: invalid float exponent (at pos \"+d+\")\";return}}u.index=d,u.param=parseFloat(u.path.slice(c,d))+0}function Cs(u){var c,d;c=u.path[u.segmentStart],d=c.toLowerCase();var h=u.data;if(d===\"m\"&&h.length>2&&(u.result.push([c,h[0],h[1]]),h=h.slice(2),d=\"l\",c=c===\"m\"?\"l\":\"L\"),d===\"r\")u.result.push([c].concat(h));else for(;h.length>=Ea[d]&&(u.result.push([c].concat(h.splice(0,Ea[d]))),!!Ea[d]););}function mN(u){var c=u.max,d,h,x,S,C;if(u.segmentStart=u.index,d=u.path.charCodeAt(u.index),h=cN(d),!lN(d)){u.err=\"SvgPath: bad command \"+u.path[u.index]+\" (at pos \"+u.index+\")\";return}if(S=Ea[u.path[u.index].toLowerCase()],u.index++,Ia(u),u.data=[],!S){Cs(u);return}for(x=!1;;){for(C=S;C>0;C--){if(h&&(C===3||C===4)?fN(u):dN(u),u.err.length){Cs(u);return}u.data.push(u.param),Ia(u),x=!1,u.index<c&&u.path.charCodeAt(u.index)===44&&(u.index++,Ia(u),x=!0)}if(!x&&(u.index>=u.max||!pN(u.path.charCodeAt(u.index))))break}Cs(u)}xh.exports=function(c){var d=new hN(c),h=d.max;for(Ia(d);d.index<h&&!d.err.length;)mN(d);return d.result.length&&(\"mM\".indexOf(d.result[0][0])<0?(d.err=\"SvgPath: string should start with `M` or `m`\",d.result=[]):d.result[0][0]=\"M\"),{err:d.err,segments:d.result}}});var Fs=Vn((EB,Bh)=>{\"use strict\";function gN(u,c){return[u[0]*c[0]+u[2]*c[1],u[1]*c[0]+u[3]*c[1],u[0]*c[2]+u[2]*c[3],u[1]*c[2]+u[3]*c[3],u[0]*c[4]+u[2]*c[5]+u[4],u[1]*c[4]+u[3]*c[5]+u[5]]}function Gt(){if(!(this instanceof Gt))return new Gt;this.queue=[],this.cache=null}Gt.prototype.matrix=function(u){return u[0]===1&&u[1]===0&&u[2]===0&&u[3]===1&&u[4]===0&&u[5]===0?this:(this.cache=null,this.queue.push(u),this)};Gt.prototype.translate=function(u,c){return(u!==0||c!==0)&&(this.cache=null,this.queue.push([1,0,0,1,u,c])),this};Gt.prototype.scale=function(u,c){return(u!==1||c!==1)&&(this.cache=null,this.queue.push([u,0,0,c,0,0])),this};Gt.prototype.rotate=function(u,c,d){var h,x,S;return u!==0&&(this.translate(c,d),h=u*Math.PI/180,x=Math.cos(h),S=Math.sin(h),this.queue.push([x,S,-S,x,0,0]),this.cache=null,this.translate(-c,-d)),this};Gt.prototype.skewX=function(u){return u!==0&&(this.cache=null,this.queue.push([1,0,Math.tan(u*Math.PI/180),1,0,0])),this};Gt.prototype.skewY=function(u){return u!==0&&(this.cache=null,this.queue.push([1,Math.tan(u*Math.PI/180),0,1,0,0])),this};Gt.prototype.toArray=function(){if(this.cache)return this.cache;if(!this.queue.length)return this.cache=[1,0,0,1,0,0],this.cache;if(this.cache=this.queue[0],this.queue.length===1)return this.cache;for(var u=1;u<this.queue.length;u++)this.cache=gN(this.cache,this.queue[u]);return this.cache};Gt.prototype.calc=function(u,c,d){var h;return this.queue.length?(this.cache||(this.cache=this.toArray()),h=this.cache,[u*h[0]+c*h[2]+(d?0:h[4]),u*h[1]+c*h[3]+(d?0:h[5])]):[u,c]};Bh.exports=Gt});var Ih=Vn((IB,Eh)=>{\"use strict\";var yN=Fs(),wN={matrix:!0,scale:!0,rotate:!0,translate:!0,skewX:!0,skewY:!0},AN=/\\s*(matrix|translate|scale|rotate|skewX|skewY)\\s*\\(\\s*(.+?)\\s*\\)[\\s,]*/,vN=/[\\s,]+/;Eh.exports=function(c){var d=new yN,h,x;return c.split(AN).forEach(function(S){if(S.length){if(typeof wN[S]!=\"undefined\"){h=S;return}switch(x=S.split(vN).map(function(C){return+C||0}),h){case\"matrix\":x.length===6&&d.matrix(x);return;case\"scale\":x.length===1?d.scale(x[0],x[0]):x.length===2&&d.scale(x[0],x[1]);return;case\"rotate\":x.length===1?d.rotate(x[0],0,0):x.length===3&&d.rotate(x[0],x[1],x[2]);return;case\"translate\":x.length===1?d.translate(x[0],0):x.length===2&&d.translate(x[0],x[1]);return;case\"skewX\":x.length===1&&d.skewX(x[0]);return;case\"skewY\":x.length===1&&d.skewY(x[0]);return}}}),d}});var Fh=Vn((TB,Ch)=>{\"use strict\";var wo=Math.PI*2;function Th(u,c,d,h){var x=u*h-c*d<0?-1:1,S=u*d+c*h;return S>1&&(S=1),S<-1&&(S=-1),x*Math.acos(S)}function xN(u,c,d,h,x,S,C,M,v,y){var g=y*(u-d)/2+v*(c-h)/2,A=-v*(u-d)/2+y*(c-h)/2,I=C*C,F=M*M,D=g*g,k=A*A,U=I*F-I*k-F*D;U<0&&(U=0),U/=I*k+F*D,U=Math.sqrt(U)*(x===S?-1:1);var H=U*C/M*A,L=U*-M/C*g,ee=y*H-v*L+(u+d)/2,z=v*H+y*L+(c+h)/2,J=(g-H)/C,N=(A-L)/M,Xe=(-g-H)/C,Me=(-A-L)/M,Kt=Th(1,0,J,N),yt=Th(J,N,Xe,Me);return S===0&&yt>0&&(yt-=wo),S===1&&yt<0&&(yt+=wo),[ee,z,Kt,yt]}function NN(u,c){var d=1.3333333333333333*Math.tan(c/4),h=Math.cos(u),x=Math.sin(u),S=Math.cos(u+c),C=Math.sin(u+c);return[h,x,h-x*d,x+h*d,S+C*d,C-S*d,S,C]}Ch.exports=function(c,d,h,x,S,C,M,v,y){var g=Math.sin(y*wo/360),A=Math.cos(y*wo/360),I=A*(c-h)/2+g*(d-x)/2,F=-g*(c-h)/2+A*(d-x)/2;if(I===0&&F===0)return[];if(M===0||v===0)return[];M=Math.abs(M),v=Math.abs(v);var D=I*I/(M*M)+F*F/(v*v);D>1&&(M*=Math.sqrt(D),v*=Math.sqrt(D));var k=xN(c,d,h,x,S,C,M,v,g,A),U=[],H=k[2],L=k[3],ee=Math.max(Math.ceil(Math.abs(L)/(wo/4)),1);L/=ee;for(var z=0;z<ee;z++)U.push(NN(H,L)),H+=L;return U.map(function(J){for(var N=0;N<J.length;N+=2){var Xe=J[N+0],Me=J[N+1];Xe*=M,Me*=v;var Kt=A*Xe-g*Me,yt=g*Xe+A*Me;J[N+0]=Kt+k[0],J[N+1]=yt+k[1]}return J})}});var Oh=Vn((CB,Rh)=>{\"use strict\";var Ao=1e-10,Sh=Math.PI/180;function vo(u,c,d){if(!(this instanceof vo))return new vo(u,c,d);this.rx=u,this.ry=c,this.ax=d}vo.prototype.transform=function(u){var c=Math.cos(this.ax*Sh),d=Math.sin(this.ax*Sh),h=[this.rx*(u[0]*c+u[2]*d),this.rx*(u[1]*c+u[3]*d),this.ry*(-u[0]*d+u[2]*c),this.ry*(-u[1]*d+u[3]*c)],x=h[0]*h[0]+h[2]*h[2],S=h[1]*h[1]+h[3]*h[3],C=((h[0]-h[3])*(h[0]-h[3])+(h[2]+h[1])*(h[2]+h[1]))*((h[0]+h[3])*(h[0]+h[3])+(h[2]-h[1])*(h[2]-h[1])),M=(x+S)/2;if(C<Ao*M)return this.rx=this.ry=Math.sqrt(M),this.ax=0,this;var v=h[0]*h[1]+h[2]*h[3];C=Math.sqrt(C);var y=M+C/2,g=M-C/2;return this.ax=Math.abs(v)<Ao&&Math.abs(y-S)<Ao?90:Math.atan(Math.abs(v)>Math.abs(y-S)?(y-x)/v:v/(y-S))*180/Math.PI,this.ax>=0?(this.rx=Math.sqrt(y),this.ry=Math.sqrt(g)):(this.ax+=90,this.rx=Math.sqrt(g),this.ry=Math.sqrt(y)),this};vo.prototype.isDegenerate=function(){return this.rx<Ao*this.ry||this.ry<Ao*this.rx};Rh.exports=vo});var Dh=Vn((FB,Gh)=>{\"use strict\";var BN=Nh(),EN=Ih(),xn=Fs(),IN=Fh(),TN=Oh();function Qe(u){if(!(this instanceof Qe))return new Qe(u);var c=BN(u);this.segments=c.segments,this.err=c.err,this.__stack=[]}Qe.from=function(u){if(typeof u==\"string\")return new Qe(u);if(u instanceof Qe){var c=new Qe(\"\");return c.err=u.err,c.segments=u.segments.map(function(d){return d.slice()}),c.__stack=u.__stack.map(function(d){return xn().matrix(d.toArray())}),c}throw new Error(\"SvgPath.from: invalid param type \"+u)};Qe.prototype.__matrix=function(u){var c=this,d;u.queue.length&&this.iterate(function(h,x,S,C){var M,v,y,g;switch(h[0]){case\"v\":M=u.calc(0,h[1],!0),v=M[0]===0?[\"v\",M[1]]:[\"l\",M[0],M[1]];break;case\"V\":M=u.calc(S,h[1],!1),v=M[0]===u.calc(S,C,!1)[0]?[\"V\",M[1]]:[\"L\",M[0],M[1]];break;case\"h\":M=u.calc(h[1],0,!0),v=M[1]===0?[\"h\",M[0]]:[\"l\",M[0],M[1]];break;case\"H\":M=u.calc(h[1],C,!1),v=M[1]===u.calc(S,C,!1)[1]?[\"H\",M[0]]:[\"L\",M[0],M[1]];break;case\"a\":case\"A\":var A=u.toArray(),I=TN(h[1],h[2],h[3]).transform(A);if(A[0]*A[3]-A[1]*A[2]<0&&(h[5]=h[5]?\"0\":\"1\"),M=u.calc(h[6],h[7],h[0]===\"a\"),h[0]===\"A\"&&h[6]===S&&h[7]===C||h[0]===\"a\"&&h[6]===0&&h[7]===0){v=[h[0]===\"a\"?\"l\":\"L\",M[0],M[1]];break}I.isDegenerate()?v=[h[0]===\"a\"?\"l\":\"L\",M[0],M[1]]:v=[h[0],I.rx,I.ry,I.ax,h[4],h[5],M[0],M[1]];break;case\"m\":g=x>0,M=u.calc(h[1],h[2],g),v=[\"m\",M[0],M[1]];break;default:for(y=h[0],v=[y],g=y.toLowerCase()===y,d=1;d<h.length;d+=2)M=u.calc(h[d],h[d+1],g),v.push(M[0],M[1])}c.segments[x]=v},!0)};Qe.prototype.__evaluateStack=function(){var u,c;if(this.__stack.length){if(this.__stack.length===1){this.__matrix(this.__stack[0]),this.__stack=[];return}for(u=xn(),c=this.__stack.length;--c>=0;)u.matrix(this.__stack[c].toArray());this.__matrix(u),this.__stack=[]}};Qe.prototype.toString=function(){var u=\"\",c=\"\",d=!1;this.__evaluateStack();for(var h=0,x=this.segments.length;h<x;h++){var S=this.segments[h],C=S[0];C!==c||C===\"m\"||C===\"M\"?(C===\"m\"&&c===\"z\"&&(u+=\" \"),u+=C,d=!1):d=!0;for(var M=1;M<S.length;M++){var v=S[M];M===1?d&&v>=0&&(u+=\" \"):v>=0&&(u+=\" \"),u+=v}c=C}return u};Qe.prototype.translate=function(u,c){return this.__stack.push(xn().translate(u,c||0)),this};Qe.prototype.scale=function(u,c){return this.__stack.push(xn().scale(u,!c&&c!==0?u:c)),this};Qe.prototype.rotate=function(u,c,d){return this.__stack.push(xn().rotate(u,c||0,d||0)),this};Qe.prototype.skewX=function(u){return this.__stack.push(xn().skewX(u)),this};Qe.prototype.skewY=function(u){return this.__stack.push(xn().skewY(u)),this};Qe.prototype.matrix=function(u){return this.__stack.push(xn().matrix(u)),this};Qe.prototype.transform=function(u){return u.trim()?(this.__stack.push(EN(u)),this):this};Qe.prototype.round=function(u){var c=0,d=0,h=0,x=0,S;return u=u||0,this.__evaluateStack(),this.segments.forEach(function(C){var M=C[0].toLowerCase()===C[0];switch(C[0]){case\"H\":case\"h\":M&&(C[1]+=h),h=C[1]-C[1].toFixed(u),C[1]=+C[1].toFixed(u);return;case\"V\":case\"v\":M&&(C[1]+=x),x=C[1]-C[1].toFixed(u),C[1]=+C[1].toFixed(u);return;case\"Z\":case\"z\":h=c,x=d;return;case\"M\":case\"m\":M&&(C[1]+=h,C[2]+=x),h=C[1]-C[1].toFixed(u),x=C[2]-C[2].toFixed(u),c=h,d=x,C[1]=+C[1].toFixed(u),C[2]=+C[2].toFixed(u);return;case\"A\":case\"a\":M&&(C[6]+=h,C[7]+=x),h=C[6]-C[6].toFixed(u),x=C[7]-C[7].toFixed(u),C[1]=+C[1].toFixed(u),C[2]=+C[2].toFixed(u),C[3]=+C[3].toFixed(u+2),C[6]=+C[6].toFixed(u),C[7]=+C[7].toFixed(u);return;default:S=C.length,M&&(C[S-2]+=h,C[S-1]+=x),h=C[S-2]-C[S-2].toFixed(u),x=C[S-1]-C[S-1].toFixed(u),C.forEach(function(v,y){y&&(C[y]=+C[y].toFixed(u))});return}}),this};Qe.prototype.iterate=function(u,c){var d=this.segments,h={},x=!1,S=0,C=0,M=0,v=0,y,g,A;if(c||this.__evaluateStack(),d.forEach(function(I,F){var D=u(I,F,S,C);Array.isArray(D)&&(h[F]=D,x=!0);var k=I[0]===I[0].toLowerCase();switch(I[0]){case\"m\":case\"M\":S=I[1]+(k?S:0),C=I[2]+(k?C:0),M=S,v=C;return;case\"h\":case\"H\":S=I[1]+(k?S:0);return;case\"v\":case\"V\":C=I[1]+(k?C:0);return;case\"z\":case\"Z\":S=M,C=v;return;default:S=I[I.length-2]+(k?S:0),C=I[I.length-1]+(k?C:0)}}),!x)return this;for(A=[],y=0;y<d.length;y++)if(typeof h[y]!=\"undefined\")for(g=0;g<h[y].length;g++)A.push(h[y][g]);else A.push(d[y]);return this.segments=A,this};Qe.prototype.abs=function(){return this.iterate(function(u,c,d,h){var x=u[0],S=x.toUpperCase(),C;if(x!==S)switch(u[0]=S,x){case\"v\":u[1]+=h;return;case\"a\":u[6]+=d,u[7]+=h;return;default:for(C=1;C<u.length;C++)u[C]+=C%2?d:h}},!0),this};Qe.prototype.rel=function(){return this.iterate(function(u,c,d,h){var x=u[0],S=x.toLowerCase(),C;if(x!==S&&!(c===0&&x===\"M\"))switch(u[0]=S,x){case\"V\":u[1]-=h;return;case\"A\":u[6]-=d,u[7]-=h;return;default:for(C=1;C<u.length;C++)u[C]-=C%2?d:h}},!0),this};Qe.prototype.unarc=function(){return this.iterate(function(u,c,d,h){var x,S,C,M=[],v=u[0];return v!==\"A\"&&v!==\"a\"?null:(v===\"a\"?(S=d+u[6],C=h+u[7]):(S=u[6],C=u[7]),x=IN(d,h,S,C,u[4],u[5],u[1],u[2],u[3]),x.length===0?[[u[0]===\"a\"?\"l\":\"L\",u[6],u[7]]]:(x.forEach(function(y){M.push([\"C\",y[2],y[3],y[4],y[5],y[6],y[7]])}),M))}),this};Qe.prototype.unshort=function(){var u=this.segments,c,d,h,x,S;return this.iterate(function(C,M,v,y){var g=C[0],A=g.toUpperCase(),I;M&&(A===\"T\"?(I=g===\"t\",h=u[M-1],h[0]===\"Q\"?(c=h[1]-v,d=h[2]-y):h[0]===\"q\"?(c=h[1]-h[3],d=h[2]-h[4]):(c=0,d=0),x=-c,S=-d,I||(x+=v,S+=y),u[M]=[I?\"q\":\"Q\",x,S,C[1],C[2]]):A===\"S\"&&(I=g===\"s\",h=u[M-1],h[0]===\"C\"?(c=h[3]-v,d=h[4]-y):h[0]===\"c\"?(c=h[3]-h[5],d=h[4]-h[6]):(c=0,d=0),x=-c,S=-d,I||(x+=v,S+=y),u[M]=[I?\"c\":\"C\",x,S,C[1],C[2],C[3],C[4]]))}),this};Gh.exports=Qe});var Mh=Vn((SB,kh)=>{\"use strict\";kh.exports=Dh()});var Fo=aN(Mh(),1);var js={};vh(js,{compile:()=>XN});function jr(u,c,d,h){let x={op:c,func:d,data:h};return u.push(x),x}function CN(u,c){return u}var Ss=class{constructor(){this.program=[]}test(c,d){return jr(this.program,5,c,d===void 0?null:d)}jump(c){return jr(this.program,3,null,c)}record(c,d){return jr(this.program,4,d===void 0?CN:d,c)}bad(c=1){return jr(this.program,1,null,c)}accept(){return jr(this.program,0,null,null)}fail(c){return jr(this.program,2,c||null,null)}},Rs=class u{constructor(c,d,h){this.programLength=c,this.maxFromByPc=d,this.maxSurvivorFromByPc=h}static fromProgram(c){let d=c.length,h=[],x=[];return c.forEach(S=>{h.push(0),x.push(0)}),c.forEach((S,C)=>{switch(S.op){case 2:if(S.func===null)return;if(C+1>=d)throw new Error(\"Invalid program: program could run past end\");h[C+1]+=1;break;case 1:case 4:if(C+1>=d)throw new Error(\"Invalid program: program could run past end\");h[C+1]+=1;break;case 3:S.data.forEach(M=>{if(M<0||M>=d)throw new Error(\"Invalid program: program could run past end\");h[M]+=1});break;case 5:if(C+1>=d)throw new Error(\"Invalid program: program could run past end\");x[C+1]+=1;break;case 0:x[C]+=1}}),new u(d,h,x)}static createStub(c){let d=[],h=[];for(let x=0;x<c;++x)d.push(c),h.push(c);return new u(c,d,h)}},Os=class{constructor(c){this.acceptingTraces=c,this.success=c.length>0}},Ta=class{constructor(c){this.t=0,this.i=0,this.h=new Uint16Array(c),this.l=new Uint8Array(c)}getBadness(c){return this.l[c]}add(c,d){this.l[c]=d>255?255:d;let h=(function(x,S,C,M,v){let y=M,g=v;for(;y<g;){let A=y+g>>>1;C<S[x[A]]?g=A:y=A+1}return y})(this.h,this.l,d,this.i,this.t);this.h.copyWithin(h+1,h,this.t),this.h[h]=c,this.t+=1}reschedule(c,d){let h=Math.max(this.l[c],d>255?255:d);if(this.l[c]!==h){let x=this.h.indexOf(c,this.i);if(x<0||x>=this.t)return void(this.l[c]=h);this.h.copyWithin(x,x+1,this.t),this.t-=1,this.add(c,h)}}getNextPc(){return this.i>=this.t?null:this.h[this.i++]}reset(){this.t=0,this.i=0,this.l.fill(0)}},Ca=class{constructor(c){this.o=[];let d=c.length;c.forEach(h=>{this.o.push(h>0?d:-1),d+=h}),this.u=new Uint16Array(d)}clear(){this.u.fill(0,0,this.o.length)}add(c,d){let h=this.u[d],x=this.o[d];this.u[d]+=1,this.u[x+h]=c}has(c){return this.u[c]>0}forEach(c,d){let h=this.u[c],x=this.o[c];for(let S=x;S<x+h;++S)d(this.u[S])}};function Gs(u,c,d=!1){return u===null?c:Array.isArray(u)?(u.indexOf(c)===-1&&(d&&(u=u.slice()),u.push(c)),u):u===c?u:[u,c]}var Nn=class{constructor(c,d){this.prefixes=c,this.record=d}};function Uh(u,c){let d;if(c===null){if(!Array.isArray(u))return u;d=u}else d=u===Nn.EMPTY?[]:Array.isArray(u)?u:[u];return new Nn(d,c)}Nn.EMPTY=new Nn([],null);var Ds=class{constructor(c){this.p=[],this.v=[];for(let d=0;d<c;++d)this.p.push(0),this.v.push(null)}mergeTraces(c,d,h,x,S,C){let M=!1;return h.forEach(d,v=>{let y=this.trace(v,x,S,C);var g,A,I;A=y,I=M,c=(g=c)===null?A:A===null?g:Array.isArray(A)?A.reduce((F,D)=>Gs(F,D,F===A),g):Gs(g,A,I),M=c===y}),c}trace(c,d,h,x){switch(this.p[c]){case 2:return this.v[c];case 1:return null}this.p[c]=1;let S=null,C=d[c];if(C!==null)S=C;else if(!h.has(c))throw new Error(\"Trace without source at pc \"+c);if(S=this.mergeTraces(S,c,h,d,h,x),S!==null){let M=x[c];M!==null&&(S=Uh(S,M))}return this.v[c]=S,this.p[c]=2,S}buildSurvivorTraces(c,d,h,x,S){for(let C=0,M=c.length;C<M;++C){if(!h.has(C)){d[C]=null;continue}this.v.fill(null),this.p.fill(0);let v=this.mergeTraces(null,C,h,c,x,S);if(v===null)throw new Error(\"No non-cyclic paths found to survivor \"+C);d[C]=Uh(v,null)}this.v.fill(null)}},ks=class{constructor(c){this.g=[],this.k=[],this.m=[],this.A=new Ca(c.maxFromByPc),this.T=new Ca(c.maxSurvivorFromByPc),this.S=new Ds(c.programLength);for(let d=0;d<c.programLength;++d)this.g.push(null),this.k.push(null),this.m.push(null);this.k[0]=Nn.EMPTY}reset(c){this.A.clear(),this.T.clear(),this.g.fill(null),c&&(this.k.fill(null),this.m.fill(null),this.k[0]=Nn.EMPTY)}record(c,d){this.g[c]=d}has(c){return this.A.has(c)||this.k[c]!==null}add(c,d){this.A.add(c,d)}hasSurvivor(c){return this.T.has(c)}addSurvivor(c,d){this.T.add(c,d)}buildSurvivorTraces(){let c=this.k;this.S.buildSurvivorTraces(c,this.m,this.T,this.A,this.g),this.k=this.m,this.m=c}getTraces(c){let d=c.reduce((h,x)=>Gs(h,this.k[x]),null);return d===null?[]:Array.isArray(d)?d:[d]}},Fa=class{constructor(c){this.I=[],this.N=new Ta(c.programLength),this.M=new Ta(c.programLength),this.P=new ks(c)}reset(){this.N.reset(),this.N.add(0,0),this.I.length=0,this.P.reset(!0)}getNextThreadPc(){return this.N.getNextPc()}step(c,d,h){let x=this.P.has(d);this.P.add(c,d);let S=this.N.getBadness(c)+h;x?this.N.reschedule(d,S):this.N.add(d,S)}stepToNextGeneration(c,d){let h=this.P.hasSurvivor(d);this.P.addSurvivor(c,d);let x=this.N.getBadness(c);h?this.M.reschedule(d,x):this.M.add(d,x)}accept(c){this.I.push(c),this.P.addSurvivor(c,c)}fail(c){}record(c,d){this.P.record(c,d)}nextGeneration(){this.P.buildSurvivorTraces(),this.P.reset(!1);let c=this.N;c.reset(),this.N=this.M,this.M=c}getAcceptingTraces(){return this.P.getTraces(this.I)}},Ms=class{constructor(c){this.U=[],this.G=c,this.V=Rs.fromProgram(c),this.U.push(new Fa(this.V))}execute(c,d){let h=this.U.pop()||new Fa(this.V);h.reset();let x=c.length,S,C=-1;do{let v=h.getNextThreadPc();if(v===null)break;for(++C,S=C>=x?null:c[C];v!==null;){let y=this.G[v];switch(y.op){case 0:S===null?h.accept(v):h.fail(v);break;case 2:{let g=y.func;if(g===null||g(d)){h.fail(v);break}h.step(v,v+1,0);break}case 1:h.step(v,v+1,y.data);break;case 5:if(S===null){h.fail(v);break}if(!(0,y.func)(S,y.data,d)){h.fail(v);break}h.stepToNextGeneration(v,v+1);break;case 3:{let g=y.data,A=g.length;if(A===0){h.fail(v);break}for(let I=0;I<A;++I)h.step(v,g[I],0);break}case 4:{let g=(0,y.func)(y.data,C,d);g!=null&&h.record(v,g),h.step(v,v+1,0);break}}v=h.getNextThreadPc()}h.nextGeneration()}while(S!==null);let M=new Os(h.getAcceptingTraces());return h.reset(),this.U.push(h),M}};function Ph(u){let c=new Ss;return u(c),new Ms(c.program)}function pt(u){return c=>c===u}function Re(u,c){if(u===null||c===null)throw new Error(\"unescaped hyphen may not be used as a range endpoint\");if(c<u)throw new Error(\"character range is in the wrong order\");return d=>u<=d&&d<=c}function FN(u){return!0}function Hh(){return!1}function Bn(u,c){return d=>u(d)||c(d)}function xo(u,c){switch(c.kind){case\"predicate\":return void u.test(c.value);case\"regexp\":return void Qh(u,c.value,!1)}}function SN(u,c){c.forEach(d=>{(function(h,x){let[S,{min:C,max:M}]=x;if(M!==null){for(let v=0;v<C;++v)xo(h,S);for(let v=C;v<M;++v){let y=h.jump([]);y.data.push(h.program.length),xo(h,S),y.data.push(h.program.length)}}else if(C>0){for(let y=0;y<C-1;++y)xo(h,S);let v=h.program.length;xo(h,S),h.jump([v]).data.push(h.program.length)}else{let v=h.program.length,y=h.jump([]);y.data.push(h.program.length),xo(h,S),h.jump([v]),y.data.push(h.program.length)}})(u,d)})}function Qh(u,c,d){let h=u.program.length,x=u.jump([]);d&&(x.data.push(u.program.length),u.test(()=>!0),u.jump([h]));let S=[];if(c.forEach(C=>{x.data.push(u.program.length),SN(u,C),S.push(u.jump([]))}),S.forEach(C=>{C.data.push(u.program.length)}),d){let C=u.program.length,M=u.jump([]);M.data.push(u.program.length),u.test(()=>!0),u.jump([C]),M.data.push(u.program.length)}}function on(u,c){return{success:!0,offset:u,value:c}}function _h(u){return on(u,void 0)}function Zn(u,c,d=!1){return{success:!1,offset:u,expected:c,fatal:d}}function Oe(u){return(c,d)=>{let h=d+u.length;return c.slice(d,h)===u?on(h,u):Zn(d,[u])}}function ye(u,c){return(d,h)=>{let x=u(d,h);return x.success?on(x.offset,c(x.value)):x}}function Jn(u,c,d,h){return(x,S)=>{let C=u(x,S);return C.success?c(C.value)?C:Zn(S,d,h):C}}function De(u,c){return(d,h)=>{let x=null;for(let S of u){let C=S(d,h);if(C.success||(x===null||C.offset>x.offset?x=C:C.offset===x.offset&&c===void 0&&(x.expected=x.expected.concat(C.expected)),C.fatal))return C}return c=c||(x==null?void 0:x.expected)||[],x&&(x.expected=c),x||Zn(h,c)}}function No(u){return(c,d)=>{let h=u(c,d);return h.success||h.fatal?h:on(d,null)}}function Ua(u){return(c,d)=>{let h=[],x=d;for(;;){let S=u(c,x);if(!S.success){if(S.fatal)return S;break}if(h.push(S.value),S.offset===x)break;x=S.offset}return on(x,h)}}function et(u,c,d){return(h,x)=>{let S=u(h,x);if(!S.success)return S;let C=c(h,S.offset);return C.success?on(C.offset,d(S.value,C.value)):C}}function Xh(u){return et(u,Ua(u),(c,d)=>[c].concat(d))}function Vh(u,c){return u}function RN(u,c){return c}function ct(u,c){return et(u,c,RN)}function Pa(u,c){return et(u,c,Vh)}function Kn(u,c,d,h=!1){return ct(u,h?Jh(Pa(c,d)):Pa(c,d))}function Us(u,c){return(d,h)=>u(d,h).success?Zn(h,c):_h(h)}function Jh(u){return(c,d)=>{let h=u(c,d);return h.success?h:Zn(h.offset,h.expected,!0)}}var ON=(u,c)=>u.length===c?_h(c):Zn(c,[\"end of input\"]),jh=[\"Lu\",\"Ll\",\"Lt\",\"Lm\",\"Lo\",\"Mn\",\"Mc\",\"Me\",\"Nd\",\"Nl\",\"No\",\"Pc\",\"Pd\",\"Ps\",\"Pe\",\"Pi\",\"Pf\",\"Po\",\"Zs\",\"Zl\",\"Zp\",\"Sm\",\"Sc\",\"Sk\",\"So\",\"Cc\",\"Cf\",\"Co\",\"Cn\"],Lr={};function qe(u){return u.codePointAt(0)}\"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/\".split(\"\").forEach((u,c)=>{Lr[u]=c});var Kh=u=>u===-1||u===-2;function Wn(u){return c=>!Kh(c)&&!u(c)}function zh(u,c){return c===null?u:d=>u(d)&&!c(d)}var GN=(function(u,c){let d=new Map,h=0;return u.forEach((x,S)=>{let C=c[S];x!==null&&x.split(\"|\").forEach(M=>{let v=d.get(M),y=Re(h,h+C-1);d.set(M,v?Bn(v,y):y)}),h+=C}),d})([\"BasicLatin\",\"Latin-1Supplement\",\"LatinExtended-A\",\"LatinExtended-B\",\"IPAExtensions\",\"SpacingModifierLetters\",\"CombiningDiacriticalMarks\",\"GreekandCoptic|Greek\",\"Cyrillic\",\"CyrillicSupplement\",\"Armenian\",\"Hebrew\",\"Arabic\",\"Syriac\",\"ArabicSupplement\",\"Thaana\",\"NKo\",\"Samaritan\",\"Mandaic\",\"SyriacSupplement\",\"ArabicExtended-B\",\"ArabicExtended-A\",\"Devanagari\",\"Bengali\",\"Gurmukhi\",\"Gujarati\",\"Oriya\",\"Tamil\",\"Telugu\",\"Kannada\",\"Malayalam\",\"Sinhala\",\"Thai\",\"Lao\",\"Tibetan\",\"Myanmar\",\"Georgian\",\"HangulJamo\",\"Ethiopic\",\"EthiopicSupplement\",\"Cherokee\",\"UnifiedCanadianAboriginalSyllabics\",\"Ogham\",\"Runic\",\"Tagalog\",\"Hanunoo\",\"Buhid\",\"Tagbanwa\",\"Khmer\",\"Mongolian\",\"UnifiedCanadianAboriginalSyllabicsExtended\",\"Limbu\",\"TaiLe\",\"NewTaiLue\",\"KhmerSymbols\",\"Buginese\",\"TaiTham\",\"CombiningDiacriticalMarksExtended\",\"Balinese\",\"Sundanese\",\"Batak\",\"Lepcha\",\"OlChiki\",\"CyrillicExtended-C\",\"GeorgianExtended\",\"SundaneseSupplement\",\"VedicExtensions\",\"PhoneticExtensions\",\"PhoneticExtensionsSupplement\",\"CombiningDiacriticalMarksSupplement\",\"LatinExtendedAdditional\",\"GreekExtended\",\"GeneralPunctuation\",\"SuperscriptsandSubscripts\",\"CurrencySymbols\",\"CombiningDiacriticalMarksforSymbols|CombiningMarksforSymbols\",\"LetterlikeSymbols\",\"NumberForms\",\"Arrows\",\"MathematicalOperators\",\"MiscellaneousTechnical\",\"ControlPictures\",\"OpticalCharacterRecognition\",\"EnclosedAlphanumerics\",\"BoxDrawing\",\"BlockElements\",\"GeometricShapes\",\"MiscellaneousSymbols\",\"Dingbats\",\"MiscellaneousMathematicalSymbols-A\",\"SupplementalArrows-A\",\"BraillePatterns\",\"SupplementalArrows-B\",\"MiscellaneousMathematicalSymbols-B\",\"SupplementalMathematicalOperators\",\"MiscellaneousSymbolsandArrows\",\"Glagolitic\",\"LatinExtended-C\",\"Coptic\",\"GeorgianSupplement\",\"Tifinagh\",\"EthiopicExtended\",\"CyrillicExtended-A\",\"SupplementalPunctuation\",\"CJKRadicalsSupplement\",\"KangxiRadicals\",null,\"IdeographicDescriptionCharacters\",\"CJKSymbolsandPunctuation\",\"Hiragana\",\"Katakana\",\"Bopomofo\",\"HangulCompatibilityJamo\",\"Kanbun\",\"BopomofoExtended\",\"CJKStrokes\",\"KatakanaPhoneticExtensions\",\"EnclosedCJKLettersandMonths\",\"CJKCompatibility\",\"CJKUnifiedIdeographsExtensionA\",\"YijingHexagramSymbols\",\"CJKUnifiedIdeographs\",\"YiSyllables\",\"YiRadicals\",\"Lisu\",\"Vai\",\"CyrillicExtended-B\",\"Bamum\",\"ModifierToneLetters\",\"LatinExtended-D\",\"SylotiNagri\",\"CommonIndicNumberForms\",\"Phags-pa\",\"Saurashtra\",\"DevanagariExtended\",\"KayahLi\",\"Rejang\",\"HangulJamoExtended-A\",\"Javanese\",\"MyanmarExtended-B\",\"Cham\",\"MyanmarExtended-A\",\"TaiViet\",\"MeeteiMayekExtensions\",\"EthiopicExtended-A\",\"LatinExtended-E\",\"CherokeeSupplement\",\"MeeteiMayek\",\"HangulSyllables\",\"HangulJamoExtended-B\",\"HighSurrogates\",\"HighPrivateUseSurrogates\",\"LowSurrogates\",\"PrivateUseArea|PrivateUse\",\"CJKCompatibilityIdeographs\",\"AlphabeticPresentationForms\",\"ArabicPresentationForms-A\",\"VariationSelectors\",\"VerticalForms\",\"CombiningHalfMarks\",\"CJKCompatibilityForms\",\"SmallFormVariants\",\"ArabicPresentationForms-B\",\"HalfwidthandFullwidthForms\",\"Specials\",\"LinearBSyllabary\",\"LinearBIdeograms\",\"AegeanNumbers\",\"AncientGreekNumbers\",\"AncientSymbols\",\"PhaistosDisc\",null,\"Lycian\",\"Carian\",\"CopticEpactNumbers\",\"OldItalic\",\"Gothic\",\"OldPermic\",\"Ugaritic\",\"OldPersian\",null,\"Deseret\",\"Shavian\",\"Osmanya\",\"Osage\",\"Elbasan\",\"CaucasianAlbanian\",\"Vithkuqi\",null,\"LinearA\",\"LatinExtended-F\",null,\"CypriotSyllabary\",\"ImperialAramaic\",\"Palmyrene\",\"Nabataean\",null,\"Hatran\",\"Phoenician\",\"Lydian\",null,\"MeroiticHieroglyphs\",\"MeroiticCursive\",\"Kharoshthi\",\"OldSouthArabian\",\"OldNorthArabian\",null,\"Manichaean\",\"Avestan\",\"InscriptionalParthian\",\"InscriptionalPahlavi\",\"PsalterPahlavi\",null,\"OldTurkic\",null,\"OldHungarian\",\"HanifiRohingya\",null,\"RumiNumeralSymbols\",\"Yezidi\",\"ArabicExtended-C\",\"OldSogdian\",\"Sogdian\",\"OldUyghur\",\"Chorasmian\",\"Elymaic\",\"Brahmi\",\"Kaithi\",\"SoraSompeng\",\"Chakma\",\"Mahajani\",\"Sharada\",\"SinhalaArchaicNumbers\",\"Khojki\",null,\"Multani\",\"Khudawadi\",\"Grantha\",null,\"Newa\",\"Tirhuta\",null,\"Siddham\",\"Modi\",\"MongolianSupplement\",\"Takri\",null,\"Ahom\",null,\"Dogra\",null,\"WarangCiti\",\"DivesAkuru\",null,\"Nandinagari\",\"ZanabazarSquare\",\"Soyombo\",\"UnifiedCanadianAboriginalSyllabicsExtended-A\",\"PauCinHau\",\"DevanagariExtended-A\",null,\"Bhaiksuki\",\"Marchen\",null,\"MasaramGondi\",\"GunjalaGondi\",null,\"Makasar\",\"Kawi\",null,\"LisuSupplement\",\"TamilSupplement\",\"Cuneiform\",\"CuneiformNumbersandPunctuation\",\"EarlyDynasticCuneiform\",null,\"Cypro-Minoan\",\"EgyptianHieroglyphs\",\"EgyptianHieroglyphFormatControls\",null,\"AnatolianHieroglyphs\",null,\"BamumSupplement\",\"Mro\",\"Tangsa\",\"BassaVah\",\"PahawhHmong\",null,\"Medefaidrin\",null,\"Miao\",null,\"IdeographicSymbolsandPunctuation\",\"Tangut\",\"TangutComponents\",\"KhitanSmallScript\",\"TangutSupplement\",null,\"KanaExtended-B\",\"KanaSupplement\",\"KanaExtended-A\",\"SmallKanaExtension\",\"Nushu\",null,\"Duployan\",\"ShorthandFormatControls\",null,\"ZnamennyMusicalNotation\",null,\"ByzantineMusicalSymbols\",\"MusicalSymbols\",\"AncientGreekMusicalNotation\",null,\"KaktovikNumerals\",\"MayanNumerals\",\"TaiXuanJingSymbols\",\"CountingRodNumerals\",null,\"MathematicalAlphanumericSymbols\",\"SuttonSignWriting\",null,\"LatinExtended-G\",\"GlagoliticSupplement\",\"CyrillicExtended-D\",null,\"NyiakengPuachueHmong\",null,\"Toto\",\"Wancho\",null,\"NagMundari\",null,\"EthiopicExtended-B\",\"MendeKikakui\",null,\"Adlam\",null,\"IndicSiyaqNumbers\",null,\"OttomanSiyaqNumbers\",null,\"ArabicMathematicalAlphabeticSymbols\",null,\"MahjongTiles\",\"DominoTiles\",\"PlayingCards\",\"EnclosedAlphanumericSupplement\",\"EnclosedIdeographicSupplement\",\"MiscellaneousSymbolsandPictographs\",\"Emoticons\",\"OrnamentalDingbats\",\"TransportandMapSymbols\",\"AlchemicalSymbols\",\"GeometricShapesExtended\",\"SupplementalArrows-C\",\"SupplementalSymbolsandPictographs\",\"ChessSymbols\",\"SymbolsandPictographsExtended-A\",\"SymbolsforLegacyComputing\",null,\"CJKUnifiedIdeographsExtensionB\",null,\"CJKUnifiedIdeographsExtensionC\",\"CJKUnifiedIdeographsExtensionD\",\"CJKUnifiedIdeographsExtensionE\",\"CJKUnifiedIdeographsExtensionF\",null,\"CJKCompatibilityIdeographsSupplement\",null,\"CJKUnifiedIdeographsExtensionG\",\"CJKUnifiedIdeographsExtensionH\",null,\"Tags\",null,\"VariationSelectorsSupplement\",null,\"SupplementaryPrivateUseArea-A|PrivateUse\",\"SupplementaryPrivateUseArea-B|PrivateUse\"],[128,128,128,208,96,80,112,144,256,48,96,112,256,80,48,64,64,64,32,16,48,96,128,128,128,128,128,128,128,128,128,128,128,128,256,160,96,256,384,32,96,640,32,96,32,32,32,32,128,176,80,80,48,96,32,32,144,80,128,64,64,80,48,16,48,16,48,128,64,64,256,256,112,48,48,48,80,64,112,256,256,64,32,160,128,32,96,256,192,48,16,256,128,128,256,256,96,32,128,48,80,96,32,128,128,224,16,16,64,96,96,48,96,16,32,48,16,256,256,6592,64,20992,1168,64,48,320,96,96,32,224,48,16,64,96,32,48,48,32,96,32,96,32,96,32,48,64,80,64,11184,80,896,128,1024,6400,512,80,688,16,16,16,32,32,144,240,16,128,128,64,80,64,48,128,32,64,32,48,32,48,32,64,32,80,48,48,80,48,64,80,64,384,64,64,64,32,32,48,48,32,32,32,64,32,96,96,32,32,32,64,64,32,32,48,80,80,48,128,64,288,32,64,64,48,64,64,48,32,128,80,48,80,48,96,32,80,48,48,80,128,128,128,96,160,128,96,32,80,48,80,176,80,80,96,96,64,96,80,96,16,64,96,160,112,80,64,96,80,304,32,96,80,16,64,1024,128,208,2624,112,1072,48,4e3,640,8576,576,48,96,48,144,688,96,96,160,64,32,6144,768,512,128,8816,16,256,48,64,400,2304,160,16,4688,208,48,256,256,80,112,32,32,96,32,128,1024,688,1104,256,48,96,112,80,320,48,64,464,48,736,32,224,32,96,784,80,64,80,176,256,256,48,112,96,256,256,768,80,48,128,128,128,256,256,112,144,256,1024,42720,32,4160,224,5776,7488,3088,544,1504,4944,4192,711760,128,128,240,65040,65536,65536]),To=(function(u){let c=new Map,d=u.split(\"\"),h=jh.map(()=>[]),x=0,S=0;for(;S<d.length;){let M=Lr[d[S]],v=(31&M)-2,y=1+Lr[d[S+1]];switch(32&M?(y+=Lr[d[S+2]]<<6,y+=Lr[d[S+3]]<<12,y+=Lr[d[S+4]]<<18,S+=5):S+=2,v){case-2:{let g=0;for(let A=x;A<x+y;++A)h[g].push(pt(A)),g=(g+1)%2;break}case-1:break;default:{let g=h[v];y===1?g.push(pt(x)):g.push(Re(x,x+y-1));break}}x+=y}let C=new Map;return jh.forEach((M,v)=>{let y=h[v].reduce(Bn,Hh);c.set(M,y);let g=M.charAt(0),A=C.get(g)||[];C.set(g,A),A.push(y)}),C.forEach((M,v)=>{c.set(v,M.reduce(Bn,Hh))}),c})(\"bfUATCYATCPAQATAXATAOATBKJTBXCTBCZPATAQAZANAZADZPAXAQAXAbgUATAYDaATAZAaAGARAXAcAaAZAaAXAMBZADATBZAMAGASAMCTACWXACGDXXADHA3DAAPDAAtCAAFDBCAADCAABCCDBCCABCAABCCDCCAABCAAFCAADDAABCAABCBADCBDBGACADCGDCAEADACAEADACAEADAAPDAARDACAEADAABCBA7DFCAABCBDBABCCAJjDBAAGADaFRZDFLZNFEZGFAZAFAZQnvBAAADFAZACADABBFADCTACABDZBCATACCBACABACAABCQBACIDiCADBCCDCAXDDCADAXAABCBDBCyDvAhaAHEJBA1CAANDAgfBAABAClBBFATFDoTAOABBaBYABAHsOAHATAHBTAHBTAHABHGaBDGDTBBKcFXCTBYATBaBHKTAcATCGfFAGJHUKJTDGBHAmiBAATAGAHGcAaAHFFBHBaAHDGBKJGCaBGATNBAcAGAHAGdHaBBmYBAAHKGABNKJGgHIFBaATCFABBHAYBGVHDFAHIFAHCFAHEBBTOBAGYHCBBTABAGKBEGXZAGFBAcBBFHHGoFAHXcAHfIAG1HAIAHAGAICHHIDHAIBGAHGGJHBTBKJTAFAGOHAIBBAGHBBGBBBGVBAGGBAGABCGDBBHAGAICHDBBIBBBIBHAGABHIABDGBBAGCHBBBKJGBYBMFaAYAGATAHABBHBIABAGFBDGBBBGVBAGGBAGBBAGBBAGBBBHABAICHBBDHBBBHCBCHABGGDBAGABGKJHBGCHATABJHBIABAGIBAGCBAGVBAGGBAGBBAGEBBHAGAICHEBAHBIABAIBHABBGABOGBHBBBKJTAYABGGAHFBAHAIBBAGHBBGBBBGVBAGGBAGBBAGEBBHAGAIAHAIAHDBBIBBBIBHABGHBIABDGBBAGCHBBBKJaAGAMFBJHAGABAGFBCGCBAGDBCGBBAGABAGBBCGBBCGCBCGLBDIBHAIBBCICBAICHABBGABFIABNKJMCaFYAaABEHAICHAGHBAGCBAGWBAGPBBHAGAHCIDBAHCBAHDBGHBBAGCBBGABBGBHBBBKJBGTAMGaAGAHAIBTAGHBAGCBAGWBAGJBAGEBBHAGAIAHAIEBAHAIBBAIBHBBGIBBFGBBAGBHBBBKJBAGBIABLHBIBGIBAGCBAGoHBGAICHDBAICBAICHAGAaABDGCIAMGGCHBBBKJMIaAGFBAHAIBBAGRBCGXBAGIBAGABBGGBCHABDICHCBAHABAIHBFKJBBIBTABLGvHAGBHGBDYAGFFAHHTAKJTBBkGBBAGABAGEBAGXBAGABAGJHAGBHIGABBGEBAFABAHGBAKJBBGDBfGAaCTOaATAaCHBaFKJMJaAHAaAHAaAHAPAQAPAQAIBGHBAGjBDHNIAHETAHBGEHKBAHjBAaHHAaFBAaBTEaDTBBkGqIBHDIAHFIAHBIBHBGAKJTFGFIBHBGDHCGAICGBIGGCHDGMHAIBHBIFHAGAIAKJICHAaBClBACABECABBDqTAFADCmIFAABAGDBBGGBAGABAGDBBGoBAGDBBGgBAGDBBGGBAGABAGDBBGOBAG4BAGDBBmCBAABBHCTIMTBCGPaJBFiVBAABBDFBBOAmrJAAaATAGQUAGZPAQABCmKBAATCLCGHBGGRHCIABIGSHBIATBBIGRHBBLGMBAGCBAHBBLGzHBIAHGIHHAIBHKTCFATCYAGAHABBKJBFMJBFTFOATDHCcAHAKJBFGiFAG0BGGEHBGhHAGABEmFBAABJGeBAHCIDHBICBDIBHAIFHCBDaABCTBKJGdBBGEBKGrBDGZBFKJMABCahGWHBIBHABBTBG0IAHAIAHGBAHAIAHAIBHHIFHJBBHAKJBFKJBFTGFATFBBHNJAHPBwHDIAGuHAIAHEIAHAIEHAIBGHBCKJTGaJHIaITBBAHBIAGdIAHDIBHBIAHCGBKJGrHAIAHBICHAIAHCIBBHTDGjIHHHIBHBBCTEKJBCGCKJGdFFTBDIBGCqBBCCTHBHHCTAHMIAHGGDHAGFHAGBIAHBGABEDrF+DMFADhFkH/gVCAADHghBAADHCHDFBBCFBBDHCHDHCHDFBBCFBBDHBACABACABACABACADHCHDNBBDHEHDHEHDHEHDEBADBCDEAZADAZCDCBADBCDEAZCDDBBDBCDBAZCDHCEZCBBDCBADBCDEAZBBAUKcEOFTBRASAPARBSAPARATHVAWAcEUATIRASATDNBTCXAPAQATKXATANATJUAcEBAcJMAFABBMFXCPAQAFAMJXCPAQABAFMBCYgBOHMJDHAJCHLBOaBCAaDCAaBDACCDBCCDAaACAaBXACEaFCAaACAaACAaACDaADACDDAGDDAaBDBCBXECADDaAXAaBDAaAMPLiCADALDMAaBBDXEaEXBaDXAaBXAaBXAaGXAaeXBaBXAaAXAae3LEAAaHPAQAPAQAaTXBaGPAQA6QBAAXAadXYanXF6EBAABYaKBUM76NBAAMV62CAAXAaIXAa1XH6uBAAXA63DAAPAQAPAQAPAQAPAQAPAQAPAQAPAQAMdarXEPAQAXePAQAPAQAPAQAPAQAPAQAXP6/DAA3CCAAPAQAPAQAPAQAPAQAPAQAPAQAPAQAPAQAPAQAPAQAPAQAX+PAQAPAQAXfPAQA3BEAAavXUaBXFamBBafBA6oBAACvDvABCCDBAFCCADDACADFFBCBgjBAADAaFADHCCADABETDMATBDlBADABEDABBG3BGFATABNHAGWBIGGBAGGBAGGBAGGBAGGBAGGBAGGBAGGBAHfTBRASARASATCRASATARASATIOATBOATARASATBRASAPAQAPAQAPAQAPAQATEFATJOBTDOATAPATMaBTCPAQAPAQAPAQAPAQAOABhaZBA6YBAABL6VDAABZaLBDUATCaAFAGALAPAQAPAQAPAQAPAQAPAQAaBPAQAPAQAPAQAPAQAOAPAQBaALIHDIBOAFEaBLCFAGATAaBBAmVBAABBHBZBFBGAOAmZBAATAFCGABEGqBAmdBAABAaBMDaJGfajBLGPaeBAMJadMHaAMOafMJamMO6/EAAm/mBAa/mUIFAFAm2RAABCa2BIGnFFTBmLEAAFATCGPKJGBBTAtGAHAJCTAHJTAFAAbFBHBmFBAALJHBTFBHZWFIZBANDBA9FADHADCAAJFAZBADGAADDBATCDABCDAPCCADBECADABADABADAADBXFCCADAGAFBDAGGHAGCHAGDHAGWIBHBIAaDHABCMFaBYAaABFGzTDBHIBGxIPHBBHTBKJBFHRGFTCGATAGBHAKJGbHHTBGWHKIBBKTAGcBCHCIAGuHAIBHDIBHBICTMBAFAKJBDTBGEHAFAGIKJGEBAGoHFIBHBIBHBBIGCHAGHHAIABBKJBBTDGPFAGFaCGAIAHAIAGxHAGAHCGBHBGEHBGAHAGABXGBFATBGKIAHBIBTBGAFBIAHABJGFBBGFBBGFBIGGBAGGBADqZAFDDIFAZBBDjPBAAGiIBHAIBHAIBTAIAHABBKJBFmjuCABLGWBDGwhDgAA9/jBAmtFAABBmpBAABlDGBLDEBEGAHAGJXAGMBAGEBAGABAGBBAGBBAmrBAAZQBPmqFAAQAPAaPG/BBG1BGaABfGLYAaCHPTGPAQATABFHPTAOBNBPAQAPAQAPAQAPAQAPAQAPAQAPAQAPAQATBPAQATDNCTCBATDOAPAQAPAQAPAQATCXAOAXCBATAYATBBDGEBAmGCAABBcABATCYATCPAQATAXATAOATBKJTBXCTBCZPATAQAZANAZADZPAXAQAXAPAQATAPAQATBGJFAGsFBGeBCGFBBGFBBGFBBGCBCYBXAZAaAYBBAaAXDaBBJcCaBBBGLBAGZBAGSBAGBBAGOBBGNBhm6BAABETCBDMsBCaIL0MDaQMBaCBAaMBCaABuasHAhBCAAGcBCGwBOHAMaBDGfMDBIGTLAGHLABEGlHEBEGdBATAGjBDGHTALEBpCnDnmNBAABBKJBFCjBDDjBDGnBHGzBKTACKBACOBACGBACBBADKBADOBADGBADBhCBAAm2EAABIGVBJGHBXFFBAFpBAFIhEBAAGFBBGABAGrBAGBBCGABBGWBATAMHGWaBMGGeBHMIBvGSBAGBBEMEGVMFBCTAGZBETAB/G3BDMBGBMPBBMtGAHCBAHBBEHDGDBAGCBAGcBBHCBDHAMIBGTIBGGcMBTAGcMCBfGHaAGbHBBDMETGBIG1BCTGGVBBMHGSBEMHGRBGTDBLMGhPBAAmIBAAB2CyBMDyBGMFGjHDBHKJhlEAAMeBAGpBAHBOABBGBhKBAAHCGcMJGABHGVHKMDTEBVGRHDTDBlGUMGBTGWBIIAHAIAG0HOTGBDMTKJHAGBHBGABIHCIAGsICHDIBHBTBcATDHABJcABBGYBGKJBFHCGjHEIAHHBAKJTDGAIBGABHGiHATBGABIHBIAGvICHIIBGDTDHDTAIAHAKJGATAGATCBAMTBKGRBAGYICHCIBHAIAHBTFHAGBHAB9GGBAGABAGDBAGOBAGJTABFGuHAICHHBEKJBFHBIBBAGHBBGBBBGVBAGGBAGBBAGEBAHBGAIBHAIDBBIBBBICBBGABFIABEGEIBBBHGBCHEhKCAAG0ICHHIBHCIAHAGDTEKJTBBATAHAGCBdGvICHFIAHAIDHBIAHBGBTAGABHKJhlCAAGuICHDBBIDHBIAHBTWGDHBBhGvICHHIBHAIAHBTCGABKKJBFTMBSGqHAIAHAIBHFIAHAGATABFKJB1GaBBHCIBHDIAHEBDKJMBTCaAGGh4CAAGrICHIIAHBTAhjBAACfDfKJMIBLGHBBGABBGHBAGBBAGXIFBAIBBBHBIAHAGAIAGAIAHATCBIKJhFBAAGHBBGmICHDBBHBIDHAGATAGAIABaGAHJGnHFIAGAHDTHHABHGAHFIBHCGtHMIAHBTCGATEBMmIBAABGTJh1DAAGIBAGkIAHGBAHFIAHAGATEBJKJMSBCTBGdBBHVBAIAHGIAHBIAHBhIBAAGGBAGBBAGlHFBCHABAHBBAHGGAHABHKJBFGFBAGBBAGfIEBAHBBAIBHAIAHAGABGKJh1EAAGSHBIBTBBGHBGAIAGMBAGhIBHEBCIBHAIAHATMKJhVBAAGABOMUaHYDaQBMTAmZOAAhlBAAruBAABATEBKmDDAAhLpAAmgBAATBBMmvQAAcPHAGFHOhp+AAmGJAAh4GCAm4IAABGGeBAKJBDTBmOBAABAKJBFGdBBHETABJGvHGTEaDFDTAaABJKJBAMGBAGUBEGShvKAACfDfMWTDhkBAAmKBAABDHAGAI2BGHDFMB/FBTAFAHABKIBBNm3fBABHmVTAABpGIhmLCAFDBAFGBAFBBAmiEAABOGABcGCBBGABNGDBHmLGAAhDkAAmqBAABEGMBCGIBGGJBBaAHBTAcDhbJBAHtBBHWBI6zBAAB761DAABJamBBa7IBHCaCIFcHHHaBHGadHDa8BU6BBAAHCaAh5BAAMTBLMTBL6WBAABIMYhGCAACZDZCZDGBADRCZDZCABACBBBCABBCBBBCDBACHDDBADABADGBADKCZDZCBBACDBBCHBACGBADZCBBACDBACEBACABCCGBADZCZDZCZDZCZDZCZDZCZDZCZDbBBCYXADYXADFCYXADYXADFCYXADYXADFCYXADYXADFCYXADYXADFCADABBKx6/HAAH2aDHxaHHAaNHAaBTEBOHEBAHOhPRAADJGADTBFDFhUDAAHGBAHQBBHGBAHBBAHEBEF9BgHAhvBAAGsBCHGFGBBKJBDGAaAh/EAAGdHABQGrHDKJBEYAhPHAAGaFAHDKJhlLAAGGBAGDBAGBBAGOBAmEDAABBMIHGBoChDhHGFABDKJBDTBhQMAAM6aAMCYAMDhLBAAMsaAMOhBDAAGDBAGaBAGBBAGABBGABAGJBAGDBAGABAGABFGABDGABAGABAGABAGCBAGBBAGABBGABAGABAGABAGABAGABAGBBAGABBGDBAGGBAGDBAGDBAGABAGJBAGQBEGCBAGEBAGQBzXBhNEAAarBD6jBAABLaOBBaOBAaOBAakBJMM6gCAAB3acBMarBDaIBGaBBNaFhZCAA66DAAZE6XLAABDaQBCaMBC62BAABD6eBAABFaLBDaABOaLBDa3BHaJBFanBHadBBaBhNBAA6TFAABLaNBBaMBCaIBGatBAaGBHaNBDaIBGaIBG6SCAABAa2BkKJhFQAAmfbKABfm5ABABFmdDAABBmBaBABNmw0BAhewAAmdIAAhhXAAmKNBABEmfBBAhQxtCcABd8fBAAh/BAAnvDAAhP4PA99/PABB99/PA\");function $h(u){return u===32||u===9||u===10||u===13}var Xs=[pt(qe(\":\")),Re(qe(\"A\"),qe(\"Z\")),pt(qe(\"_\")),Re(qe(\"a\"),qe(\"z\")),Re(192,214),Re(216,246),Re(192,214),Re(216,246),Re(248,767),Re(880,893),Re(895,8191),Re(8204,8205),Re(8304,8591),Re(11264,12271),Re(12289,55295),Re(63744,64975),Re(65008,65533),Re(65536,983039)].reduce(Bn),bh=[Xs,pt(qe(\"-\")),pt(qe(\".\")),Re(qe(\"0\"),qe(\"9\")),pt(183),Re(768,879),Re(8255,8256)].reduce(Bn),Wh=To.get(\"Nd\"),DN=Wn(Wh),Zh=zh(Re(0,1114111),[To.get(\"P\"),To.get(\"Z\"),To.get(\"C\")].reduce(Bn)),kN=Wn(Zh);function MN(u){return u!==10&&u!==13&&!Kh(u)}var UN={s:$h,S:Wn($h),i:Xs,I:Wn(Xs),c:bh,C:Wn(bh),d:Wh,D:DN,w:Zh,W:kN},Sa=Oe(\"*\"),$r=Oe(\"\\\\\"),Ra=Oe(\"{\"),br=Oe(\"}\"),Oa=Oe(\"[\"),Ga=Oe(\"]\"),Bo=Oe(\"^\"),Lh=Oe(\"$\"),qh=Oe(\",\"),zn=Oe(\"-\"),Da=Oe(\"(\"),ka=Oe(\")\"),Ps=Oe(\".\"),Hs=Oe(\"|\"),Ma=Oe(\"+\"),Eo=Oe(\"?\"),PN=Oe(\"-[\"),Io=qe(\"0\");function HN(u){function c(q){return new Set(q.split(\"\").map(ae=>qe(ae)))}function d(q,ae){let Ue=q.codePointAt(ae);return Ue===void 0?Zn(ae,[\"any character\"]):on(ae+String.fromCodePoint(Ue).length,Ue)}let h=u.language===\"xpath\"?ct($r,De([ye(Oe(\"n\"),()=>10),ye(Oe(\"r\"),()=>13),ye(Oe(\"t\"),()=>9),ye(De([$r,Hs,Ps,zn,Bo,Eo,Sa,Ma,Ra,br,Lh,Da,ka,Oa,Ga]),q=>qe(q))])):ct($r,De([ye(Oe(\"n\"),()=>10),ye(Oe(\"r\"),()=>13),ye(Oe(\"t\"),()=>9),ye(De([$r,Hs,Ps,zn,Bo,Eo,Sa,Ma,Ra,br,Da,ka,Oa,Ga]),q=>qe(q))]));function x(q,ae){let Ue=c(ae);return et(Oe(q),No(Jn(d,Pe=>Ue.has(Pe),ae.split(\"\"))),(Pe,Cn)=>(function(Et){let w=To.get(Et);if(w==null)throw new Error(Et+\" is not a valid unicode category\");return w})(Cn===null?Pe:Pe+String.fromCodePoint(Cn)))}let S=De([x(\"L\",\"ultmo\"),x(\"M\",\"nce\"),x(\"N\",\"dlo\"),x(\"P\",\"cdseifo\"),x(\"Z\",\"slp\"),x(\"S\",\"mcko\"),x(\"C\",\"cfon\")]),C=[Re(qe(\"a\"),qe(\"z\")),Re(qe(\"A\"),qe(\"Z\")),Re(qe(\"0\"),qe(\"9\")),pt(45)].reduce(Bn),M=De([S,ye(ct(Oe(\"Is\"),(function(q){return(ae,Ue)=>{let Pe=q(ae,Ue);return Pe.success?on(Pe.offset,ae.slice(Ue,Pe.offset)):Pe}})(Xh(Jn(d,C,[\"block identifier\"])))),q=>(function(ae,Ue){let Pe=GN.get(ae);if(Pe===void 0){if(Ue)return FN;throw new Error(`The unicode block identifier \"${ae}\" is not known.`)}return Pe})(q,u.language!==\"xpath\"))]),v=Kn(Oe(\"\\\\p{\"),M,br,!0),y=ye(Kn(Oe(\"\\\\P{\"),M,br,!0),Wn),g=ct($r,ye(De(\"sSiIcCdDwW\".split(\"\").map(q=>Oe(q))),q=>UN[q])),A=ye(Ps,()=>MN),I=De([g,v,y]),F=c(\"\\\\[]\"),D=De([h,Jn(d,q=>!F.has(q),[\"unescaped character\"])]),k=De([ye(zn,()=>null),D]),U=et(k,ct(zn,k),Re);function H(q,ae){return[q].concat(ae||[])}let L=ye((function(q){return(ae,Ue)=>{let Pe=q(ae,Ue);return Pe.success?on(Ue,Pe.value):Pe}})(De([Ga,PN])),()=>null),ee=qe(\"-\"),z=De([ye(Pa(Pa(zn,Us(Oa,[\"not [\"])),L),()=>ee),ct(Us(zn,[\"not -\"]),D)]),J=De([et(ye(z,pt),De([function(q,ae){return J(q,ae)},L]),H),et(De([U,I]),De([Xe,L]),H)]),N=De([et(ye(D,pt),De([J,L]),H),et(De([U,I]),De([Xe,L]),H)]);function Xe(q,ae){return N(q,ae)}let Me=ye(N,q=>q.reduce(Bn)),Kt=ye(ct(Bo,Me),Wn),yt=et(De([ct(Us(Bo,[\"not ^\"]),Me),Kt]),No(ct(zn,(function(q,ae){return W(q,ae)}))),zh),W=Kn(Oa,yt,Ga,!0),Q=u.language===\"xpath\"?De([ye(h,pt),I,W,A,ye(Bo,()=>q=>q===-1),ye(Lh,()=>q=>q===-2)]):De([ye(h,pt),I,W,A]),Ro=u.language===\"xpath\"?c(\".\\\\?*+{}()|^$[]\"):c(\".\\\\?*+{}()|[]\"),B=Jn(d,q=>!Ro.has(q),[\"NormalChar\"]),ba=ye(ct($r,et(ye(Jn(d,Re(qe(\"1\"),qe(\"9\")),[\"digit\"]),q=>q-Io),Ua(ye(Jn(d,Re(Io,qe(\"9\")),[\"digit\"]),q=>q-Io)),(q,ae)=>{ae.reduce((Ue,Pe)=>10*Ue+Pe,q)})),q=>{throw new Error(\"Backreferences in XPath patterns are not yet implemented.\")}),nr=u.language===\"xpath\"?De([ye(B,q=>({kind:\"predicate\",value:pt(q)})),ye(Q,q=>({kind:\"predicate\",value:q})),ye(Kn(Da,ct(No(Oe(\"?:\")),Tn),ka,!0),q=>({kind:\"regexp\",value:q})),ba]):De([ye(B,q=>({kind:\"predicate\",value:pt(q)})),ye(Q,q=>({kind:\"predicate\",value:q})),ye(Kn(Da,Tn,ka,!0),q=>({kind:\"regexp\",value:q}))]),In=ye(Xh(ye(Jn(d,Re(Io,qe(\"9\")),[\"digit\"]),q=>q-Io)),q=>q.reduce((ae,Ue)=>10*ae+Ue)),Be=De([et(In,ct(qh,In),(q,ae)=>{if(ae<q)throw new Error(\"quantifier range is in the wrong order\");return{min:q,max:ae}}),et(In,qh,q=>({min:q,max:null})),ye(In,q=>({min:q,max:q}))]),La=u.language===\"xpath\"?et(De([ye(Eo,()=>({min:0,max:1})),ye(Sa,()=>({min:0,max:null})),ye(Ma,()=>({min:1,max:null})),Kn(Ra,Be,br,!0)]),No(Eo),(q,ae)=>q):De([ye(Eo,()=>({min:0,max:1})),ye(Sa,()=>({min:0,max:null})),ye(Ma,()=>({min:1,max:null})),Kn(Ra,Be,br,!0)]),Bt=Ua(et(nr,ye(No(La),q=>q===null?{min:1,max:1}:q),(q,ae)=>[q,ae])),ht=et(Bt,Ua(ct(Hs,Jh(Bt))),(q,ae)=>[q].concat(ae));function Tn(q,ae){return ht(q,ae)}let qa=(function(q){return et(q,ON,Vh)})(ht);return function(q){let ae;try{ae=qa(q,0)}catch(Ue){throw new Error(`Error parsing pattern \"${q}\": ${Ue instanceof Error?Ue.message:Ue}`)}return ae.success?ae.value:(function(Ue,Pe,Cn){let Et=Cn.map(w=>`\"${w}\"`);throw new Error(`Error parsing pattern \"${Ue}\" at offset ${Pe}: expected ${Et.length>1?\"one of \"+Et.join(\", \"):Et[0]} but found \"${Ue.slice(Pe,Pe+1)}\"`)})(q,ae.offset,ae.expected)}}function Yh(u){return[...u].map(c=>c.codePointAt(0))}function XN(u,c={language:\"xsd\"}){let d=HN(c)(u),h=Ph(x=>{Qh(x,d,c.language===\"xpath\"),x.accept()});return function(x){let S=c.language===\"xpath\"?[-1,...Yh(x),-2]:Yh(x);return h.execute(S).success}}var Vs={};vh(Vs,{codepoint:()=>tf,codepoints:()=>$N,collect:()=>_s,complete:()=>aB,consume:()=>qN,cut:()=>af,delimited:()=>ZN,dispatch:()=>rB,end:()=>Qs,error:()=>mt,except:()=>nB,filter:()=>YN,filterUndefined:()=>VN,first:()=>Ls,followed:()=>$s,map:()=>bs,not:()=>of,ok:()=>Nt,okWithValue:()=>Jt,optional:()=>_N,or:()=>QN,peek:()=>tB,plus:()=>zN,plusConsumed:()=>WN,preceded:()=>Ys,range:()=>bN,recognize:()=>eB,second:()=>qs,sequence:()=>JN,sequenceConsumed:()=>KN,skipChars:()=>LN,star:()=>nf,starConsumed:()=>rf,start:()=>oB,streaming:()=>iB,streamingComplete:()=>pB,streamingFilterUndefined:()=>uB,streamingOptional:()=>cB,streamingStar:()=>lB,streamingThen:()=>sB,then:()=>qr,token:()=>jN});function Jt(u,c){return{success:!0,offset:u,value:c}}function Nt(u){return Jt(u,void 0)}function mt(u,c,d=!1){return{success:!1,offset:u,expected:c,fatal:d}}function jN(u){return(c,d)=>{let h=d+u.length;return c.slice(d,h)===u?Jt(h,u):mt(d,[u])}}function ef(u){return u>65535?2:1}function tf(u,c){return(d,h)=>{let x=d.codePointAt(h);return x!==void 0&&u(x)?Nt(h+ef(x)):mt(h,c)}}function $N(u,c){return(d,h)=>{let x=h;for(;;){let S=d.codePointAt(h);if(S===void 0||!u(S))break;h+=S>65535?2:1}return c!==void 0&&h===x?mt(h,c):Nt(h)}}function bN(u,c,d){return tf(h=>u<=h&&h<=c,d||[`${String.fromCodePoint(u)}-${String.fromCodePoint(c)}`])}function LN(u){return(c,d)=>{let h=u;for(;h>0;){let x=c.codePointAt(d);if(x===void 0)return mt(d,[\"any character\"]);d+=ef(x),h-=1}return Nt(d)}}function bs(u,c){return(d,h)=>{let x=u(d,h);return x.success?Jt(x.offset,c(x.value)):x}}function qN(u){return bs(u,()=>{})}function YN(u,c,d,h){return(x,S)=>{let C=u(x,S);return C.success?c(C.value)?C:mt(S,d,h):C}}function QN(u,c){return(d,h)=>{let x=null;for(let S of u){let C=S(d,h);if(C.success||(x===null||C.offset>x.offset?x=C:C.offset===x.offset&&c===void 0&&(x.expected=x.expected.concat(C.expected)),C.fatal))return C}return c=c||(x==null?void 0:x.expected)||[],x&&(x.expected=c),x||mt(h,c)}}function _N(u){return(c,d)=>{let h=u(c,d);return h.success||h.fatal?h:Jt(d,null)}}function nf(u){return(c,d)=>{let h=[],x=d;for(;;){let S=u(c,x);if(!S.success){if(S.fatal)return S;break}if(h.push(S.value),S.offset===x)break;x=S.offset}return Jt(x,h)}}function rf(u){return(c,d)=>{let h=d;for(;;){let x=u(c,h);if(!x.success){if(x.fatal)return x;break}if(x.offset===h)break;h=x.offset}return Nt(h)}}function VN(u){return bs(u,c=>c.filter(d=>d!==void 0))}function qr(u,c,d){return(h,x)=>{let S=u(h,x);if(!S.success)return S;let C=c(h,S.offset);return C.success?Jt(C.offset,d(S.value,C.value)):C}}function JN(...u){return(c,d)=>{let h=[];for(let x of u){let S=x(c,d);if(!S.success)return S;d=S.offset,h.push(S.value)}return Jt(d,h)}}function KN(...u){return(c,d)=>{for(let h of u){let x=h(c,d);if(!x.success)return x;d=x.offset}return Nt(d)}}function zN(u){return qr(u,nf(u),(c,d)=>[c].concat(d))}function Ls(u,c){return u}function qs(u,c){return c}function WN(u){return qr(u,rf(u),qs)}function Ys(u,c){return qr(u,c,qs)}function $s(u,c){return qr(u,c,Ls)}function ZN(u,c,d,h=!1){return Ys(u,h?af($s(c,d)):$s(c,d))}function eB(u){return(c,d)=>{let h=u(c,d);return h.success?Jt(h.offset,c.slice(d,h.offset)):h}}function tB(u){return(c,d)=>{let h=u(c,d);return h.success?Jt(d,h.value):h}}function of(u,c){return(d,h)=>u(d,h).success?mt(h,c):Nt(h)}function nB(u,c,d){return Ys(of(c,d),u)}function rB(u,c,d=0,h=[]){return(x,S)=>{let C=x.codePointAt(S+d);if(C===void 0)return mt(S,h);let M=u[C];return M===void 0?c===void 0?mt(S,h):c(x,S):M(x,S)}}function af(u){return(c,d)=>{let h=u(c,d);return h.success?h:mt(h.offset,h.expected,!0)}}var oB=(u,c)=>c===0?Nt(c):mt(c,[\"start of input\"]),Qs=(u,c)=>u.length===c?Nt(c):mt(c,[\"end of input\"]);function aB(u){return qr(u,Qs,Ls)}function _s(u){let c=[],d=u.next();for(;!d.done;)c.push(d.value),d=u.next();return[c,d.value]}function iB(u){return function*(c,d){let h=u(c,d);return h.success&&(yield h.value),h}}function sB(u,c){return function*(d,h){let x=yield*Hr(u(d,h));return x.success?yield*Hr(c(d,x.offset)):x}}function uB(u){return function*(c,d){let h=u(c,d),x=h.next();for(;!x.done;){let S=x.value;S!==void 0&&(yield S),x=h.next()}return x.value}}function lB(u){return function*(c,d){for(;;){let[h,x]=_s(u(c,d));if(!x.success)return x.fatal?x:Nt(d);if(yield*Hr(h),d===x.offset)return Nt(d);d=x.offset}}}function cB(u){return function*(c,d){let[h,x]=_s(u(c,d));return x.success?(yield*Hr(h),x):x.fatal?x:Nt(d)}}function pB(u){return function*(c,d){let h=yield*Hr(u(c,d));return h.success?Qs(c,h.offset):h}}var Ge=(function(u,c){let d=\"3.34.0\",h={};function x(e,t){if(!(e!==\"0\"&&e!==\"-0\"||t!==\"0\"&&t!==\"-0\"))return 0;var n=/(?:\\+|(-))?(\\d+)?(?:\\.(\\d+))?/;e=n.exec(e+\"\");var r=n.exec(t+\"\"),o=!e[1];let a=!r[1];return t=(e[2]||\"\").replace(/^0*/,\"\"),n=(r[2]||\"\").replace(/^0*/,\"\"),e=e[3]||\"\",r=r[3]||\"\",o&&!a?1:!o&&a?-1:(o=o&&a,t.length>n.length?o?1:-1:t.length<n.length?o?-1:1:t>n?o?1:-1:t<n?o?-1:1:(t=Math.max(e.length,r.length),n=e.padEnd(t,\"0\"),t=r.padEnd(t,\"0\"),n>t?o?1:-1:n<t?o?-1:1:0))}function S(e,t){return e=e.toString(),-1<e.indexOf(\".\")&&t===0?!1:(e=/^[-+]?0*([1-9]\\d*)?(?:\\.((?:\\d*[1-9])*)0*)?$/.exec(e),e[2]?e[2].length<=t:!0)}function C(){return function(e,t){return 1>x(e,t)}}function M(){return function(e,t){return 0>x(e,t)}}function v(){return function(e,t){return-1<x(e,t)}}function y(){return function(e,t){return 0<x(e,t)}}function g(e,t){switch(t){case\"required\":return/(Z)|([+-])([01]\\d):([0-5]\\d)$/.test(e.toString());case\"prohibited\":return!/(Z)|([+-])([01]\\d):([0-5]\\d)$/.test(e.toString());case\"optional\":return!0}}function A(e){switch(e){case 1:case 0:case 6:case 3:return{};case 4:return{ja:S,va:C(),pc:M(),wa:v(),qc:y()};case 18:return{};case 9:case 8:case 7:case 11:case 12:case 13:case 15:case 14:return{Ca:g};case 22:case 21:case 20:case 23:case 44:return{};default:return null}}var I={},F={};function D(e){return/^([+-]?(\\d*(\\.\\d*)?([eE][+-]?\\d*)?|INF)|NaN)$/.test(e)}function k(e){return/^[_:A-Za-z][-._:A-Za-z0-9]*$/.test(e)}function U(e){return k(e)&&/^[_A-Za-z]([-._A-Za-z0-9])*$/.test(e)}function H(e){return e=e.split(\":\"),e.length===1?U(e[0]):e.length!==2?!1:U(e[0])&&U(e[1])}function L(e){return!/[\\u0009\\u000A\\u000D]/.test(e)}function ee(e){return U(e)}let z=new Map([[45,function(){return!0}],[46,function(){return!0}],[1,function(){return!0}],[0,function(e){return/^(0|1|true|false)$/.test(e)}],[6,function(e){return D(e)}],[3,D],[4,function(e){return/^[+-]?\\d*(\\.\\d*)?$/.test(e)}],[18,function(e){return/^(-)?P(\\d+Y)?(\\d+M)?(\\d+D)?(T(\\d+H)?(\\d+M)?(\\d+(\\.\\d*)?S)?)?$/.test(e)}],[9,function(e){return/^-?([1-9][0-9]{3,}|0[0-9]{3})-(0[1-9]|1[0-2])-(0[1-9]|[12][0-9]|3[01])T(([01][0-9]|2[0-3]):[0-5][0-9]:[0-5][0-9](\\.[0-9]+)?|(24:00:00(\\.0+)?))(Z|(\\+|-)((0[0-9]|1[0-3]):[0-5][0-9]|14:00))?$/.test(e)}],[8,function(e){return/^(([01][0-9]|2[0-3]):[0-5][0-9]:[0-5][0-9](\\.[0-9]+)?|(24:00:00(\\.0+)?))(Z|(\\+|-)((0[0-9]|1[0-3]):[0-5][0-9]|14:00))?$/.test(e)}],[7,function(e){return/^-?([1-9][0-9]{3,}|0[0-9]{3})-(0[1-9]|1[0-2])-(0[1-9]|[12][0-9]|3[01])(Z|(\\+|-)((0[0-9]|1[0-3]):[0-5][0-9]|14:00))?$/.test(e)}],[11,function(e){return/^-?([1-9][0-9]{3,}|0[0-9]{3})-(0[1-9]|1[0-2])(Z|(\\+|-)((0[0-9]|1[0-3]):[0-5][0-9]|14:00))?$/.test(e)}],[12,function(e){return/^-?([1-9][0-9]{3,}|0[0-9]{3})(Z|(\\+|-)((0[0-9]|1[0-3]):[0-5][0-9]|14:00))?$/.test(e)}],[13,function(e){return/^--(0[1-9]|1[0-2])-(0[1-9]|[12][0-9]|3[01])(Z|(\\+|-)((0[0-9]|1[0-3]):[0-5][0-9]|14:00))?$/.test(e)}],[15,function(e){return/^---(0[1-9]|[12][0-9]|3[01])(Z|(\\+|-)((0[0-9]|1[0-3]):[0-5][0-9]|14:00))?$/.test(e)}],[14,function(e){return/^--(0[1-9]|1[0-2])(Z|(\\+|-)((0[0-9]|1[0-3]):[0-5][0-9]|14:00))?$/.test(e)}],[22,function(e){return/^([0-9A-Fa-f]{2})*$/.test(e)}],[21,function(e){return new RegExp(/^((([A-Za-z0-9+/] ?){4})*((([A-Za-z0-9+/] ?){3}[A-Za-z0-9+/])|(([A-Za-z0-9+/] ?){2}[AEIMQUYcgkosw048] ?=)|(([A-Za-z0-9+/] ?)[AQgw] ?= ?=)))?$/).test(e)}],[20,function(){return!0}],[44,H],[48,L],[52,function(e){return L(e)&&!/^ | {2,}| $/.test(e)}],[51,function(e){return/^[a-zA-Z]{1,8}(-[a-zA-Z0-9]{1,8})*$/.test(e)}],[50,function(e){return/^[-._:A-Za-z0-9]+$/.test(e)}],[25,k],[23,H],[24,U],[42,ee],[41,ee],[26,function(e){return U(e)}],[5,function(e){return/^[+-]?\\d+$/.test(e)}],[16,function(e){return/^-?P[0-9]+(Y([0-9]+M)?|M)$/.test(e)}],[17,function(e){return/^-?P([0-9]+D)?(T([0-9]+H)?([0-9]+M)?([0-9]+(\\.[0-9]+)?S)?)?$/.test(e)}]]);var J=Object.create(null);[{C:0,name:59},{C:0,name:46,parent:59,J:{whiteSpace:\"preserve\"}},{C:0,name:19,parent:46},{C:0,name:1,parent:46},{C:0,name:0,parent:46,J:{whiteSpace:\"collapse\"}},{C:0,name:4,parent:46,J:{whiteSpace:\"collapse\"}},{C:0,name:6,parent:46,J:{whiteSpace:\"collapse\"}},{C:0,name:3,parent:46,J:{whiteSpace:\"collapse\"}},{C:0,name:18,parent:46,J:{whiteSpace:\"collapse\"}},{C:0,name:9,parent:46,J:{Ca:\"optional\",whiteSpace:\"collapse\"}},{C:0,name:8,parent:46,J:{Ca:\"optional\",whiteSpace:\"collapse\"}},{C:0,name:7,parent:46,J:{Ca:\"optional\",whiteSpace:\"collapse\"}},{C:0,name:11,parent:46,J:{Ca:\"optional\",whiteSpace:\"collapse\"}},{C:0,name:12,parent:46,J:{Ca:\"optional\",whiteSpace:\"collapse\"}},{C:0,name:13,parent:46,J:{Ca:\"optional\",whiteSpace:\"collapse\"}},{C:0,name:15,parent:46,J:{Ca:\"optional\",whiteSpace:\"collapse\"}},{C:0,name:14,parent:46,J:{Ca:\"optional\",whiteSpace:\"collapse\"}},{C:0,name:22,parent:46,J:{whiteSpace:\"collapse\"}},{C:0,name:21,parent:46,J:{whiteSpace:\"collapse\"}},{C:0,name:20,parent:46,J:{whiteSpace:\"collapse\"}},{C:0,name:23,parent:46,J:{whiteSpace:\"collapse\"}},{C:0,name:44,parent:46,J:{whiteSpace:\"collapse\"}},{C:1,name:10,R:9,J:{whiteSpace:\"collapse\",Ca:\"required\"}},{C:1,name:48,R:1,J:{whiteSpace:\"replace\"}},{C:1,name:52,R:48,J:{whiteSpace:\"collapse\"}},{C:1,name:51,R:52,J:{whiteSpace:\"collapse\"}},{C:1,name:50,R:52,J:{whiteSpace:\"collapse\"}},{C:2,name:49,type:50,J:{minLength:1,whiteSpace:\"collapse\"}},{C:1,name:25,R:52,J:{whiteSpace:\"collapse\"}},{C:1,name:24,R:25,J:{whiteSpace:\"collapse\"}},{C:1,name:42,R:24,J:{whiteSpace:\"collapse\"}},{C:1,name:41,R:24,J:{whiteSpace:\"collapse\"}},{C:2,name:43,type:41,J:{minLength:1,whiteSpace:\"collapse\"}},{C:1,name:26,R:24,J:{whiteSpace:\"collapse\"}},{C:2,name:40,type:26,J:{minLength:1,whiteSpace:\"collapse\"}},{C:0,name:5,parent:4,J:{ja:0,whiteSpace:\"collapse\"}},{C:1,name:27,R:5,J:{ja:0,va:\"0\",whiteSpace:\"collapse\"}},{C:1,name:28,R:27,J:{ja:0,va:\"-1\",whiteSpace:\"collapse\"}},{C:1,name:31,R:5,J:{ja:0,va:\"9223372036854775807\",wa:\"-9223372036854775808\",whiteSpace:\"collapse\"}},{C:1,name:32,R:31,J:{ja:0,va:\"2147483647\",wa:\"-2147483648\",whiteSpace:\"collapse\"}},{C:1,name:33,R:32,J:{ja:0,va:\"32767\",wa:\"-32768\",whiteSpace:\"collapse\"}},{C:1,name:34,R:33,J:{ja:0,va:\"127\",wa:\"-128\",whiteSpace:\"collapse\"}},{C:1,name:30,R:5,J:{ja:0,wa:\"0\",whiteSpace:\"collapse\"}},{C:1,name:36,R:30,J:{ja:0,va:\"18446744073709551615\",wa:\"0\",whiteSpace:\"collapse\"}},{C:1,name:35,R:36,J:{ja:0,va:\"4294967295\",wa:\"0\",whiteSpace:\"collapse\"}},{C:1,name:38,R:35,J:{ja:0,va:\"65535\",wa:\"0\",whiteSpace:\"collapse\"}},{C:1,name:37,R:38,J:{ja:0,va:\"255\",wa:\"0\",whiteSpace:\"collapse\"}},{C:1,name:29,R:30,J:{ja:0,wa:\"1\",whiteSpace:\"collapse\"}},{C:1,name:16,R:18,J:{whiteSpace:\"collapse\"}},{C:1,name:17,R:18,J:{whiteSpace:\"collapse\"}},{C:1,name:60,R:59},{C:3,name:39,Da:[]},{C:1,name:61,R:60},{C:1,name:62,R:60},{C:0,name:53,parent:59},{C:1,name:54,R:53},{C:1,name:58,R:53},{C:1,name:47,R:53},{C:1,name:56,R:53},{C:1,name:57,R:53},{C:1,name:55,R:53},{C:3,name:2,Da:[4,5,6,3]},{C:3,name:63,Da:[]}].forEach(e=>{let t=e.name,n=e.J||{};switch(e.C){case 0:e=e.parent?J[e.parent]:null;var r=z.get(t)||null;J[t]={C:0,type:t,La:n,parent:e,gb:r,Qa:A(t),Da:[]};break;case 1:e=J[e.R],r=z.get(t)||null,J[t]={C:1,type:t,La:n,parent:e,gb:r,Qa:e.Qa,Da:[]};break;case 2:J[t]={C:2,type:t,La:n,parent:J[e.type],gb:null,Qa:I,Da:[]};break;case 3:e=e.Da.map(o=>J[o]),J[t]={C:3,type:t,La:n,parent:null,gb:null,Qa:F,Da:e}}});function N(e,t){if(!J[t])throw Error(\"Unknown type\");return{type:t,value:e}}var Xe=N(!0,0),Me=N(!1,0),Kt=(e=\"A wrong argument type was specified in a function call.\")=>Error(`FORG0006: ${e}`),yt=class{constructor(e,t){this.done=e,this.value=t}},W=new yt(!0);function Q(e){return new yt(!1,e)}function Ro(e,t){if(t.C===3)return!!t.Da.find(n=>Ro(e,n));for(;e;){if(e.type===t.type)return!0;if(e.C===3)return!!e.Da.find(n=>B(n.type,t.type));e=e.parent}return!1}function B(e,t){return e===t?!0:Ro(J[e],J[t])}var ba=class{constructor(e){this.o=w,this.h=e;let t=-1;this.value={next:()=>(t++,t>=e.length?W:Q(e[t]))}}hb(){return this}filter(e){let t=-1;return this.o.create({next:()=>{for(t++;t<this.h.length&&!e(this.h[t],t,this);)t++;return t>=this.h.length?W:Q(this.h[t])}})}first(){return this.h[0]}N(){return this.h}ea(){if(B(this.h[0].type,53))return!0;throw Kt(\"Cannot determine the effective boolean value of a sequence with a length higher than one.\")}Ra(){return this.h.length}isEmpty(){return!1}oa(){return!1}map(e){let t=-1;return this.o.create({next:()=>++t>=this.h.length?W:Q(e(this.h[t],t,this))},this.h.length)}M(e){return e(this.h)}X(e){return e.multiple?e.multiple(this):e.default(this)}},nr=class{constructor(){this.value={next:()=>W}}hb(){return this}filter(){return this}first(){return null}N(){return[]}ea(){return!1}Ra(){return 0}isEmpty(){return!0}oa(){return!1}map(){return this}M(e){return e([])}X(e){return e.empty?e.empty(this):e.default(this)}},In=class{constructor(e,t){this.type=e,this.value=t}};let Be={0:\"xs:boolean\",1:\"xs:string\",2:\"xs:numeric\",3:\"xs:double\",4:\"xs:decimal\",5:\"xs:integer\",6:\"xs:float\",7:\"xs:date\",8:\"xs:time\",9:\"xs:dateTime\",10:\"xs:dateTimeStamp\",11:\"xs:gYearMonth\",12:\"xs:gYear\",13:\"xs:gMonthDay\",14:\"xs:gMonth\",15:\"xs:gDay\",16:\"xs:yearMonthDuration\",17:\"xs:dayTimeDuration\",18:\"xs:duration\",19:\"xs:untypedAtomic\",20:\"xs:anyURI\",21:\"xs:base64Binary\",22:\"xs:hexBinary\",23:\"xs:QName\",24:\"xs:NCName\",25:\"xs:Name\",26:\"xs:ENTITY\",27:\"xs:nonPositiveInteger\",28:\"xs:negativeInteger\",29:\"xs:positiveInteger\",30:\"xs:nonNegativeInteger\",31:\"xs:long\",32:\"xs:int\",33:\"xs:short\",34:\"xs:byte\",35:\"xs:unsignedInt\",36:\"xs:unsignedLong\",37:\"xs:unsignedByte\",38:\"xs:unsignedShort\",39:\"xs:error\",40:\"xs:ENTITIES\",41:\"xs:IDREF\",42:\"xs:ID\",43:\"xs:IDREFS\",44:\"xs:NOTATION\",45:\"xs:anySimpleType\",46:\"xs:anyAtomicType\",47:\"attribute()\",48:\"xs:normalizedString\",49:\"xs:NMTOKENS\",50:\"xs:NMTOKEN\",51:\"xs:language\",52:\"xs:token\",53:\"node()\",54:\"element()\",55:\"document-node()\",56:\"text()\",57:\"processing-instruction()\",58:\"comment()\",59:\"item()\",60:\"function(*)\",61:\"map(*)\",62:\"array(*)\",63:\"none\"},La={\"xs:boolean\":0,\"xs:string\":1,\"xs:numeric\":2,\"xs:double\":3,\"xs:decimal\":4,\"xs:integer\":5,\"xs:float\":6,\"xs:date\":7,\"xs:time\":8,\"xs:dateTime\":9,\"xs:dateTimeStamp\":10,\"xs:gYearMonth\":11,\"xs:gYear\":12,\"xs:gMonthDay\":13,\"xs:gMonth\":14,\"xs:gDay\":15,\"xs:yearMonthDuration\":16,\"xs:dayTimeDuration\":17,\"xs:duration\":18,\"xs:untypedAtomic\":19,\"xs:anyURI\":20,\"xs:base64Binary\":21,\"xs:hexBinary\":22,\"xs:QName\":23,\"xs:NCName\":24,\"xs:Name\":25,\"xs:ENTITY\":26,\"xs:nonPositiveInteger\":27,\"xs:negativeInteger\":28,\"xs:positiveInteger\":29,\"xs:nonNegativeInteger\":30,\"xs:long\":31,\"xs:int\":32,\"xs:short\":33,\"xs:byte\":34,\"xs:unsignedInt\":35,\"xs:unsignedLong\":36,\"xs:unsignedByte\":37,\"xs:unsignedShort\":38,\"xs:error\":39,\"xs:ENTITIES\":40,\"xs:IDREF\":41,\"xs:ID\":42,\"xs:IDREFS\":43,\"xs:NOTATION\":44,\"xs:anySimpleType\":45,\"xs:anyAtomicType\":46,\"attribute()\":47,\"xs:normalizedString\":48,\"xs:NMTOKENS\":49,\"xs:NMTOKEN\":50,\"xs:language\":51,\"xs:token\":52,\"node()\":53,\"element()\":54,\"document-node()\":55,\"text()\":56,\"processing-instruction()\":57,\"comment()\":58,\"item()\":59,\"function(*)\":60,\"map(*)\":61,\"array(*)\":62};function Bt(e){return e.g===2?Be[e.type]+\"*\":e.g===1?Be[e.type]+\"+\":e.g===0?Be[e.type]+\"?\":Be[e.type]}function ht(e){if(e===\"none\")throw Error('XPST0051: The type \"none\" could not be found');if(!e.startsWith(\"xs:\")&&0<=e.indexOf(\":\"))throw Error(`XPST0081: Invalid prefix for input ${e}`);let t=La[e];if(t===void 0)throw Error(`XPST0051: The type \"${e}\" could not be found`);return t}function Tn(e){switch(e[e.length-1]){case\"*\":return{type:ht(e.substr(0,e.length-1)),g:2};case\"?\":return{type:ht(e.substr(0,e.length-1)),g:0};case\"+\":return{type:ht(e.substr(0,e.length-1)),g:1};default:return{type:ht(e),g:3}}}function qa(e){switch(e){case\"*\":return 2;case\"?\":return 0;case\"+\":return 1;default:return 3}}function q(e){let t=e.value;if(B(e.type,53))return!0;if(B(e.type,0))return t;if(B(e.type,1)||B(e.type,20)||B(e.type,19))return t.length!==0;if(B(e.type,2))return!isNaN(t)&&t!==0;throw Kt(`Cannot determine the effective boolean value of a value with the type ${Be[e.type]}`)}function ae(e,t=0){e.h=t}var Ue=class{constructor(e,t=null){this.D=w,this.value={next:n=>this.o!==null&&this.h>=this.o?W:this.v[this.h]!==void 0?Q(this.v[this.h++]):(n=e.next(n),n.done?(this.o=this.h,n):((this.l||2>this.h)&&(this.v[this.h]=n.value),this.h++,n))},this.l=!1,this.v=[],this.h=0,this.o=t}hb(){return this.D.create(this.N())}filter(e){let t=-1,n=this.value;return this.D.create({next:r=>{for(t++,r=n.next(r);!r.done&&!e(r.value,t,this);)t++,r=n.next(0);return r}})}first(){if(this.v[0]!==void 0)return this.v[0];let e=this.value.next(0);return ae(this),e.done?null:e.value}N(){if(this.h>this.v.length&&this.o!==this.v.length)throw Error(\"Implementation error: Sequence Iterator has progressed.\");let e=this.value;this.l=!0;let t=e.next(0);for(;!t.done;)t=e.next(0);return this.v}ea(){let e=this.value,t=this.h;ae(this);var n=e.next(0);if(n.done)return ae(this,t),!1;if(n=n.value,B(n.type,53))return ae(this,t),!0;if(!e.next(0).done)throw Kt(\"Cannot determine the effective boolean value of a sequence with a length higher than one.\");return ae(this,t),q(n)}Ra(e=!1){if(this.o!==null)return this.o;if(e)return-1;e=this.h;let t=this.N().length;return ae(this,e),t}isEmpty(){return this.o===0?!0:this.first()===null}oa(){if(this.o!==null)return this.o===1;var e=this.value;let t=this.h;return ae(this),e.next(0).done?(ae(this,t),!1):(e=e.next(0),ae(this,t),e.done)}map(e){let t=0,n=this.value;return this.D.create({next:r=>(r=n.next(r),r.done?W:Q(e(r.value,t++,this)))},this.o)}M(e,t){let n=this.value,r,o=[],a=!0;return(function(){for(let s=n.next(a?0:t);!s.done;s=n.next(t))a=!1,o.push(s.value);r=e(o).value})(),this.D.create({next:()=>r.next(0)})}X(e){let t=null,n=r=>{t=r.value,r=r.Ra(!0),r!==-1&&(this.o=r)};return this.D.create({next:r=>t?t.next(r):this.isEmpty()?(n(e.empty?e.empty(this):e.default(this)),t.next(r)):this.oa()?(n(e.m?e.m(this):e.default(this)),t.next(r)):(n(e.multiple?e.multiple(this):e.default(this)),t.next(r))})}},Pe=class{constructor(e){this.v=w,this.h=e;let t=!1;this.value={next:()=>t?W:(t=!0,Q(e))},this.o=null}hb(){return this}filter(e){return e(this.h,0,this)?this:this.v.create()}first(){return this.h}N(){return[this.h]}ea(){return this.o===null&&(this.o=q(this.h)),this.o}Ra(){return 1}isEmpty(){return!1}oa(){return!0}map(e){return this.v.create(e(this.h,0,this))}M(e){return e([this.h])}X(e){return e.m?e.m(this):e.default(this)}};let Cn=new nr;function Et(e=null,t=null){if(e===null)return Cn;if(Array.isArray(e))switch(e.length){case 0:return Cn;case 1:return new Pe(e[0]);default:return new ba(e)}return e.next?new Ue(e,t):new Pe(e)}var w={create:Et,m:e=>new Pe(e),empty:()=>Et(),$:()=>Et(Xe),S:()=>Et(Me)};function je(e){let t=[],n=e.value;return()=>{let r=0;return w.create({next:()=>{if(t[r]!==void 0)return t[r++];let o=n.next(0);return o.done?o:t[r++]=o}})}}var tt=class{constructor(e,t,n){this.namespaceURI=t||null,this.prefix=e||\"\",this.localName=n}Aa(){return this.prefix?this.prefix+\":\"+this.localName:this.localName}};function wf(e,t){let n=e.value,r=t.map(o=>o===null?null:je(o));return t=t.reduce((o,a,s)=>(a===null&&o.push(e.o[s]),o),[]),t=new sn({j:t,arity:t.length,bb:!0,H:e.H,localName:\"boundFunction\",namespaceURI:e.l,i:e.s,value:function(o,a,s){let l=Array.from(arguments).slice(3),p=r.map(m=>m===null?l.shift():m());return n.apply(void 0,[o,a,s].concat(p))}}),w.m(t)}var sn=class extends In{constructor({j:e,arity:t,bb:n=!1,H:r=!1,localName:o,namespaceURI:a,i:s,value:l}){for(super(60,null),this.value=l,this.H=r,r=-1,l=0;l<e.length;l++)e[l]===4&&(r=l);-1<r&&(l=Array(t-(e.length-1)).fill(e[r-1]),e=e.slice(0,r).concat(l)),this.o=e,this.v=t,this.ha=n,this.D=o,this.l=a,this.s=s}bb(){return this.ha}};function Ws(e,t){let n=[];return e!==2&&e!==1||n.push(\"type-1-or-type-2\"),n.push(`type-${e}`),t&&n.push(`name-${t}`),n}function Zs(e){let t=e.node.nodeType,n;return(t===2||t===1)&&(n=e.node.localName),Ws(t,n)}function zt(e){let t=e.nodeType;t===4&&(t=3);let n;return(t===2||t===1)&&(n=e.localName),Ws(t,n)}var un=class{getAllAttributes(e,t=null){return e.nodeType!==1?[]:(e=Array.from(e.attributes),t===null?e:e.filter(n=>zt(n).includes(t)))}getAttribute(e,t){return e.nodeType!==1?null:e.getAttribute(t)}getChildNodes(e,t=null){return e=Array.from(e.childNodes),t===null?e:e.filter(n=>zt(n).includes(t))}getData(e){return e.nodeType===2?e.value:e.data}getFirstChild(e,t=null){for(e=e.firstChild;e;e=e.nextSibling)if(t===null||zt(e).includes(t))return e;return null}getLastChild(e,t=null){for(e=e.lastChild;e;e=e.previousSibling)if(t===null||zt(e).includes(t))return e;return null}getNextSibling(e,t=null){for(e=e.nextSibling;e;e=e.nextSibling)if(t===null||zt(e).includes(t))return e;return null}getParentNode(e,t=null){return(e=e.nodeType===2?e.ownerElement:e.parentNode)&&(t===null||zt(e).includes(t))?e:null}getPreviousSibling(e,t=null){for(e=e.previousSibling;e;e=e.previousSibling)if(t===null||zt(e).includes(t))return e;return null}};class Af{insertBefore(t,n,r){return t.insertBefore(n,r)}removeAttributeNS(t,n,r){return t.removeAttributeNS(n,r)}removeChild(t,n){return t.removeChild(n)}setAttributeNS(t,n,r,o){t.setAttributeNS(n,r,o)}setData(t,n){t.data=n}}var Ya=new Af;class eu{constructor(t){this.h=t}insertBefore(t,n,r){return this.h.insertBefore(t,n,r)}removeAttributeNS(t,n,r){return this.h.removeAttributeNS(t,n,r)}removeChild(t,n){return this.h.removeChild(t,n)}setAttributeNS(t,n,r,o){this.h.setAttributeNS(t,n,r,o)}setData(t,n){this.h.setData(t,n)}}function nt(e){return e.Ta!==void 0}function rr(e,t,n){let r=null;return t&&(nt(t.node)?r={F:t.F,offset:n,parent:t.node}:t.F&&(r=t.F)),{node:e,F:r}}function or(e,t,n=null){return e.getAllAttributes(t.node,n).map(r=>rr(r,t,r.nodeName))}function Qa(e,t,n){return t=t.node,nt(t)?(e=t.attributes.find(r=>n===r.name))?e.value:null:(e=e.h.getAttribute(t,n))?e:null}function kt(e,t,n=null){return e.getChildNodes(t.node,n).map((r,o)=>rr(r,t,o))}function Je(e,t){return e.getData(t.node)}function Oo(e,t,n=null){let r=t.node;return nt(r)?e=r.childNodes[0]:((n=e.h.getFirstChild(r,n))&&n.nodeType===10&&(n=e.h.getNextSibling(n)),e=n),e?rr(e,t,0):null}function tu(e,t,n=null){var r=t.node;return nt(r)?(e=r.childNodes.length-1,r=r.childNodes[e]):((r=e.h.getLastChild(r,n))&&r.nodeType===10&&(r=e.h.getPreviousSibling(r)),e=e.getChildNodes(t.node,n).length-1),r?rr(r,t,e):null}function we(e,t,n=null){let r=t.node,o=t.F;if(o)typeof o.offset==\"number\"&&r===o.parent.childNodes[o.offset]||typeof o.offset==\"string\"&&r===o.parent.attributes.find(a=>o.offset===a.nodeName)?(e=o.parent,t=o.F):(e=e.getParentNode(r,n),t=o);else{if(nt(r))return null;e=e.getParentNode(r,n),t=null}return e?{node:e,F:t}:null}function ln(e,t,n=null){let r=t.node,o,a,s,l=t.F;if(nt(r))l&&(s=l.offset+1,o=l.parent.childNodes[s]);else if(l)s=l.offset+1,a=we(e,t,null),o=e.getChildNodes(a.node,n)[s];else{for(o=r;o&&(!(o=e.h.getNextSibling(o,n))||o.nodeType===10););return o?{node:o,F:null}:null}return o?rr(o,a||we(e,t,n),s):null}function Yr(e,t,n=null){let r=t.node,o,a,s=t.F,l;if(nt(r))s&&(l=s.offset-1,o=s.parent.childNodes[l]);else if(s)l=s.offset-1,a=we(e,t,null),o=e.getChildNodes(a.node,n)[l];else{for(o=r;o&&(!(o=e.h.getPreviousSibling(o,n))||o.nodeType===10););return o?{node:o,F:null}:null}return o?rr(o,a||we(e,t,n),l):null}var Go=class{constructor(e){this.h=e,this.o=[]}getAllAttributes(e,t=null){return nt(e)?e.attributes:this.h.getAllAttributes(e,t)}getChildNodes(e,t=null){return t=nt(e)?e.childNodes:this.h.getChildNodes(e,t),e.nodeType===9?t.filter(n=>n.nodeType!==10):t}getData(e){return nt(e)?e.nodeType===2?e.value:e.data:this.h.getData(e)||\"\"}getParentNode(e,t=null){return this.h.getParentNode(e,t)}},_a=(e,t,n,r,o)=>o.M(([a])=>r.M(([s])=>{let l=a.value;if(0>=l||l>s.members.length)throw Error(\"FOAY0001: array position out of bounds.\");return s.members[l-1]()})),rt=class extends sn{constructor(e){super({value:(t,n,r,o)=>_a(t,n,r,w.m(this),o),localName:\"get\",namespaceURI:\"http://www.w3.org/2005/xpath-functions/array\",j:[{type:5,g:3}],arity:1,i:{type:59,g:2}}),this.type=62,this.members=e}};function vf(e){switch(e.node.nodeType){case 2:return 47;case 1:return 54;case 3:case 4:return 56;case 7:return 57;case 8:return 58;case 9:return 55;default:return 53}}function Ce(e){return{type:vf(e),value:e}}function ve(e,t){return e=e.map(n=>n.first()),t(e)}function ar(e,t){var n=B(e.type,1)||B(e.type,20)||B(e.type,19),r=B(t.type,1)||B(t.type,20)||B(t.type,19);return n&&r?e.value===t.value:(n=B(e.type,4)||B(e.type,3)||B(e.type,6),r=B(t.type,4)||B(t.type,3)||B(t.type,6),n&&r?isNaN(e.value)&&isNaN(t.value)?!0:e.value===t.value:(n=B(e.type,0)||B(e.type,22)||B(e.type,18)||B(e.type,23)||B(e.type,44),r=B(t.type,0)||B(t.type,22)||B(t.type,18)||B(t.type,23)||B(t.type,44),n&&r?e.value===t.value:!1))}var Va=(e,t,n,r,o)=>ve([r,o],([a,s])=>(a=a.h.find(l=>ar(l.key,s)))?a.value():w.empty()),Wt=class extends sn{constructor(e){super({j:[{type:59,g:3}],arity:1,localName:\"get\",namespaceURI:\"http://www.w3.org/2005/xpath-functions/map\",value:(t,n,r,o)=>Va(t,n,r,w.m(this),o),i:{type:59,g:2}}),this.type=61,this.h=e}},Ja=class{equals(e){return this.o()===e.o()&&this.v()===e.v()}Za(){return 0}getHours(){return 0}getMinutes(){return 0}$a(){return 0}o(){return 0}v(){return 0}getSeconds(){return 0}ab(){return 0}na(){return!0}h(){return this}};function nu(e){var t=Math.abs(e.Za()),n=Math.abs(e.getHours());let r=Math.abs(e.getMinutes());return e=Math.abs(e.getSeconds()),t=`${t?`${t}D`:\"\"}`,n=(n?`${n}H`:\"\")+(r?`${r}M`:\"\")+(e?`${e}S`:\"\"),t&&n?`${t}T${n}`:t||(n?`T${n}`:\"T0S\")}var Fn=class extends Ja{constructor(e){if(super(),e>Number.MAX_SAFE_INTEGER||e<Number.MIN_SAFE_INTEGER)throw Error(\"FODT0002: Number of seconds given to construct DayTimeDuration overflows MAX_SAFE_INTEGER or MIN_SAFE_INTEGER\");this.ba=e}Za(){return Math.trunc(this.ba/86400)}getHours(){return Math.trunc(this.ba%86400/3600)}getMinutes(){return Math.trunc(this.ba%3600/60)}v(){return this.ba}getSeconds(){let e=this.ba%60;return Object.is(-0,e)?0:e}na(){return Object.is(-0,this.ba)?!1:0<=this.ba}h(){return new this.constructor(-this.ba)}toString(){return(this.na()?\"P\":\"-P\")+nu(this)}},Ka=(e,t,n,r,o,a)=>(e=86400*e+3600*t+60*n+r+o,new Fn(a||e===0?e:-e)),Qr=e=>(e=/^(-)?P(\\d+Y)?(\\d+M)?(\\d+D)?(?:T(\\d+H)?(\\d+M)?(\\d+(\\.\\d*)?S)?)?$/.exec(e))?Ka(e[4]?parseInt(e[4],10):0,e[5]?parseInt(e[5],10):0,e[6]?parseInt(e[6],10):0,e[7]?parseInt(e[7],10):0,e[8]?parseFloat(e[8]):0,!e[1]):null,ru=e=>(e=/^(Z)|([+-])([01]\\d):([0-5]\\d)$/.exec(e),e[1]===\"Z\"?Ka(0,0,0,0,0,!0):Ka(0,e[3]?parseInt(e[3],10):0,e[4]?parseInt(e[4],10):0,0,0,e[2]===\"+\"));function ou(e,t){if(isNaN(t))throw Error(\"FOCA0005: Cannot multiply xs:dayTimeDuration by NaN\");if(e=e.ba*t,e>Number.MAX_SAFE_INTEGER||!Number.isFinite(e))throw Error(\"FODT0002: Value overflow while multiplying xs:dayTimeDuration\");return new Fn(e<Number.MIN_SAFE_INTEGER||Object.is(-0,e)?0:e)}function _r(e){return e?parseInt(e,10):null}function Do(e){e+=\"\";let t=e.startsWith(\"-\");return t&&(e=e.substring(1)),(t?\"-\":\"\")+e.padStart(4,\"0\")}function ot(e){return(e+\"\").padStart(2,\"0\")}function au(e){return e+=\"\",e.split(\".\")[0].length===1&&(e=e.padStart(e.length+1,\"0\")),e}function cn(e){return e.getHours()===0&&e.getMinutes()===0?\"Z\":(e.na()?\"+\":\"-\")+ot(Math.abs(e.getHours()))+\":\"+ot(Math.abs(e.getMinutes()))}function wt(e){var t=/^(?:(-?\\d{4,}))?(?:--?(\\d\\d))?(?:-{1,3}(\\d\\d))?(T)?(?:(\\d\\d):(\\d\\d):(\\d\\d))?(\\.\\d+)?(Z|(?:[+-]\\d\\d:\\d\\d))?$/.exec(e);e=t[1]?parseInt(t[1],10):null;let n=_r(t[2]),r=_r(t[3]),o=t[4],a=_r(t[5]),s=_r(t[6]),l=_r(t[7]),p=t[8]?parseFloat(t[8]):0;if(t=t[9]?ru(t[9]):null,e&&(-271821>e||273860<e))throw Error(\"FODT0001: Datetime year is out of bounds\");return o?new We(e,n,r,a,s,l,p,t,9):a!==null&&s!==null&&l!==null?new We(1972,12,31,a,s,l,p,t,8):e!==null&&n!==null&&r!==null?new We(e,n,r,0,0,0,0,t,7):e!==null&&n!==null?new We(e,n,1,0,0,0,0,t,11):n!==null&&r!==null?new We(1972,n,r,0,0,0,0,t,13):e!==null?new We(e,1,1,0,0,0,0,t,12):n!==null?new We(1972,n,1,0,0,0,0,t,14):new We(1972,12,r,0,0,0,0,t,15)}function It(e,t){switch(t){case 15:return new We(1972,12,e.o,0,0,0,0,e.W,15);case 14:return new We(1972,e.h,1,0,0,0,0,e.W,14);case 12:return new We(e.v,1,1,0,0,0,0,e.W,12);case 13:return new We(1972,e.h,e.o,0,0,0,0,e.W,13);case 11:return new We(e.v,e.h,1,0,0,0,0,e.W,11);case 8:return new We(1972,12,31,e.l,e.s,e.D,e.ma,e.W,8);case 7:return new We(e.v,e.h,e.o,0,0,0,0,e.W,7);default:return new We(e.v,e.h,e.o,e.l,e.s,e.D,e.ma,e.W,9)}}function Vr(e,t){return t=e.W||t||ru(\"Z\"),new Date(Date.UTC(e.v,e.h-1,e.o,e.l-t.getHours(),e.s-t.getMinutes(),e.D,1e3*e.ma))}var We=class{constructor(e,t,n,r,o,a,s,l,p=9){this.v=e,this.h=t,this.o=n+(r===24?1:0),this.l=r===24?0:r,this.s=o,this.D=a,this.ma=s,this.W=l,this.type=p}getDay(){return this.o}getHours(){return this.l}getMinutes(){return this.s}getMonth(){return this.h}getSeconds(){return this.D}getYear(){return this.v}toString(){switch(this.type){case 9:return Do(this.v)+\"-\"+ot(this.h)+\"-\"+ot(this.o)+\"T\"+ot(this.l)+\":\"+ot(this.s)+\":\"+au(this.D+this.ma)+(this.W?cn(this.W):\"\");case 7:return Do(this.v)+\"-\"+ot(this.h)+\"-\"+ot(this.o)+(this.W?cn(this.W):\"\");case 8:return ot(this.l)+\":\"+ot(this.s)+\":\"+au(this.D+this.ma)+(this.W?cn(this.W):\"\");case 15:return\"---\"+ot(this.o)+(this.W?cn(this.W):\"\");case 14:return\"--\"+ot(this.h)+(this.W?cn(this.W):\"\");case 13:return\"--\"+ot(this.h)+\"-\"+ot(this.o)+(this.W?cn(this.W):\"\");case 12:return Do(this.v)+(this.W?cn(this.W):\"\");case 11:return Do(this.v)+\"-\"+ot(this.h)+(this.W?cn(this.W):\"\")}throw Error(\"Unexpected subType\")}};function Jr(e,t,n){let r=Vr(e,n).getTime();return n=Vr(t,n).getTime(),r===n?e.ma===t.ma?0:e.ma>t.ma?1:-1:r>n?1:-1}function Sn(e,t,n){return Jr(e,t,n)===0}function za(e,t,n){return e=(Vr(e,n).getTime()-Vr(t,n).getTime())/1e3,new Fn(e)}function iu(e,t){function n(P,V){return V===2?P%4===0&&P%100!==0||P%400===0?29:28:[4,6,9,11].includes(V)?30:31}let r=e.W,o=e.getYear(),a=e.getMonth(),s=e.getDay(),l=e.getHours(),p=e.getMinutes(),m=e.getSeconds(),T=e.ma;for(o+=t.ab(),a+=t.$a();12<a;)a-=12,o+=1;for(;1>a;)a+=12,--o;var R=n(e.getYear(),e.getMonth());R=e.getDay()===R;let X=n(o,a);for(R&&(s=X),s+=t.Za(),l+=t.getHours(),p+=t.getMinutes(),m+=t.getSeconds(),60<=m?(p+=Math.floor(m/60),m%=60):0>m&&(p-=Math.ceil(Math.abs(m)/60),m=(m%60+60)%60),60<=p?(l+=Math.floor(p/60),p%=60):0>p&&(l-=Math.ceil(Math.abs(p)/60),p=(p%60+60)%60),24<=l?(s+=Math.floor(l/24),l%=24):0>l&&(s-=Math.ceil(Math.abs(l)/24),l=(l%24+24)%24);s>n(o,a);)s-=n(o,a),a+=1;for(;1>s;)--a,s+=n(o,a);for(;12<a;)a-=12,o+=1;for(;1>a;)a+=12,--o;return new We(o,a,s,l,p,m,T,r,e.type)}function Mt(e,t){return iu(e,t)}function Ut(e,t){return iu(e,t.h())}function ko(e,t){if(e===null)return null;switch(typeof e){case\"boolean\":return e?Xe:Me;case\"number\":return N(e,3);case\"string\":return N(e,1);case\"object\":if(\"nodeType\"in e)return Ce({node:e,F:null});if(Array.isArray(e))return new rt(e.map(n=>n===void 0?()=>w.empty():(n=ko(n,t),n=n===null?w.empty():w.m(n),je(n))));if(e instanceof Date){let n=wt(e.toISOString());return N(n,n.type)}return new Wt(Object.keys(e).filter(n=>e[n]!==void 0).map(n=>{var r=ko(e[n],t);return r=r===null?w.empty():w.m(r),{key:N(n,1),value:je(r)}}))}throw Error(`Value ${String(e)} of type \"${typeof e}\" is not adaptable to an XPath value.`)}function Mo(e,t){if(typeof e!=\"number\"&&(typeof e!=\"string\"||!z.get(t)(e)))throw Error(`Cannot convert JavaScript value '${e}' to the XPath type ${Be[t]} since it is not valid.`)}function Wa(e,t,n){if(t===null)return null;switch(e){case 0:return t?Xe:Me;case 1:return N(t+\"\",1);case 3:case 2:return Mo(t,3),N(+t,3);case 4:return Mo(t,e),N(+t,4);case 5:return Mo(t,e),N(t|0,5);case 6:return Mo(t,e),N(+t,6);case 7:case 8:case 9:case 11:case 12:case 13:case 14:case 15:if(!(t instanceof Date))throw Error(`The JavaScript value ${t} with type ${typeof t} is not a valid type to be converted to an XPath ${Be[e]}.`);return N(It(wt(t.toISOString()),e),e);case 53:case 47:case 55:case 54:case 56:case 57:case 58:if(typeof t!=\"object\"||!(\"nodeType\"in t))throw Error(`The JavaScript value ${t} with type ${typeof t} is not a valid type to be converted to an XPath ${Be[e]}.`);return Ce({node:t,F:null});case 59:return ko(t,n);case 61:return ko(t,n);default:throw Error(`Values of the type \"${Be[e]}\" can not be adapted from JavaScript to equivalent XPath values.`)}}function su(e,t,n){if(n.g===0)return t=Wa(n.type,t,e),t===null?[]:[t];if(n.g===2||n.g===1){if(!Array.isArray(t))throw Error(`The JavaScript value ${t} should be an array if it is to be converted to ${Bt(n)}.`);return t.map(o=>Wa(n.type,o,e)).filter(o=>o!==null)}let r=Wa(n.type,t,e);if(r===null)throw Error(`The JavaScript value ${t} should be a single entry if it is to be converted to ${Bt(n)}.`);return[r]}function Uo(e,t,n={type:59,g:0}){return w.create(su(e,t,n))}var xf=class{constructor(){this.h=Math.abs(Math.floor(Math.random()*Po)%Po)}},Po=Ah(2,32);function Zt(e,t,n,r){return new ir({L:n,Ba:t,sa:r||e.sa,qa:e.qa},e.h,e.o)}function uu(e,t){let n=0,r=t.value;return{next:o=>(o=r.next(o),o.done?W:Q(Zt(e,n++,o.value,t)))}}function Za(e){return e.h.ib||(e.h.ib=!0,e.h.qb=wt(new Date().toISOString()),e.h.vb=Qr(\"PT0S\")),e.h.qb}function Tt(e){return e.h.ib||(e.h.ib=!0,e.h.qb=wt(new Date().toISOString()),e.h.vb=Qr(\"PT0S\")),e.h.vb}function Kr(e,t=null){return e=29421*(t!=null?t:e.o.h)%Po,{rb:Math.floor(e),bc:e/Po}}function pn(e,t){return new ir({L:e.L,Ba:e.Ba,sa:e.sa,qa:Object.assign(Object.create(null),e.qa,t)},e.h,e.o)}var ir=class{constructor(e,t={qb:null,vb:null,ib:!1},n=new xf){this.h=t,this.Ba=e.Ba,this.sa=e.sa,this.L=e.L,this.qa=e.qa||Object.create(null),this.o=n}},lu=class{constructor(e,t,n,r,o,a,s,l,p){this.debug=e,this.Ha=t,this.h=n,this.Ja=r,this.Oa=o,this.o=a,this.v=s,this.jb=l,this.Wa=p}};function Ct(e){let t=0,n=null,r=!0;return w.create({next:o=>{for(;t<e.length;){n||(n=e[t].value,r=!0);let a=n.next(r?0:o);if(r=!1,a.done)t++,n=null;else return a}return W}})}var sr=(e,t,n)=>Error(`FORG0001: Cannot cast ${e} to ${Be[t]}${n?`, ${n}`:\"\"}`),Ft=e=>Error(`XPDY0002: ${e}`),At=e=>Error(`XPTY0004: ${e}`),cu=e=>Error(`FOTY0013: Atomization is not supported for ${Be[e]}.`),pu=e=>Error(`XPST0081: The prefix ${e} could not be resolved.`);function en(e,t){if(B(e.type,46)||B(e.type,19)||B(e.type,0)||B(e.type,4)||B(e.type,3)||B(e.type,6)||B(e.type,5)||B(e.type,2)||B(e.type,23)||B(e.type,1))return w.create(e);let n=t.h;if(B(e.type,53)){let r=e.value;if(r.node.nodeType===2||r.node.nodeType===3)return w.create(N(Je(n,r),19));if(r.node.nodeType===8||r.node.nodeType===7)return w.create(N(Je(n,r),1));let o=[];return(function a(s){if(r.node.nodeType!==8&&r.node.nodeType!==7){var l=s.nodeType;l===3||l===4?o.push(n.getData(s)):l!==1&&l!==9&&l!==11||n.getChildNodes(s).forEach(p=>{a(p)})}})(r.node),w.create(N(o.join(\"\"),19))}if(B(e.type,60)&&!B(e.type,62))throw cu(e.type);if(B(e.type,62))return Ct(e.members.map(r=>$e(r(),t)));throw Error(`Atomizing ${e.type} is not implemented.`)}function $e(e,t){let n=!1,r=e.value,o=null;return w.create({next:()=>{for(;!n;){if(!o){var a=r.next(0);if(a.done){n=!0;break}o=en(a.value,t).value}if(a=o.next(0),a.done)o=null;else return a}return W}})}function Ho(e){for(e=J[e];e&&e.C!==0;)e=e.parent;return e?e.type:null}function ei(e,t){t=J[t];let n=t.La;if(!n||!n.whiteSpace)return t.parent?ei(e,t.parent.type):e;switch(t.La.whiteSpace){case\"replace\":return e.replace(/[\\u0009\\u000A\\u000D]/g,\" \");case\"collapse\":return e.replace(/[\\u0009\\u000A\\u000D]/g,\" \").replace(/ {2,}/g,\" \").replace(/^ | $/g,\"\")}return e}function Xo(e,t){for(t=J[t];t&&t.gb===null;){if(t.C===2||t.C===3)return!0;t=t.parent}return t?t.gb(e):!0}function Nf(e,t){for(;e;){if(e.Qa&&e.Qa[t])return e.Qa[t];e=e.parent}return()=>!0}function Bf(e,t){let n=J[t];for(;n;){if(n.La&&!Object.keys(n.La).every(r=>{if(r===\"whiteSpace\")return!0;let o=Nf(n,r);return o?o(e,n.La[r]):!0}))return!1;n=n.parent}return!0}function Rn(e){return e?e.g===2||e.g===0:!0}function Ef(e){return e(1)||e(19)?t=>({u:!0,value:N(t,20)}):()=>({u:!1,error:Error(\"XPTY0004: Casting not supported from given type to xs:anyURI or any of its derived types.\")})}function If(e){return e(22)?t=>{let n=\"\";for(let r=0;r<t.length;r+=2)n+=String.fromCharCode(parseInt(t.substr(r,2),16));return{u:!0,value:N(btoa(n),21)}}:e(1)||e(19)?t=>({u:!0,value:N(t,21)}):()=>({error:Error(\"XPTY0004: Casting not supported from given type to xs:base64Binary or any of its derived types.\"),u:!1})}function Tf(e){return e(2)?t=>({u:!0,value:t===0||isNaN(t)?Me:Xe}):e(1)||e(19)?t=>{switch(t){case\"true\":case\"1\":return{u:!0,value:Xe};case\"false\":case\"0\":return{u:!0,value:Me};default:return{u:!1,error:Error(\"XPTY0004: Casting not supported from given type to xs:boolean or any of its derived types.\")}}}:()=>({u:!1,error:Error(\"XPTY0004: Casting not supported from given type to xs:boolean or any of its derived types.\")})}function Cf(e){return e(9)?t=>({u:!0,value:N(It(t,7),7)}):e(19)||e(1)?t=>({u:!0,value:N(wt(t),7)}):()=>({u:!1,error:Error(\"XPTY0004: Casting not supported from given type to xs:date or any of its derived types.\")})}function Ff(e){return e(7)?t=>({u:!0,value:N(It(t,9),9)}):e(19)||e(1)?t=>({u:!0,value:N(wt(t),9)}):()=>({u:!1,error:Error(\"XPTY0004: Casting not supported from given type to xs:dateTime or any of its derived types.\")})}function Sf(e){return e(18)&&!e(16)?t=>({u:!0,value:N(t.za,17)}):e(16)?()=>({u:!0,value:N(Qr(\"PT0.0S\"),17)}):e(19)||e(1)?t=>{let n=Qr(t);return n?{u:!0,value:N(n,17)}:{u:!1,error:Error(`FORG0001: Can not cast ${t} to xs:dayTimeDuration`)}}:()=>({u:!1,error:Error(\"XPTY0004: Casting not supported from given type to xs:dayTimeDuration or any of its derived types.\")})}function Rf(e){return e(5)?t=>({u:!0,value:N(t,4)}):e(6)||e(3)?t=>isNaN(t)||!isFinite(t)?{u:!1,error:Error(`FOCA0002: Can not cast ${t} to xs:decimal`)}:Math.abs(t)>Number.MAX_VALUE?{u:!1,error:Error(`FOAR0002: Can not cast ${t} to xs:decimal, it is out of bounds for JavaScript numbers`)}:{u:!0,value:N(t,4)}:e(0)?t=>({u:!0,value:N(t?1:0,4)}):e(1)||e(19)?t=>{let n=parseFloat(t);return!isNaN(n)||isFinite(n)?{u:!0,value:N(n,4)}:{u:!1,error:Error(`FORG0001: Can not cast ${t} to xs:decimal`)}}:()=>({u:!1,error:Error(\"XPTY0004: Casting not supported from given type to xs:decimal or any of its derived types.\")})}function hu(e,t){return e(2)?n=>({u:!0,value:n}):e(0)?n=>({u:!0,value:n?1:0}):e(1)||e(19)?n=>{switch(n){case\"NaN\":return{u:!0,value:NaN};case\"INF\":case\"+INF\":return{u:!0,value:1/0};case\"-INF\":return{u:!0,value:-1/0};case\"0\":case\"+0\":return{u:!0,value:0};case\"-0\":return{u:!0,value:-0}}let r=parseFloat(n);return isNaN(r)?{u:!1,error:sr(n,t)}:{u:!0,value:r}}:()=>({u:!1,error:Error(`XPTY0004: Casting not supported from given type to ${t} or any of its derived types.`)})}function Of(e){let t=hu(e,3);return n=>(n=t(n),n.u?{u:!0,value:N(n.value,3)}:n)}function fu(e){let t=Math.abs(e.ab());return e=Math.abs(e.$a()),`${t?`${t}Y`:\"\"}${e?`${e}M`:\"\"}`||\"0M\"}var ur=class extends Ja{constructor(e){if(super(),e>Number.MAX_SAFE_INTEGER||e<Number.MIN_SAFE_INTEGER)throw Error(\"FODT0002: Number of months given to construct YearMonthDuration overflows MAX_SAFE_INTEGER or MIN_SAFE_INTEGER\");this.da=e}$a(){let e=this.da%12;return e===0?0:e}o(){return this.da}ab(){return Math.trunc(this.da/12)}na(){return Object.is(-0,this.da)?!1:0<=this.da}h(){return new this.constructor(-this.da)}toString(){return(this.na()?\"P\":\"-P\")+fu(this)}},ti=e=>{var t=/^(-)?P(\\d+Y)?(\\d+M)?(\\d+D)?(?:T(\\d+H)?(\\d+M)?(\\d+(\\.\\d*)?S)?)?$/.exec(e);if(t){if(e=!t[1],t=12*(t[2]?parseInt(t[2],10):0)+(t[3]?parseInt(t[3],10):0),t>Number.MAX_SAFE_INTEGER||!Number.isFinite(t))throw Error(\"FODT0002: Value overflow while constructing xs:yearMonthDuration\");e=new ur(e||t===0?t:-t)}else e=null;return e};function du(e,t){if(isNaN(t))throw Error(\"FOCA0005: Cannot multiply xs:yearMonthDuration by NaN\");if(e=Math.round(e.da*t),e>Number.MAX_SAFE_INTEGER||!Number.isFinite(e))throw Error(\"FODT0002: Value overflow while constructing xs:yearMonthDuration\");return new ur(e<Number.MIN_SAFE_INTEGER||e===0?0:e)}var ni=class extends Ja{constructor(e,t){super(),this.Na=e,this.za=t}Za(){return this.za.Za()}getHours(){return this.za.getHours()}getMinutes(){return this.za.getMinutes()}$a(){return this.Na.$a()}o(){return this.Na.o()}v(){return this.za.v()}getSeconds(){return this.za.getSeconds()}ab(){return this.Na.ab()}na(){return this.Na.na()&&this.za.na()}h(){return new this.constructor(this.Na.h(),this.za.h())}toString(){let e=this.na()?\"P\":\"-P\",t=fu(this.Na),n=nu(this.za);return t===\"0M\"?e+n:n===\"T0S\"?e+t:e+t+n}};function Gf(e){return e(16)?t=>({u:!0,value:N(new ni(t,new Fn(t.na()?0:-0)),18)}):e(17)?t=>(t=new ni(new ur(t.na()?0:-0),t),{u:!0,value:N(t,18)}):e(18)?t=>({u:!0,value:N(t,18)}):e(19)||e(1)?t=>{var n;return n=new ni(ti(t),Qr(t)),{u:!0,value:N(n,18)}}:()=>({u:!1,error:Error(\"XPTY0004: Casting not supported from given type to xs:duration or any of its derived types.\")})}function Df(e){let t=hu(e,6);return n=>(n=t(n),n.u?{u:!0,value:N(n.value,6)}:n)}function kf(e){return e(7)||e(9)?t=>({u:!0,value:N(It(t,15),15)}):e(19)||e(1)?t=>({u:!0,value:N(wt(t),15)}):()=>({u:!1,error:Error(\"XPTY0004: Casting not supported from given type to xs:gDay or any of its derived types.\")})}function Mf(e){return e(7)||e(9)?t=>({u:!0,value:N(It(t,14),14)}):e(19)||e(1)?t=>({u:!0,value:N(wt(t),14)}):()=>({u:!1,error:Error(\"XPTY0004: Casting not supported from given type to xs:gMonth or any of its derived types.\")})}function Uf(e){return e(7)||e(9)?t=>({u:!0,value:N(It(t,13),13)}):e(19)||e(1)?t=>({u:!0,value:N(wt(t),13)}):()=>({u:!1,error:Error(\"XPTY0004: Casting not supported from given type to xs:gMonthDay or any of its derived types.\")})}function Pf(e){return e(7)||e(9)?t=>({u:!0,value:N(It(t,12),12)}):e(19)||e(1)?t=>({u:!0,value:N(wt(t),12)}):()=>({u:!1,error:Error(\"XPTY0004: Casting not supported from given type to xs:gYear or any of its derived types.\")})}function Hf(e){return e(7)||e(9)?t=>({u:!0,value:N(It(t,11),11)}):e(19)||e(1)?t=>({u:!0,value:N(wt(t),11)}):()=>({u:!1,error:Error(\"XPTY0004: Casting not supported from given type to xs:gYearMonth or any of its derived types.\")})}function Xf(e){return e(21)?t=>{t=atob(t);let n=\"\";for(let r=0,o=t.length;r<o;r++)n+=Number(t.charCodeAt(r)).toString(16);return{u:!0,value:N(n.toUpperCase(),22)}}:e(1)||e(19)?t=>({u:!0,value:N(t,22)}):()=>({u:!1,error:Error(\"XPTY0004: Casting not supported from given type to xs:hexBinary or any of its derived types.\")})}function jf(e){return e(0)?t=>({u:!0,value:N(t?1:0,5)}):e(2)?t=>{let n=Math.trunc(t);return!isFinite(n)||isNaN(n)?{u:!1,error:Error(`FOCA0002: can not cast ${t} to xs:integer`)}:Number.isSafeInteger(n)?{u:!0,value:N(n,5)}:{u:!1,error:Error(`FOAR0002: can not cast ${t} to xs:integer, it is out of bounds for JavaScript numbers.`)}}:e(1)||e(19)?t=>{let n=parseInt(t,10);return isNaN(n)?{u:!1,error:sr(t,5)}:Number.isSafeInteger(n)?{u:!0,value:N(n,5)}:{u:!1,error:Error(`FOCA0003: can not cast ${t} to xs:integer, it is out of bounds for JavaScript numbers.`)}}:()=>({u:!1,error:Error(\"XPTY0004: Casting not supported from given type to xs:integer or any of its derived types.\")})}let $f=[3,6,4,5];function bf(e){var t=yu;return n=>{for(let r of $f){let o=t(e,r)(n);if(o.u)return o}return{u:!1,error:Error(`XPTY0004: Casting not supported from \"${n}\" given type to xs:numeric or any of its derived types.`)}}}function mu(e){if(e(1)||e(19))return t=>({u:!0,value:t+\"\"});if(e(20))return t=>({u:!0,value:t});if(e(23))return t=>({u:!0,value:t.prefix?`${t.prefix}:${t.localName}`:t.localName});if(e(44))return t=>({u:!0,value:t.toString()});if(e(2)){if(e(5)||e(4))return t=>({u:!0,value:(t+\"\").replace(\"e\",\"E\")});if(e(6)||e(3))return t=>isNaN(t)?{u:!0,value:\"NaN\"}:isFinite(t)?Object.is(t,-0)?{u:!0,value:\"-0\"}:{u:!0,value:(t+\"\").replace(\"e\",\"E\").replace(\"E+\",\"E\")}:{u:!0,value:`${0>t?\"-\":\"\"}INF`}}return e(9)||e(7)||e(8)||e(15)||e(14)||e(13)||e(12)||e(11)?t=>({u:!0,value:t.toString()}):e(16)?t=>({u:!0,value:t.toString()}):e(17)?t=>({u:!0,value:t.toString()}):e(18)?t=>({u:!0,value:t.toString()}):e(22)?t=>({u:!0,value:t.toUpperCase()}):t=>({u:!0,value:t+\"\"})}function Lf(e){let t=mu(e);return n=>(n=t(n),n.u?{u:!0,value:N(n.value,1)}:n)}function qf(e){return e(9)?t=>({u:!0,value:N(It(t,8),8)}):e(19)||e(1)?t=>({u:!0,value:N(wt(t),8)}):()=>({u:!1,error:Error(\"XPTY0004: Casting not supported from given type to xs:time or any of its derived types.\")})}function Yf(e){let t=mu(e);return n=>(n=t(n),n.u?{u:!0,value:N(n.value,19)}:n)}function Qf(e){return e(18)&&!e(17)?t=>({u:!0,value:N(t.Na,16)}):e(17)?()=>({u:!0,value:N(ti(\"P0M\"),16)}):e(19)||e(1)?t=>{let n=ti(t);return n?{u:!0,value:N(n,16)}:{u:!1,error:sr(t,16)}}:()=>({u:!1,error:Error(\"XPTY0004: Casting not supported from given type to xs:yearMonthDuration or any of its derived types.\")})}let gu=[2,5,17,16];function yu(e,t){let n=r=>B(e,r);if(t===39)return()=>({u:!1,error:Error(\"FORG0001: Casting to xs:error is always invalid.\")});switch(t){case 19:return Yf(n);case 1:return Lf(n);case 6:return Df(n);case 3:return Of(n);case 4:return Rf(n);case 5:return jf(n);case 2:return bf(e);case 18:return Gf(n);case 16:return Qf(n);case 17:return Sf(n);case 9:return Ff(n);case 8:return qf(n);case 7:return Cf(n);case 11:return Hf(n);case 12:return Pf(n);case 13:return Uf(n);case 15:return kf(n);case 14:return Mf(n);case 0:return Tf(n);case 21:return If(n);case 22:return Xf(n);case 20:return Ef(n);case 23:throw Error(\"Casting to xs:QName is not implemented.\")}return()=>({u:!1,error:Error(`XPTY0004: Casting not supported from ${e} to ${t}.`)})}let wu=Object.create(null);function _f(e,t){if(e===19&&t===1)return a=>({u:!0,value:N(a,1)});if(t===44)return()=>({u:!1,error:Error(\"XPST0080: Casting to xs:NOTATION is not permitted.\")});if(t===39)return()=>({u:!1,error:Error(\"FORG0001: Casting to xs:error is not permitted.\")});if(e===45||t===45)return()=>({u:!1,error:Error(\"XPST0080: Casting from or to xs:anySimpleType is not permitted.\")});if(e===46||t===46)return()=>({u:!1,error:Error(\"XPST0080: Casting from or to xs:anyAtomicType is not permitted.\")});if(B(e,60)&&t===1)return()=>({u:!1,error:Error(\"FOTY0014: Casting from function item to xs:string is not permitted.\")});if(e===t)return a=>({u:!0,value:{type:t,value:a}});let n=gu.includes(e)?e:Ho(e),r=gu.includes(t)?t:Ho(t);if(r===null||n===null)return()=>({u:!1,error:Error(`XPST0081: Can not cast: type ${r?Be[e]:Be[t]} is unknown.`)});let o=[];return n!==1&&n!==19||o.push(a=>{let s=ei(a,t);return Xo(s,t)?{u:!0,value:s}:{u:!1,error:sr(a,t,\"pattern validation failed.\")}}),n!==r&&(o.push(yu(n,r)),o.push(a=>({u:!0,value:a.value}))),r!==19&&r!==1||o.push(a=>Xo(a,t)?{u:!0,value:a}:{u:!1,error:sr(a,t,\"pattern validation failed.\")}),o.push(a=>Bf(a,t)?{u:!0,value:a}:{u:!1,error:sr(a,t,\"pattern validation failed.\")}),o.push(a=>({u:!0,value:{type:t,value:a}})),a=>{a={u:!0,value:a};for(let s=0,l=o.length;s<l&&(a=o[s](a.value),a.u!==!1);++s);return a}}function ri(e,t){let n=e.type+1e4*t,r=wu[n];return r||(r=wu[n]=_f(e.type,t)),r.call(void 0,e.value,t)}function Te(e,t){if(e=ri(e,t),e.u===!0)return e.value;throw e.error}function tn(e){let t=!1;return{next:()=>t?W:(t=!0,Q(e))}}function Au(e,t){return e===t?!0:e&&t&&e.offset===t.offset&&e.parent===t.parent?Au(e.F,t.F):!1}function Ye(e,t){return!!(e===t||e.node===t.node&&Au(e.F,t.F))}function Vf(e,t,n){var r=we(e,t,null);e=kt(e,r,null);for(let o=0,a=e.length;o<a;++o){if(r=e[o],Ye(r,t))return-1;if(Ye(r,n))return 1}}function vu(e,t){let n=[];for(;t;t=we(e,t,null))n.unshift(t);return n}function xu(e,t){let n=[];for(;t;t=e.getParentNode(t,null))n.unshift(t);return n}function Jf(e,t,n,r){if(n.F||r.F||nt(n.node)||nt(r.node)){if(Ye(n,r))return 0;n=vu(t,n),r=vu(t,r);let a=n[0],s=r[0];if(!Ye(a,s))return t=e.findIndex(l=>Ye(l,a)),n=e.findIndex(l=>Ye(l,s)),t===-1&&(t=e.push(a)),n===-1&&(n=e.push(s)),t-n;e=1;for(var o=Math.min(n.length,r.length);e<o&&Ye(n[e],r[e]);++e);return n[e]?r[e]?Vf(t,n[e],r[e]):1:-1}if(n=n.node,o=r.node,n===o)return 0;if(r=xu(t,n),n=xu(t,o),r[0]!==n[0]){let a={node:r[0],F:null},s={node:n[0],F:null};return t=e.findIndex(l=>Ye(l,a)),n=e.findIndex(l=>Ye(l,s)),t===-1&&(t=e.push(a)),n===-1&&(n=e.push(s)),t-n}for(e=1,o=Math.min(r.length,n.length);e<o&&r[e]===n[e];++e);if(r=r[e],o=n[e],!r)return-1;if(!o)return 1;t=t.getChildNodes(n[e-1],null);for(let a=0,s=t.length;a<s;++a){if(e=t[a],e===r)return-1;if(e===o)return 1}}function Nu(e,t,n,r){let o=B(n.type,47),a=B(r.type,47);if(o&&!a){if(n=we(t,n.value),r=r.value,Ye(n,r))return 1}else if(a&&!o){if(n=n.value,r=we(t,r.value),Ye(n,r))return-1}else if(o&&a){if(Ye(we(t,r.value),we(t,n.value)))return n.value.node.localName>r.value.node.localName?1:-1;n=we(t,n.value),r=we(t,r.value)}else n=n.value,r=r.value;return Jf(e,t,n,r)}function zr(e,t,n){return Nu(e.o,e,t,n)}function Wr(e,t){return oi(t,(n,r)=>Nu(e.o,e,n,r)).filter((n,r,o)=>r===0?!0:!Ye(n.value,o[r-1].value))}let Kf=(e,t)=>e<t?-1:0;function oi(e,t=Kf){if(1>=e.length)return e;var n=Math.floor(e.length/2);let r=oi(e.slice(0,n),t);for(e=oi(e.slice(n),t),n=[];r.length&&e.length;)0>t(r[0],e[0])?n.push(r.shift()):n.push(e.shift());return n.concat(r.concat(e))}function zf(e,t){if(B(e.type,2)){if(B(e.type,6))return t===3?N(e.value,3):null;if(B(e.type,4)){if(t===6)return N(e.value,6);if(t===3)return N(e.value,3)}return null}return B(e.type,20)&&t===1?N(e.value,1):null}function jo(e,t,n,r,o){if(B(e.type,t.type)||(B(t.type,46)&&B(e.type,53)&&(e=en(e,n).first()),B(e.type,t.type)||t.type===46))return e;if(B(e.type,19)){if(n=Te(e,t.type),!n)throw Error(`XPTY0004 Unable to convert ${o?\"return\":\"argument\"} of type ${Be[e.type]} to type ${Bt(t)} while calling ${r}`);return n}if(n=zf(e,t.type),!n)throw Error(`XPTY0004 Unable to cast ${o?\"return\":\"argument\"} of type ${Be[e.type]} to type ${Bt(t)} while calling ${r}`);return n}function ai(e){switch(e){case 2:return\"*\";case 1:return\"+\";case 0:return\"?\";case 3:return\"\"}}var Pt=(e,t,n,r,o)=>e.g===0?t.X({default:()=>t.map(a=>jo(a,e,n,r,o)),multiple:()=>{throw Error(`XPTY0004: Multiplicity of ${o?\"function return value\":\"function argument\"} of type ${Be[e.type]}${ai(e.g)} for ${r} is incorrect. Expected \"?\", but got \"+\".`)}}):e.g===1?t.X({empty:()=>{throw Error(`XPTY0004: Multiplicity of ${o?\"function return value\":\"function argument\"} of type ${Be[e.type]}${ai(e.g)} for ${r} is incorrect. Expected \"+\", but got \"empty-sequence()\"`)},default:()=>t.map(a=>jo(a,e,n,r,o))}):e.g===2?t.map(a=>jo(a,e,n,r,o)):t.X({m:()=>t.map(a=>jo(a,e,n,r,o)),default:()=>{throw Error(`XPTY0004: Multiplicity of ${o?\"function return value\":\"function argument\"} of type ${Be[e.type]}${ai(e.g)} for ${r} is incorrect. Expected exactly one`)}});function vt(e,t,n){return(r,o,a)=>{if(r.L===null)throw Ft(`The function ${e} depends on dynamic context, which is absent.`);let s=Pt({type:t,g:3},w.m(r.L),o,e,!1);return n(r,o,a,s)}}var Wf=u;function ii(e,t){return B(e,5)?N(t,5):B(e,6)?N(t,6):B(e,3)?N(t,3):N(t,4)}let Zf=[{ka:\"M\",ia:1e3},{ka:\"CM\",ia:900},{ka:\"D\",ia:500},{ka:\"CD\",ia:400},{ka:\"C\",ia:100},{ka:\"XC\",ia:90},{ka:\"L\",ia:50},{ka:\"XL\",ia:40},{ka:\"X\",ia:10},{ka:\"IX\",ia:9},{ka:\"V\",ia:5},{ka:\"IV\",ia:4},{ka:\"I\",ia:1}];function Bu(e,t){let n=0>e;if(e=Math.abs(e),!e)return\"-\";let r=Zf.reduce((o,a)=>{let s=Math.floor(e/a.ia);return e-=s*a.ia,o+a.ka.repeat(s)},\"\");return t&&(r=r.toLowerCase()),n&&(r=`-${r}`),r}let si=\"ABCDEFGHIJKLMNOPQRSTUVWXYZ\".split(\"\");function Eu(e,t){let n=0>e;if(e=Math.abs(e),!e)return\"-\";let r=\"\",o;for(;0<e;)o=(e-1)%si.length,r=si[o]+r,e=(e-o)/si.length|0;return t&&(r=r.toLowerCase()),n&&(r=`-${r}`),r}function Iu(e,t,n=[]){return Array.from({length:t},(r,o)=>o+e).filter(r=>!n.includes(r))}let ui=Iu(1488,27,[1498,1501,1503,1507,1509]),li=Iu(1575,36,[1577,1595,1596,1597,1598,1599,1600,1609]),ci=\"\\u0623\\u0628\\u062C\\u062F\\u0647\\u0648\\u0632\\u062D\\u0637\\u064A\\u0643\\u0644\\u0645\\u0646\\u0633\\u0639\\u0641\\u0635\\u0642\\u0631\\u0634\\u062A\\u062B\\u062E\\u0630\\u0636\\u0638\\u063A\".split(\"\"),$o=[[1e3,\"\\u063A\"],[900,\"\\u0638\"],[800,\"\\u0636\"],[700,\"\\u0630\"],[600,\"\\u062E\"],[500,\"\\u062B\"],[400,\"\\u062A\"],[300,\"\\u0634\"],[200,\"\\u0631\"],[100,\"\\u0642\"],[90,\"\\u0635\"],[80,\"\\u0641\"],[70,\"\\u0639\"],[60,\"\\u0633\"],[50,\"\\u0646\"],[40,\"\\u0645\"],[30,\"\\u0644\"],[20,\"\\u0643\"],[10,\"\\u064A\"],[9,\"\\u0637\"],[8,\"\\u062D\"],[7,\"\\u0632\"],[6,\"\\u0648\"],[5,\"\\u0647\"],[4,\"\\u062F\"],[3,\"\\u062C\"],[2,\"\\u0628\"],[1,\"\\u0623\"]],e0=[[400,\"\\u05EA\"],[300,\"\\u05E9\"],[200,\"\\u05E8\"],[100,\"\\u05E7\"],[90,\"\\u05E6\"],[80,\"\\u05E4\"],[70,\"\\u05E2\"],[60,\"\\u05E1\"],[50,\"\\u05E0\"],[40,\"\\u05DE\"],[30,\"\\u05DC\"],[20,\"\\u05DB\"],[10,\"\\u05D9\"],[9,\"\\u05D8\"],[8,\"\\u05D7\"],[7,\"\\u05D6\"],[6,\"\\u05D5\"],[5,\"\\u05D4\"],[4,\"\\u05D3\"],[3,\"\\u05D2\"],[2,\"\\u05D1\"],[1,\"\\u05D0\"]];function Tu(e,t=[]){var n=25;return t.sort((r,o)=>r-o),n-=t.length,function(r){let o=0>r;if(r=Math.abs(r),!r)return\"-\";let a=[];for(;0<r;){let s=e+(r-1)%n;t.forEach(l=>{s>=l&&s++}),a.unshift(String.fromCodePoint(s)),r=Math.floor((r-1)/n)}return r=a.join(\"\"),o&&(r=`-${r}`),r}}let Cu=Tu(945,[962]),Fu=Tu(913,[930]);function Ht(e){return new Intl.NumberFormat([],{numberingSystem:\"arab\",useGrouping:!1}).format(e)}function Xt(e){return new Intl.NumberFormat([],{numberingSystem:\"arabext\",useGrouping:!1}).format(e)}let t0=new Map([[\"A\",function(e){return Eu(e,!1)}],[\"a\",function(e){return Eu(e,!0)}],[\"I\",function(e){return Bu(e,!1)}],[\"i\",function(e){return Bu(e,!0)}],[\"lowerGreek\",Cu],[\"\\u03B1\",Cu],[\"upperGreek\",Fu],[\"\\u0391\",Fu],[\"arabicAbjadi\",function(e){let t=0>e;return e=Math.abs(e),e?(e=Array(Math.floor((e-1)/ci.length)+1).fill(ci[(e-1)%ci.length]).join(String.fromCodePoint(8204)),t&&(e=`-${e}`),e):\"-\"}],[\"arabicAbjadNumeral\",function(e){let t=0>e;if(e=Math.abs(e),!e)return\"-\";var n=[],r=Math.floor(e/1e3);if(e-=1e3*r,r===1)n.push($o[0][1]);else if(1<r){for(let[a,s]of $o){var o=a;let l=s;for(;r>=o;)n.push(l),r-=o}n.push($o[0][1])}for(let[a,s]of $o)for(r=a,o=s;e>=r;)e-=r,n.push(o);return n=n.join(\"\"),t&&(n=`-${n}`),n}],[\"arabicAlifBaTa\",function(e){let t=0>e;return e=Math.abs(e),e?(e=Array(Math.floor((e-1)/li.length)+1).fill(String.fromCodePoint(li[(e-1)%li.length])).join(String.fromCodePoint(8204)),t&&(e=`-${e}`),e):\"-\"}],[\"hebrewAlefBet\",function(e){let t=0>e;if(e=Math.abs(e),!e)return\"-\";var n=Math.floor((e-1)/ui.length);let r=String.fromCodePoint(1514);return n=Array(n).fill(r),n.push(String.fromCodePoint(ui[(e-1)%ui.length])),e=n.join(\"\"),t&&(e=`-${e}`),e}],[\"hebrewNumeral\",function(e){let t=0>e;if(e=Math.abs(e),!e)return\"-\";var n=[],r=Math.floor(e/400);e-=400*r;for(var o=0;o<r;o++)n.push(\"\\u05EA\");for(let[a,s]of e0)for(r=a,o=s;e>=r;)e-=r,n.push(o);return e=n.slice(-2).join(\"\"),e===\"\\u05D9\\u05D4\"&&n.splice(-2,2,\"\\u05D8\",\"\\u05D5\"),e===\"\\u05D9\\u05D5\"&&n.splice(-2,2,\"\\u05D8\",\"\\u05D6\"),n=n.join(\"\"),t&&(n=`-${n}`),n}],[\"arabicIndicNumeral\",Ht],[\"\\u0661\",Ht],[\"\\u0662\",Ht],[\"\\u0663\",Ht],[\"\\u0664\",Ht],[\"\\u0665\",Ht],[\"\\u0666\",Ht],[\"\\u0667\",Ht],[\"\\u0668\",Ht],[\"\\u0669\",Ht],[\"persianNumeral\",Xt],[\"\\u06F1\",Xt],[\"\\u06F2\",Xt],[\"\\u06F3\",Xt],[\"\\u06F4\",Xt],[\"\\u06F5\",Xt],[\"\\u06F6\",Xt],[\"\\u06F7\",Xt],[\"\\u06F8\",Xt],[\"\\u06F9\",Xt]]);function n0(e){if(Math.floor(e)===e||isNaN(e))return 0;e=/\\d+(?:\\.(\\d*))?(?:[Ee](-)?(\\d+))*/.exec(`${e}`);let t=e[1]?e[1].length:0;return e[3]?e[2]?t+parseInt(e[3],10):(e=t-parseInt(e[3],10),0>e?0:e):t}function r0(e,t,n){return t&&e*n%1%.5===0?Math.floor(e*n)%2===0?Math.floor(e*n)/n:Math.ceil(e*n)/n:Math.round(e*n)/n}function lr(e,t,n,r,o,a){let s=!1;return w.create({next:()=>{if(s)return W;let l=o.first();if(!l)return s=!0,W;if((B(l.type,6)||B(l.type,3))&&(l.value===0||isNaN(l.value)||l.value===1/0||l.value===-1/0))return s=!0,Q(l);var p;if(a?p=a.first().value:p=0,s=!0,n0(l.value)<p)return Q(l);let m=[5,4,3,6].find(R=>B(l.type,R)),T=Te(l,4);switch(p=r0(T.value,e,Math.pow(10,p)),m){case 4:return Q(N(p,4));case 3:return Q(N(p,3));case 6:return Q(N(p,6));case 5:return Q(N(p,5))}}})}let Su=(e,t,n,r)=>$e(r,t).X({empty:()=>w.m(N(NaN,3)),m:()=>{let o=ri(r.first(),3);return o.u?w.m(o.value):w.m(N(NaN,3))},multiple:()=>{throw Error(\"fn:number may only be called with zero or one values\")}});function o0(e){let t=5381;for(let n=0;n<e.length;++n)t=33*t+e.charCodeAt(n),t%=Number.MAX_SAFE_INTEGER;return t}let Ru=(e,t,n,r=w.empty())=>{function o(a){let s=(l,p,m,T)=>{if(T.isEmpty()||T.oa())return T;for(l=T.N(),p=a,m=l.length-1;1<m;m--){p=Kr(e,p).rb,T=p%m;let R=l[T];l[T]=l[m],l[m]=R}return w.create(l)};return w.m(new Wt([{key:N(\"number\",1),value:()=>w.m(N(Kr(e,a).bc,3))},{key:N(\"next\",1),value:()=>w.m(new sn({value:()=>o(Kr(e,a).rb),bb:!0,localName:\"\",namespaceURI:\"\",j:[],arity:0,i:{type:61,g:3}}))},{key:N(\"permute\",1),value:()=>w.m(new sn({value:s,bb:!0,localName:\"\",namespaceURI:\"\",j:[{type:59,g:2}],arity:1,i:{type:59,g:2}}))}]))}return t=r.isEmpty()?Kr(e):Kr(e,o0(Te(r.first(),1).value)),o(t.rb)};var a0=[{namespaceURI:\"http://www.w3.org/2005/xpath-functions\",localName:\"abs\",j:[{type:2,g:0}],i:{type:2,g:0},callFunction:(e,t,n,r)=>r.map(o=>ii(o.type,Math.abs(o.value)))},{namespaceURI:\"http://www.w3.org/2005/xpath-functions\",localName:\"format-integer\",j:[{type:5,g:0},{type:1,g:3}],i:{type:1,g:3},callFunction:(e,t,n,r,o)=>(e=r.first(),o=o.first(),r.isEmpty()?w.m(N(\"\",1)):(r=t0.get(o.value),o=e.value,r?(r=r(o),w.m(N(r,1))):w.m(N(o.toString(),1))))},{namespaceURI:\"http://www.w3.org/2005/xpath-functions\",localName:\"ceiling\",j:[{type:2,g:0}],i:{type:2,g:0},callFunction:(e,t,n,r)=>r.map(o=>ii(o.type,Math.ceil(o.value)))},{namespaceURI:\"http://www.w3.org/2005/xpath-functions\",localName:\"floor\",j:[{type:2,g:0}],i:{type:2,g:0},callFunction:(e,t,n,r)=>r.map(o=>ii(o.type,Math.floor(o.value)))},{namespaceURI:\"http://www.w3.org/2005/xpath-functions\",localName:\"round\",j:[{type:2,g:0}],i:{type:2,g:0},callFunction:lr.bind(null,!1)},{namespaceURI:\"http://www.w3.org/2005/xpath-functions\",localName:\"round\",j:[{type:2,g:0},{type:5,g:3}],i:{type:2,g:0},callFunction:lr.bind(null,!1)},{namespaceURI:\"http://www.w3.org/2005/xpath-functions\",localName:\"round-half-to-even\",j:[{type:2,g:0}],i:{type:2,g:0},callFunction:lr.bind(null,!0)},{namespaceURI:\"http://www.w3.org/2005/xpath-functions\",localName:\"round-half-to-even\",j:[{type:2,g:0},{type:5,g:3}],i:{type:2,g:0},callFunction:lr.bind(null,!0)},{namespaceURI:\"http://www.w3.org/2005/xpath-functions\",localName:\"number\",j:[{type:46,g:0}],i:{type:3,g:3},callFunction:Su},{namespaceURI:\"http://www.w3.org/2005/xpath-functions\",localName:\"number\",j:[],i:{type:3,g:3},callFunction:(e,t,n)=>{let r=e.L&&Pt({type:46,g:0},w.m(e.L),t,\"fn:number\",!1);if(!r)throw Ft(\"fn:number needs an atomizable context item.\");return Su(e,t,n,r)}},{namespaceURI:\"http://www.w3.org/2005/xpath-functions\",localName:\"random-number-generator\",j:[],i:{type:61,g:3},callFunction:Ru},{namespaceURI:\"http://www.w3.org/2005/xpath-functions\",localName:\"random-number-generator\",j:[{type:46,g:0}],i:{type:61,g:3},callFunction:Ru}];function bo(){throw Error(\"FOCH0002: No collations are supported\")}let Zr=(e,t,n,r)=>r.X({empty:()=>w.m(N(\"\",1)),default:()=>r.map(o=>{if(B(o.type,53)){let a=en(o,t).first();return B(o.type,47)?Te(a,1):a}return Te(o,1)})}),Ou=(e,t,n,r,o)=>ve([o],([a])=>$e(r,t).M(s=>(s=s.map(l=>Te(l,1).value).join(a.value),w.m(N(s,1))))),Gu=(e,t,n,r)=>r.isEmpty()?w.m(N(0,5)):(e=r.first().value,w.m(N(Array.from(e).length,5))),Du=(e,t,n,r,o,a)=>{let s=lr(!1,e,t,n,o,null),l=a!==null?lr(!1,e,t,n,a,null):null,p=!1,m=null,T=null,R=null;return w.create({next:()=>p?W:!m&&(m=r.first(),m===null)?(p=!0,Q(N(\"\",1))):(T||(T=s.first()),!R&&a&&(R=null,R=l.first()),p=!0,Q(N(Array.from(m.value).slice(Math.max(T.value-1,0),a?T.value+R.value-1:void 0).join(\"\"),1)))})},ku=(e,t,n,r,o)=>{if(r.isEmpty()||r.first().value.length===0)return w.empty();for(e=r.first().value,o=o.first().value,o=Uu(o),o.lastIndex=0,t=[],n=o.exec(e),r=0;n;)t.push(e.slice(r,n.index)),r=o.lastIndex,n=o.exec(e);return t.push(e.slice(r)),w.create(t.map(a=>N(a,1)))},pi=(e,t,n,r)=>r.isEmpty()?w.m(N(\"\",1)):(e=r.first().value.trim(),w.m(N(e.replace(/\\s+/g,\" \"),1))),Mu=new Map,hi=new Map;function Uu(e){if(hi.has(e))return hi.get(e);let t;try{t=new RegExp(e,\"g\")}catch(n){throw Error(`FORX0002: ${n}`)}if(t.test(\"\"))throw Error(`FORX0003: the pattern ${e} matches the zero length string`);return hi.set(e,t),t}var i0=[{namespaceURI:\"http://www.w3.org/2005/xpath-functions\",localName:\"compare\",j:[{type:1,g:0},{type:1,g:0}],i:{type:5,g:0},callFunction:(e,t,n,r,o)=>r.isEmpty()||o.isEmpty()?w.empty():(e=r.first().value,o=o.first().value,e>o?w.m(N(1,5)):e<o?w.m(N(-1,5)):w.m(N(0,5)))},{namespaceURI:\"http://www.w3.org/2005/xpath-functions\",localName:\"compare\",j:[{type:1,g:0},{type:1,g:0},{type:1,g:3}],i:{type:5,g:0},callFunction:bo},{namespaceURI:\"http://www.w3.org/2005/xpath-functions\",localName:\"concat\",j:[{type:46,g:0},{type:46,g:0},4],i:{type:1,g:3},callFunction:(e,t,n,...r)=>(r=r.map(o=>$e(o,t).M(a=>w.m(N(a.map(s=>s===null?\"\":Te(s,1).value).join(\"\"),1)))),ve(r,o=>w.m(N(o.map(a=>a.value).join(\"\"),1))))},{namespaceURI:\"http://www.w3.org/2005/xpath-functions\",localName:\"contains\",j:[{type:1,g:0},{type:1,g:0},{type:1,g:0}],i:{type:0,g:3},callFunction:bo},{namespaceURI:\"http://www.w3.org/2005/xpath-functions\",localName:\"contains\",j:[{type:1,g:0},{type:1,g:0}],i:{type:0,g:3},callFunction:(e,t,n,r,o)=>(e=r.isEmpty()?\"\":r.first().value,o=o.isEmpty()?\"\":o.first().value,o.length===0?w.$():e.length===0?w.S():e.includes(o)?w.$():w.S())},{namespaceURI:\"http://www.w3.org/2005/xpath-functions\",localName:\"ends-with\",j:[{type:1,g:0},{type:1,g:0}],i:{type:0,g:3},callFunction:(e,t,n,r,o)=>(e=o.isEmpty()?\"\":o.first().value,e.length===0?w.$():(r=r.isEmpty()?\"\":r.first().value,r.length===0?w.S():r.endsWith(e)?w.$():w.S()))},{namespaceURI:\"http://www.w3.org/2005/xpath-functions\",localName:\"ends-with\",j:[{type:1,g:0},{type:1,g:0},{type:1,g:3}],i:{type:0,g:3},callFunction:bo},{namespaceURI:\"http://www.w3.org/2005/xpath-functions\",localName:\"normalize-space\",j:[{type:1,g:0}],i:{type:1,g:3},callFunction:pi},{namespaceURI:\"http://www.w3.org/2005/xpath-functions\",localName:\"normalize-space\",j:[],i:{type:1,g:3},callFunction:vt(\"normalize-space\",1,(e,t,n,r)=>pi(e,t,n,Zr(e,t,n,r)))},{namespaceURI:\"http://www.w3.org/2005/xpath-functions\",localName:\"starts-with\",j:[{type:1,g:0},{type:1,g:0}],i:{type:0,g:3},callFunction:(e,t,n,r,o)=>(e=o.isEmpty()?\"\":o.first().value,e.length===0?w.$():(r=r.isEmpty()?\"\":r.first().value,r.length===0?w.S():r.startsWith(e)?w.$():w.S()))},{namespaceURI:\"http://www.w3.org/2005/xpath-functions\",localName:\"starts-with\",j:[{type:1,g:0},{type:1,g:0},{type:1,g:3}],i:{type:0,g:3},callFunction:bo},{namespaceURI:\"http://www.w3.org/2005/xpath-functions\",localName:\"string\",j:[{type:59,g:0}],i:{type:1,g:3},callFunction:Zr},{namespaceURI:\"http://www.w3.org/2005/xpath-functions\",localName:\"string\",j:[],i:{type:1,g:3},callFunction:vt(\"string\",59,Zr)},{namespaceURI:\"http://www.w3.org/2005/xpath-functions\",localName:\"substring-before\",j:[{type:1,g:0},{type:1,g:0}],i:{type:1,g:3},callFunction:(e,t,n,r,o)=>(e=r.isEmpty()?\"\":r.first().value,o=o.isEmpty()?\"\":o.first().value,o===\"\"?w.m(N(\"\",1)):(o=e.indexOf(o),o===-1?w.m(N(\"\",1)):w.m(N(e.substring(0,o),1))))},{namespaceURI:\"http://www.w3.org/2005/xpath-functions\",localName:\"substring-after\",j:[{type:1,g:0},{type:1,g:0}],i:{type:1,g:3},callFunction:(e,t,n,r,o)=>(e=r.isEmpty()?\"\":r.first().value,o=o.isEmpty()?\"\":o.first().value,o===\"\"?w.m(N(e,1)):(t=e.indexOf(o),t===-1?w.m(N(\"\",1)):w.m(N(e.substring(t+o.length),1))))},{namespaceURI:\"http://www.w3.org/2005/xpath-functions\",localName:\"substring\",j:[{type:1,g:0},{type:3,g:3}],i:{type:1,g:3},callFunction:Du},{namespaceURI:\"http://www.w3.org/2005/xpath-functions\",localName:\"substring\",j:[{type:1,g:0},{type:3,g:3},{type:3,g:3}],i:{type:1,g:3},callFunction:Du},{namespaceURI:\"http://www.w3.org/2005/xpath-functions\",localName:\"upper-case\",j:[{type:1,g:0}],i:{type:1,g:3},callFunction:(e,t,n,r)=>r.isEmpty()?w.m(N(\"\",1)):r.map(o=>N(o.value.toUpperCase(),1))},{namespaceURI:\"http://www.w3.org/2005/xpath-functions\",localName:\"lower-case\",j:[{type:1,g:0}],i:{type:1,g:3},callFunction:(e,t,n,r)=>r.isEmpty()?w.m(N(\"\",1)):r.map(o=>N(o.value.toLowerCase(),1))},{namespaceURI:\"http://www.w3.org/2005/xpath-functions\",localName:\"string-join\",j:[{type:46,g:2},{type:1,g:3}],i:{type:1,g:3},callFunction:Ou},{namespaceURI:\"http://www.w3.org/2005/xpath-functions\",localName:\"string-join\",j:[{type:46,g:2}],i:{type:1,g:3},callFunction(e,t,n,r){return Ou(e,t,n,r,w.m(N(\"\",1)))}},{namespaceURI:\"http://www.w3.org/2005/xpath-functions\",localName:\"string-length\",j:[{type:1,g:0}],i:{type:5,g:3},callFunction:Gu},{namespaceURI:\"http://www.w3.org/2005/xpath-functions\",localName:\"string-length\",j:[],i:{type:5,g:3},callFunction:vt(\"string-length\",46,(e,t,n,r)=>Gu(e,t,n,Zr(e,t,n,r)))},{namespaceURI:\"http://www.w3.org/2005/xpath-functions\",localName:\"tokenize\",j:[{type:1,g:0},{type:1,g:3},{type:1,g:3}],i:{type:1,g:2},callFunction(){throw Error(\"Not implemented: Using flags in tokenize is not supported\")}},{namespaceURI:\"http://www.w3.org/2005/xpath-functions\",localName:\"tokenize\",j:[{type:1,g:0},{type:1,g:3}],i:{type:1,g:2},callFunction:ku},{namespaceURI:\"http://www.w3.org/2005/xpath-functions\",localName:\"tokenize\",j:[{type:1,g:0}],i:{type:1,g:2},callFunction(e,t,n,r){return ku(e,t,n,pi(e,t,n,r),w.m(N(\" \",1)))}},{j:[{type:1,g:0},{type:1,g:3},{type:1,g:3}],callFunction:(e,t,n,r,o,a)=>ve([r,o,a],([s,l,p])=>{s=Array.from(s?s.value:\"\");let m=Array.from(l.value),T=Array.from(p.value);return l=s.map(R=>{if(m.includes(R)){if(R=m.indexOf(R),R<=T.length)return T[R]}else return R}),w.m(N(l.join(\"\"),1))}),localName:\"translate\",namespaceURI:\"http://www.w3.org/2005/xpath-functions\",i:{type:1,g:3}},{j:[{type:5,g:2}],callFunction:(e,t,n,r)=>r.M(o=>(o=o.map(a=>{if(a=a.value,a===9||a===10||a===13||32<=a&&55295>=a||57344<=a&&65533>=a||65536<=a&&1114111>=a)return String.fromCodePoint(a);throw Error(\"FOCH0001\")}).join(\"\"),w.m(N(o,1)))),localName:\"codepoints-to-string\",namespaceURI:\"http://www.w3.org/2005/xpath-functions\",i:{type:1,g:3}},{j:[{type:1,g:0}],callFunction:(e,t,n,r)=>ve([r],([o])=>(o=o?o.value.split(\"\"):[],o.length===0?w.empty():w.create(o.map(a=>N(a.codePointAt(0),5))))),localName:\"string-to-codepoints\",namespaceURI:\"http://www.w3.org/2005/xpath-functions\",i:{type:5,g:2}},{j:[{type:1,g:0}],callFunction:(e,t,n,r)=>ve([r],([o])=>o===null||o.value.length===0?w.create(N(\"\",1)):w.create(N(encodeURIComponent(o.value).replace(/[!'()*]/g,a=>\"%\"+a.charCodeAt(0).toString(16).toUpperCase()),1))),localName:\"encode-for-uri\",namespaceURI:\"http://www.w3.org/2005/xpath-functions\",i:{type:1,g:3}},{j:[{type:1,g:0}],callFunction:(e,t,n,r)=>ve([r],([o])=>o===null||o.value.length===0?w.create(N(\"\",1)):w.create(N(o.value.replace(/([\\u00A0-\\uD7FF\\uE000-\\uFDCF\\uFDF0-\\uFFEF \"<>{}|\\\\^`/\\n\\u007f\\u0080-\\u009f]|[\\uD800-\\uDBFF][\\uDC00-\\uDFFF])/g,a=>encodeURI(a)),1))),localName:\"iri-to-uri\",namespaceURI:\"http://www.w3.org/2005/xpath-functions\",i:{type:1,g:3}},{j:[{type:1,g:0},{type:1,g:0}],callFunction:(e,t,n,r,o)=>ve([r,o],([a,s])=>{if(a===null||s===null)return w.empty();a=a.value;var l=s.value;if(a.length!==l.length)return w.S();for(s=a.split(\"\"),a=l.split(\"\"),l=0;l<s.length;l++)if(s[l].codePointAt(0)!==a[l].codePointAt(0))return w.S();return w.$()}),localName:\"codepoint-equal\",namespaceURI:\"http://www.w3.org/2005/xpath-functions\",i:{type:0,g:0}},{j:[{type:1,g:0},{type:1,g:3}],callFunction:(e,t,n,r,o)=>ve([r,o],([a,s])=>{a=a?a.value:\"\",s=s.value;let l=Mu.get(s);if(!l){try{l=(0,Wf.compile)(s,{language:\"xpath\"})}catch(p){throw Error(`FORX0002: ${p}`)}Mu.set(s,l)}return l(a)?w.$():w.S()}),localName:\"matches\",namespaceURI:\"http://www.w3.org/2005/xpath-functions\",i:{type:0,g:3}},{j:[{type:1,g:0},{type:1,g:3},{type:1,g:3}],callFunction:(e,t,n,r,o,a)=>ve([r,o,a],([s,l,p])=>{if(s=s?s.value:\"\",l=l.value,p=p.value,p.includes(\"$0\"))throw Error(\"Using $0 in fn:replace to replace substrings with full matches is not supported.\");return p=p.split(/((?:\\$\\$)|(?:\\\\\\$)|(?:\\\\\\\\))/).map(m=>{switch(m){case\"\\\\$\":return\"$$\";case\"\\\\\\\\\":return\"\\\\\";case\"$$\":throw Error('FORX0004: invalid replacement: \"$$\"');default:return m}}).join(\"\"),l=Uu(l),s=s.replace(l,p),w.m(N(s,1))}),localName:\"replace\",namespaceURI:\"http://www.w3.org/2005/xpath-functions\",i:{type:1,g:3}},{j:[{type:1,g:0},{type:1,g:3},{type:1,g:3},{type:1,g:3}],localName:\"replace\",namespaceURI:\"http://www.w3.org/2005/xpath-functions\",i:{type:1,g:3},callFunction(){throw Error(\"Not implemented: Using flags in replace is not supported\")}}];let fi=new WeakMap,s0=0,On=(e,t,n,r)=>ve([r],([o])=>{if(o===null)return w.empty();switch(o=o.value,o.node.nodeType){case 1:case 2:return w.m(N(new tt(o.node.prefix,o.node.namespaceURI,o.node.localName),23));case 7:return w.m(N(new tt(\"\",\"\",o.node.target),23));default:return w.empty()}}),Pu=(e,t,n,r)=>r.X({default:()=>Zr(e,t,n,On(e,t,n,r)),empty:()=>w.m(N(\"\",1))}),Hu=(e,t,n,r)=>$e(r,t),Xu=(e,t,n,r)=>{if(r.isEmpty())return w.m(N(\"\",1));if(!B(r.first().type,53))throw Error(\"XPTY0004: The context item must be a node.\");return n=r.first().value,e=w,t=e.m,n=n.node,fi.has(n)||fi.set(n,`id${++s0}`),n=fi.get(n),t.call(e,N(n,1))},ju=(e,t,n,r)=>ve([r],([o])=>(o=o?o.value:null,o!==null&&Oo(t.h,o,null)?w.$():w.S()));function $u(e,t){return e=e.toLowerCase(),t=t.toLowerCase(),e===t?!0:5>e.length||!e.startsWith(t)?!1:$u(e.replace(/-[a-z0-9]+$/,\"\"),t)}let bu=(e,t,n,r,o)=>{if(t=t.h,r.isEmpty())r=\"\";else if(B(r.first().type,1))r=r.first().value;else throw Error(\"XPTY0004: The first argument of lang must be a string.\");if(o)o=o.first().value;else{if(!e||!e.L)throw Ft(\"The function lang depends on dynamic context if a node is not passed as the second argument.\");if(!B(e.L.type,53))throw Error(\"XPTY0004: The context item must be a node.\");o=e.L.value}e:{for(e=r;o;)if(o.node.nodeType!==1)o=we(t,o);else if(o.node.nodeType===1){if(r=Qa(t,o,\"xml:lang\")){t=$u(r,e)?w.$():w.S();break e}o=we(t,o)}t=w.S()}return t},Lu=(e,t,n,r)=>ve([r],([o])=>{function a(m){let T=0,R=m;for(;R!==null;)m.node.nodeType===R.node.nodeType&&(R.node.nodeType===1?R.node.localName===m.node.localName&&R.node.namespaceURI===m.node.namespaceURI:R.node.nodeType!==7||R.node.target===m.node.target)&&T++,R=Yr(s,R,null);return T}if(o===null)return w.empty();let s=t.h,l=\"\";for(o=o.value;we(t.h,o,null)!==null;o=we(t.h,o,null))switch(o.node.nodeType){case 1:var p=o;l=`/Q{${p.node.namespaceURI||\"\"}}${p.node.localName}[${a(p)}]${l}`;break;case 2:p=o,l=`/@${p.node.namespaceURI?`Q{${p.node.namespaceURI}}`:\"\"}${p.node.localName}${l}`;break;case 3:l=`/text()[${a(o)}]${l}`;break;case 7:p=o,l=`/processing-instruction(${p.node.target})[${a(p)}]${l}`;break;case 8:l=`/comment()[${a(o)}]${l}`}return o.node.nodeType===9?w.create(N(l||\"/\",1)):w.create(N(\"Q{http://www.w3.org/2005/xpath-functions}root()\"+l,1))}),qu=(e,t,n,r)=>r.map(o=>N(o.value.node.namespaceURI||\"\",20)),Yu=(e,t,n,r)=>r.X({default:()=>r.map(o=>o.value.node.nodeType===7?N(o.value.node.target,1):N(o.value.node.localName||\"\",1)),empty:()=>w.m(N(\"\",1))});function Qu(e,t,n){if(t.node.nodeType===2)return Ye(t,n);for(;n;){if(Ye(t,n))return!0;if(n.node.nodeType===9)break;n=we(e,n,null)}return!1}let _u=(e,t,n,r)=>r.map(o=>{if(!B(o.type,53))throw Error(\"XPTY0004 Argument passed to fn:root() should be of the type node()\");let a;for(o=o.value;o;)a=o,o=we(t.h,a,null);return Ce(a)});var u0=[{j:[{type:53,g:0}],callFunction:Pu,localName:\"name\",namespaceURI:\"http://www.w3.org/2005/xpath-functions\",i:{type:1,g:3}},{j:[],callFunction:vt(\"name\",53,Pu),localName:\"name\",namespaceURI:\"http://www.w3.org/2005/xpath-functions\",i:{type:1,g:3}},{j:[{type:53,g:3}],callFunction:qu,localName:\"namespace-uri\",namespaceURI:\"http://www.w3.org/2005/xpath-functions\",i:{type:20,g:3}},{j:[],callFunction:vt(\"namespace-uri\",53,qu),localName:\"namespace-uri\",namespaceURI:\"http://www.w3.org/2005/xpath-functions\",i:{type:20,g:3}},{j:[{type:53,g:2}],callFunction:(e,t,n,r)=>r.M(o=>o.length?(o=Wr(t.h,o).reduceRight((a,s,l,p)=>l===p.length-1?(a.push(s),a):(Qu(t.h,s.value,a[0].value)||a.unshift(s),a),[]),w.create(o)):w.empty()),localName:\"innermost\",namespaceURI:\"http://www.w3.org/2005/xpath-functions\",i:{type:53,g:2}},{j:[{type:53,g:2}],callFunction:(e,t,n,r)=>r.M(o=>o.length?(o=Wr(t.h,o).reduce((a,s,l)=>l===0?(a.push(s),a):(Qu(t.h,a[a.length-1].value,s.value)||a.push(s),a),[]),w.create(o)):w.empty(),1),localName:\"outermost\",namespaceURI:\"http://www.w3.org/2005/xpath-functions\",i:{type:53,g:2}},{j:[{type:53,g:0}],callFunction:ju,localName:\"has-children\",namespaceURI:\"http://www.w3.org/2005/xpath-functions\",i:{type:0,g:3}},{j:[],callFunction:vt(\"has-children\",53,ju),localName:\"has-children\",namespaceURI:\"http://www.w3.org/2005/xpath-functions\",i:{type:0,g:3}},{j:[{type:53,g:0}],callFunction:Lu,localName:\"path\",namespaceURI:\"http://www.w3.org/2005/xpath-functions\",i:{type:1,g:0}},{j:[],callFunction:vt(\"path\",53,Lu),localName:\"path\",namespaceURI:\"http://www.w3.org/2005/xpath-functions\",i:{type:1,g:0}},{j:[{type:53,g:0}],callFunction:On,localName:\"node-name\",namespaceURI:\"http://www.w3.org/2005/xpath-functions\",i:{type:23,g:0}},{j:[],callFunction:vt(\"node-name\",53,On),localName:\"node-name\",namespaceURI:\"http://www.w3.org/2005/xpath-functions\",i:{type:23,g:0}},{j:[{type:53,g:0}],callFunction:Yu,localName:\"local-name\",namespaceURI:\"http://www.w3.org/2005/xpath-functions\",i:{type:1,g:3}},{j:[],callFunction:vt(\"local-name\",53,Yu),localName:\"local-name\",namespaceURI:\"http://www.w3.org/2005/xpath-functions\",i:{type:1,g:3}},{j:[{type:53,g:0}],callFunction:_u,localName:\"root\",namespaceURI:\"http://www.w3.org/2005/xpath-functions\",i:{type:53,g:0}},{j:[],callFunction:vt(\"root\",53,_u),localName:\"root\",namespaceURI:\"http://www.w3.org/2005/xpath-functions\",i:{type:53,g:0}},{j:[],callFunction:vt(\"data\",59,Hu),localName:\"data\",namespaceURI:\"http://www.w3.org/2005/xpath-functions\",i:{type:46,g:2}},{j:[{type:59,g:2}],callFunction:Hu,localName:\"data\",namespaceURI:\"http://www.w3.org/2005/xpath-functions\",i:{type:46,g:2}},{j:[{type:1,g:0}],callFunction:bu,localName:\"lang\",namespaceURI:\"http://www.w3.org/2005/xpath-functions\",i:{type:0,g:3}},{j:[{type:1,g:0},{type:53,g:3}],callFunction:bu,localName:\"lang\",namespaceURI:\"http://www.w3.org/2005/xpath-functions\",i:{type:0,g:3}},{j:[],callFunction:vt(\"generate-id\",53,Xu),localName:\"generate-id\",namespaceURI:\"http://www.w3.org/2005/xpath-functions\",i:{type:1,g:3}},{j:[{type:53,g:0}],callFunction:Xu,localName:\"generate-id\",namespaceURI:\"http://www.w3.org/2005/xpath-functions\",i:{type:1,g:3}}];function Vu(e,t){let n=0,r=e.length,o=!1,a=null;return{next:()=>{if(!o){for(;n<r;){a||(a=t(e[n],n,e));let s=a.next(0);if(a=null,s.value)n++;else return Q(!1)}return o=!0,Q(!0)}return W}}}function Ju(e){return e=e.node.nodeType,e===1||e===3}function eo(e,t){if((B(e.type,4)||B(e.type,6))&&(B(t.type,4)||B(t.type,6))){var n=Te(e,6),r=Te(t,6);return n.value===r.value||isNaN(e.value)&&isNaN(t.value)}return(B(e.type,4)||B(e.type,6)||B(e.type,3))&&(B(t.type,4)||B(t.type,6)||B(t.type,3))?(n=Te(e,3),r=Te(t,3),n.value===r.value||isNaN(e.value)&&isNaN(t.value)):B(e.type,23)&&B(t.type,23)?e.value.namespaceURI===t.value.namespaceURI&&e.value.localName===t.value.localName:(B(e.type,9)||B(e.type,7)||B(e.type,8)||B(e.type,11)||B(e.type,12)||B(e.type,13)||B(e.type,14)||B(e.type,15))&&(B(t.type,9)||B(t.type,7)||B(t.type,8)||B(t.type,11)||B(t.type,12)||B(t.type,13)||B(t.type,14)||B(t.type,15))?Sn(e.value,t.value):(B(e.type,16)||B(e.type,17)||B(e.type,18))&&(B(t.type,16)||B(t.type,17)||B(t.type,17))?e.value.equals(t.value):e.value===t.value}function l0(e,t,n){let[r,o]=[t,n].map(a=>({type:1,value:a.reduce((s,l)=>s+=en(l,e).first().value,\"\")}));return Q(eo(r,o))}function Ku(e,t,n,r){for(;e.value&&B(e.value.type,56);){t.push(e.value);let o=ln(r,e.value.value);if(e=n.next(0),o&&o.node.nodeType!==3)break}return e}function hn(e,t,n,r,o){let a=t.h,s=r.value,l=o.value,p=null,m=null,T=null,R,X=[],P=[];return{next:()=>{for(;!R;)if(p||(p=s.next(0)),p=Ku(p,X,s,a),m||(m=l.next(0)),m=Ku(m,P,l,a),X.length||P.length){var V=l0(t,X,P);if(X.length=0,P.length=0,V.value===!1)return R=!0,V}else{if(p.done||m.done)return R=!0,Q(p.done===m.done);if(T||(T=di(e,t,n,p.value,m.value)),V=T.next(0),T=null,V.value===!1)return R=!0,V;m=p=null}return W}}}function c0(e,t,n,r,o){return r.h.length!==o.h.length?tn(!1):Vu(r.h,a=>{let s=o.h.find(l=>eo(l.key,a.key));return s?hn(e,t,n,a.value(),s.value()):tn(!1)})}function p0(e,t,n,r,o){return r.members.length!==o.members.length?tn(!1):Vu(r.members,(a,s)=>(s=o.members[s],hn(e,t,n,a(),s())))}function zu(e,t,n,r,o){return r=kt(t.h,r.value),o=kt(t.h,o.value),r=r.filter(a=>Ju(a)),o=o.filter(a=>Ju(a)),r=w.create(r.map(a=>Ce(a))),o=w.create(o.map(a=>Ce(a))),hn(e,t,n,r,o)}function h0(e,t,n,r,o){let a=hn(e,t,n,On(e,t,n,w.m(r)),On(e,t,n,w.m(o))),s=zu(e,t,n,r,o);r=or(t.h,r.value).filter(m=>m.node.namespaceURI!==\"http://www.w3.org/2000/xmlns/\").sort((m,T)=>m.node.nodeName>T.node.nodeName?1:-1).map(m=>Ce(m)),o=or(t.h,o.value).filter(m=>m.node.namespaceURI!==\"http://www.w3.org/2000/xmlns/\").sort((m,T)=>m.node.nodeName>T.node.nodeName?1:-1).map(m=>Ce(m));let l=hn(e,t,n,w.create(r),w.create(o)),p=!1;return{next:()=>{if(p)return W;var m=a.next(0);return!m.done&&m.value===!1||(m=l.next(0),!m.done&&m.value===!1)?(p=!0,m):(m=s.next(0),p=!0,m)}}}function f0(e,t,n,r,o){let a=hn(e,t,n,On(e,t,n,w.m(r)),On(e,t,n,w.m(o))),s=!1;return{next:()=>{if(s)return W;let l=a.next(0);return l.done||l.value!==!1?Q(eo(en(r,t).first(),en(o,t).first())):(s=!0,l)}}}function di(e,t,n,r,o){if(B(r.type,46)&&B(o.type,46))return tn(eo(r,o));if(B(r.type,61)&&B(o.type,61))return c0(e,t,n,r,o);if(B(r.type,62)&&B(o.type,62))return p0(e,t,n,r,o);if(B(r.type,53)&&B(o.type,53)){if(B(r.type,55)&&B(o.type,55))return zu(e,t,n,r,o);if(B(r.type,54)&&B(o.type,54))return h0(e,t,n,r,o);if(B(r.type,47)&&B(o.type,47)||B(r.type,57)&&B(o.type,57)||B(r.type,58)&&B(o.type,58))return f0(e,t,n,r,o)}return tn(!1)}var d0=class extends ir{constructor(){super({L:null,Ba:-1,sa:w.empty(),qa:{}})}},nn=(e=\"Can not execute an updating expression in a non-updating context.\")=>Error(`XUST0001: ${e}`),m0=e=>Error(`XUTY0004: The attribute ${e.name}=\"${e.value}\" follows a node that is not an attribute node.`),Wu=()=>Error(\"XUTY0005: The target of a insert expression with into must be a single element or document node.\"),Zu=()=>Error(\"XUTY0006: The target of a insert expression with before or after must be a single element, text, comment, or processing instruction node.\"),Lo=()=>Error(\"XUTY0008: The target of a replace expression must be a single element, attribute, text, comment, or processing instruction node.\"),el=()=>Error(\"XUTY0012: The target of a rename expression must be a single element, attribute, or processing instruction node.\"),tl=e=>Error(`XUDY0017: The target ${e.outerHTML} is used in more than one replace value of expression.`),nl=e=>Error(`XUDY0021: Applying the updates will result in the XDM instance violating constraint: '${e}'`),qo=e=>Error(`XUDY0023: The namespace binding ${e} is conflicting.`),Yo=e=>Error(`XUDY0024: The namespace binding ${e} is conflicting.`),Qo=()=>Error(\"XUDY0027: The target for an insert, replace, or rename expression expression should not be empty.\");function oe(e,t,n){return t&&t.L!==null&&e.B?(e.ob===null&&(e.ob=je(e.h(new d0,n).hb())),e=e.ob()):e=e.h(t,n),e}var he=class{constructor(e,t,n={B:!1,V:!1,P:\"unsorted\",subtree:!1},r=!1,o){this.o=e,this.ha=n.P||\"unsorted\",this.subtree=!!n.subtree,this.V=!!n.V,this.B=!!n.B,this.Ga=t,this.H=!1,this.ob=null,this.Sb=r,this.type=o}D(){return null}v(e){if(this.Ga.forEach(t=>t.v(e)),!this.Sb&&this.Ga.some(t=>t.H))throw nn()}},rl=class{constructor(e,t){this.I=e,this.ca=t}},ol=class{constructor(e){e&&typeof e==\"object\"&&\"nodeType\"in e&&(e=e.ownerDocument||e,typeof e.createElementNS==\"function\"&&typeof e.createProcessingInstruction==\"function\"&&typeof e.createTextNode==\"function\"&&typeof e.createComment==\"function\"&&(this.h=e)),this.h||(this.h=null)}createAttributeNS(e,t){if(!this.h)throw Error(\"Please pass a node factory if an XQuery script uses node constructors\");return this.h.createAttributeNS(e,t)}createCDATASection(e){if(!this.h)throw Error(\"Please pass a node factory if an XQuery script uses node constructors\");return this.h.createCDATASection(e)}createComment(e){if(!this.h)throw Error(\"Please pass a node factory if an XQuery script uses node constructors\");return this.h.createComment(e)}createDocument(){if(!this.h)throw Error(\"Please pass a node factory if an XQuery script uses node constructors\");return this.h.implementation.createDocument(null,null,null)}createElementNS(e,t){if(!this.h)throw Error(\"Please pass a node factory if an XQuery script uses node constructors\");return this.h.createElementNS(e,t)}createProcessingInstruction(e,t){if(!this.h)throw Error(\"Please pass a node factory if an XQuery script uses node constructors\");return this.h.createProcessingInstruction(e,t)}createTextNode(e){if(!this.h)throw Error(\"Please pass a node factory if an XQuery script uses node constructors\");return this.h.createTextNode(e)}};function al(e,t,n,r){return or(r,e,`name-${t}`).some(o=>o.node.localName===t&&o.node.namespaceURI===n)}var g0=(e,t,n,r)=>{let o=we(n,e).node,a=(e=ln(n,e))?e.node:null;t.forEach(s=>{r.insertBefore(o,s.node,a)})},y0=(e,t,n,r)=>{let o=we(n,e).node;t.forEach(a=>{r.insertBefore(o,a.node,e.node)})},w0=(e,t,n,r)=>{let o=(n=Oo(n,e))?n.node:null;t.forEach(a=>{r.insertBefore(e.node,a.node,o)})},il=(e,t,n)=>{t.forEach(r=>{n.insertBefore(e.node,r.node,null)})},A0=(e,t,n,r)=>{t.forEach(o=>{let a=o.node.localName,s=o.node.namespaceURI;if(al(e,a,s,n))throw nl(`An attribute ${s?`Q{${s}}${a}`:a} already exists.`);r.setAttributeNS(e.node,s,a,Je(n,o))})},v0=(e,t,n,r,o)=>{r||(r=new ol(e?e.node:null));let a;switch(e.node.nodeType){case 1:let s=n.getAllAttributes(e.node),l=n.getChildNodes(e.node),p=r.createElementNS(t.namespaceURI,t.Aa());a={node:p,F:null},s.forEach(m=>{o.setAttributeNS(p,m.namespaceURI,m.nodeName,m.value)}),l.forEach(m=>{o.insertBefore(p,m,null)});break;case 2:t=r.createAttributeNS(t.namespaceURI,t.Aa()),t.value=Je(n,e),a={node:t,F:null};break;case 7:a={node:r.createProcessingInstruction(t.Aa(),Je(n,e)),F:null}}if(!we(n,e))throw Error(\"Not supported: renaming detached nodes.\");sl(e,[a],n,o)},x0=(e,t,n,r)=>{n.getChildNodes(e.node).forEach(o=>r.removeChild(e.node,o)),t&&r.insertBefore(e.node,t.node,null)},sl=(e,t,n,r)=>{let o=we(n,e);var a=e.node.nodeType;if(a===2){if(t.some(l=>l.node.nodeType!==2))throw Error('Constraint \"If $target is an attribute node, $replacement must consist of zero or more attribute nodes.\" failed.');let s=o?o.node:null;r.removeAttributeNS(s,e.node.namespaceURI,e.node.localName),t.forEach(l=>{let p=l.node.localName,m=l.node.namespaceURI;if(al(o,p,m,n))throw nl(`An attribute ${m?`Q{${m}}${p}`:p} already exists.`);r.setAttributeNS(s,m,p,Je(n,l))})}if(a===1||a===3||a===8||a===7){let s=(a=ln(n,e))?a.node:null;r.removeChild(o.node,e.node),t.forEach(l=>{r.insertBefore(o.node,l.node,s)})}},ul=(e,t,n,r)=>{if(N0(e,t),e.filter(o=>[\"insertInto\",\"insertAttributes\",\"replaceValue\",\"rename\"].indexOf(o.type)!==-1).forEach(o=>{switch(o.type){case\"insertInto\":il(o.target,o.content,r);break;case\"insertAttributes\":A0(o.target,o.content,t,r);break;case\"rename\":v0(o.target,o.o,t,n,r);break;case\"replaceValue\":var a=o.target;if(o=o.o,a.node.nodeType===2){let s=we(t,a);s?r.setAttributeNS(s.node,a.node.namespaceURI,a.node.localName,o):a.node.value=o}else r.setData(a.node,o)}}),e.filter(o=>[\"insertBefore\",\"insertAfter\",\"insertIntoAsFirst\",\"insertIntoAsLast\"].indexOf(o.type)!==-1).forEach(o=>{switch(o.type){case\"insertAfter\":g0(o.target,o.content,t,r);break;case\"insertBefore\":y0(o.target,o.content,t,r);break;case\"insertIntoAsFirst\":w0(o.target,o.content,t,r);break;case\"insertIntoAsLast\":il(o.target,o.content,r)}}),e.filter(o=>o.type===\"replaceNode\").forEach(o=>{sl(o.target,o.o,t,r)}),e.filter(o=>o.type===\"replaceElementContent\").forEach(o=>{x0(o.target,o.text,t,r)}),e.filter(o=>o.type===\"delete\").forEach(o=>{o=o.target;var a=we(t,o);(a=a?a.node:null)&&(o.node.nodeType===2?r.removeAttributeNS(a,o.node.namespaceURI,o.node.localName):r.removeChild(a,o.node))}),e.some(o=>o.type===\"put\"))throw Error('Not implemented: the execution for pendingUpdate \"put\" is not yet implemented.')};let N0=(e,t)=>{function n(a,s){let l=new Set;e.filter(p=>p.type===a).map(p=>p.target).forEach(p=>{p=p?p.node:null,l.has(p)&&s(p),l.add(p)})}n(\"rename\",a=>{throw Error(`XUDY0015: The target ${a.outerHTML} is used in more than one rename expression.`)}),n(\"replaceNode\",a=>{throw Error(`XUDY0016: The target ${a.outerHTML} is used in more than one replace expression.`)}),n(\"replaceValue\",a=>{throw tl(a)}),n(\"replaceElementContent\",a=>{throw tl(a)});let r=new Map,o=a=>new tt(a.node.prefix,a.node.namespaceURI,a.node.localName);e.filter(a=>a.type===\"replaceNode\"&&a.target.node.nodeType===2).forEach(a=>{var s=we(t,a.target);s=s?s.node:null;let l=r.get(s);l?l.push(...a.o.map(o)):r.set(s,a.o.map(o))}),e.filter(a=>a.type===\"rename\"&&a.target.node.nodeType===2).forEach(a=>{var s=we(t,a.target);if(s){s=s.node;var l=r.get(s);l?l.push(a.o):r.set(s,[a.o])}}),r.forEach(a=>{let s={};a.forEach(l=>{if(s[l.prefix]||(s[l.prefix]=l.namespaceURI),s[l.prefix]!==l.namespaceURI)throw Yo(l.namespaceURI)})})};var St=(e,...t)=>e.concat(...t.filter(Boolean));function jt(e){return e.H?(t,n)=>e.s(t,n):(t,n)=>{let r=e.h(t,n);return{next:()=>{let o=r.N();return Q({ca:[],I:o})}}}}var cr=class extends he{constructor(e,t,n,r){super(e,t,n,!0,r),this.H=!0}h(){throw nn()}};function pr(e,t){return e=e.next(0),t(e.value.ca),w.create(e.value.I)}function B0(e){e.Ga.some(t=>t.H)&&(e.H=!0)}var Gn=class extends cr{constructor(e,t,n,r){super(e,t,n,r),this.H=this.Ga.some(o=>o.H)}h(e,t){return this.A(e,t,this.Ga.map(n=>r=>n.h(r,t)))}s(e,t){let n=[],r=this.A(e,t,this.Ga.map(a=>a.H?s=>(s=a.s(s,t),pr(s,l=>n=St(n,l))):s=>a.h(s,t))),o=!1;return{next:()=>{if(o)return W;let a=r.N();return o=!0,Q(new rl(a,n))}}}v(e){super.v(e),B0(this)}};let _o=[\"external\",\"attribute\",\"nodeName\",\"nodeType\",\"universal\"],E0=_o.length;function hr(e,t){for(let n=0;n<E0;++n){if(t.h[n]<e.h[n])return 1;if(t.h[n]>e.h[n])return-1}return 0}var Ae=class{constructor(e){if(this.h=_o.map(t=>e[t]||0),Object.keys(e).some(t=>!_o.includes(t)))throw Error(\"Invalid specificity kind passed\")}add(e){let t=_o.reduce((n,r,o)=>(n[r]=this.h[o]+e.h[o],n),Object.create(null));return new Ae(t)}};let mi=()=>At(\"Expected base expression of a function call to evaluate to a sequence of single function item\");function fr(e,t,n,r){let o=[];for(let a=0;a<t.length;++a){if(t[a]===null){o.push(null);continue}let s=Pt(e[a],t[a],n,r,!1);o.push(s)}return o}function ll(e,t){if(!B(e.type,60))throw At(\"Expected base expression to evaluate to a function item\");if(e.v!==t)throw mi();return e}function gi(e,t,n,r,o,a,s){let l=0;return o=o.map(p=>p?null:a[l++](n)),o=fr(e.o,o,r,e.D),0<=o.indexOf(null)?wf(e,o):(t=t.apply(void 0,[n,r,s,...o]),Pt(e.s,t,r,e.D,!0))}var to=class extends Gn{constructor(e,t,n){super(new Ae({external:1}),[e].concat(t.filter(r=>!!r)),{P:\"unsorted\",V:!1,subtree:!1,B:!1},n),this.la=t.length,this.O=t.map(r=>r===null),this.K=null,this.ya=e,this.Ma=t}s(e,t){if(!this.l||!this.l.H)return super.s(e,t);let n=[],r=gi(this.l,(a,s,l,...p)=>pr(this.l.value(a,s,l,...p),m=>{n=St(n,m)}),e,t,this.O,this.Ma.map(a=>()=>a.H?pr(a.s(e,t),s=>{n=St(n,s)}):oe(a,e,t)),this.K),o=!1;return{next:()=>{if(o)return W;let a=r.N();return o=!0,Q({ca:n,I:a})}}}A(e,t,[n,...r]){if(this.l)return gi(this.l,(a,s,l,...p)=>this.l.value(a,s,l,...p),e,t,this.O,r,this.K);let o=n(e);return o.X({default:()=>{throw mi()},m:()=>o.M(([a])=>{if(a=ll(a,this.la),a.H)throw Error(\"XUDY0038: The function returned by the PrimaryExpr of a dynamic function invocation can not be an updating function\");return gi(a,a.value,e,t,this.O,r,this.K)})})}v(e){if(this.K=Ko(e),super.v(e),this.ya.B){if(e=oe(this.ya,null,null),!e.oa())throw mi();this.l=ll(e.first(),this.la),this.l.H&&(this.H=!0)}}};let cl=(e,t,n,r,o,a)=>ve([r,o,a],([s,l,p])=>{if(l=l.value,p=p.value,l>s.members.length||0>=l)throw Error(\"FOAY0001: subarray start out of bounds.\");if(0>p)throw Error(\"FOAY0002: subarray length out of bounds.\");if(l+p>s.members.length+1)throw Error(\"FOAY0001: subarray start + length out of bounds.\");return w.m(new rt(s.members.slice(l-1,p+l-1)))}),pl=(e,t,n,r,o)=>ve([r],([a])=>o.M(s=>{s=s.map(p=>p.value).sort((p,m)=>m-p).filter((p,m,T)=>T[m-1]!==p);let l=a.members.concat();for(let p=0,m=s.length;p<m;++p){let T=s[p];if(T>a.members.length||0>=T)throw Error(\"FOAY0001: subarray position out of bounds.\");l.splice(T-1,1)}return w.m(new rt(l))})),hl=e=>B(e,1)||B(e,20)||B(e,19),fl=(e,t,n,r,o)=>r.length===0?o.length!==0:o.length!==0&&di(e,t,n,r[0],o[0]).next(0).value?fl(e,t,n,r.slice(1),o.slice(1)):r[0].value!==r[0].value?!0:hl(r[0].type)&&o.length!==0&&hl(o[0].type)?r[0].value<o[0].value:o.length===0?!1:r[0].value<o[0].value,I0=(e,t,n,r)=>(r.sort((o,a)=>hn(e,t,n,w.create(o),w.create(a)).next(0).value?0:fl(e,t,n,o,a)?-1:1),w.m(new rt(r.map(o=>()=>w.create(o)))));function dl(e){return B(e.type,62)?Ct(e.members.map(t=>t().M(n=>Ct(n.map(dl))))):w.m(e)}var T0=[{namespaceURI:\"http://www.w3.org/2005/xpath-functions/array\",localName:\"size\",j:[{type:62,g:3}],i:{type:5,g:3},callFunction:(e,t,n,r)=>ve([r],([o])=>w.m(N(o.members.length,5)))},{namespaceURI:\"http://www.w3.org/2005/xpath-functions/array\",localName:\"get\",j:[{type:62,g:3},{type:5,g:3}],i:{type:59,g:2},callFunction:_a},{namespaceURI:\"http://www.w3.org/2005/xpath-functions/array\",localName:\"put\",j:[{type:62,g:3},{type:5,g:3},{type:59,g:2}],i:{type:62,g:3},callFunction:(e,t,n,r,o,a)=>ve([o,r],([s,l])=>{if(s=s.value,0>=s||s>l.members.length)throw Error(\"FOAY0001: array position out of bounds.\");return l=l.members.concat(),l.splice(s-1,1,je(a)),w.m(new rt(l))})},{namespaceURI:\"http://www.w3.org/2005/xpath-functions/array\",localName:\"append\",j:[{type:62,g:3},{type:59,g:2}],i:{type:62,g:3},callFunction:(e,t,n,r,o)=>ve([r],([a])=>w.m(new rt(a.members.concat([je(o)]))))},{namespaceURI:\"http://www.w3.org/2005/xpath-functions/array\",localName:\"subarray\",j:[{type:62,g:3},{type:5,g:3},{type:5,g:3}],i:{type:62,g:3},callFunction:cl},{namespaceURI:\"http://www.w3.org/2005/xpath-functions/array\",localName:\"subarray\",j:[{type:62,g:3},{type:5,g:3}],i:{type:62,g:3},callFunction(e,t,n,r,o){let a=w.m(N(r.first().value.length-o.first().value+1,5));return cl(e,t,n,r,o,a)}},{namespaceURI:\"http://www.w3.org/2005/xpath-functions/array\",localName:\"remove\",j:[{type:62,g:3},{type:5,g:2}],i:{type:62,g:3},callFunction:pl},{namespaceURI:\"http://www.w3.org/2005/xpath-functions/array\",localName:\"insert-before\",j:[{type:62,g:3},{type:5,g:3},{type:59,g:2}],i:{type:62,g:3},callFunction:(e,t,n,r,o,a)=>ve([r,o],([s,l])=>{if(l=l.value,l>s.members.length+1||0>=l)throw Error(\"FOAY0001: subarray position out of bounds.\");return s=s.members.concat(),s.splice(l-1,0,je(a)),w.m(new rt(s))})},{namespaceURI:\"http://www.w3.org/2005/xpath-functions/array\",localName:\"head\",j:[{type:62,g:3}],i:{type:59,g:2},callFunction(e,t,n,r){return _a(e,t,n,r,w.m(N(1,5)))}},{namespaceURI:\"http://www.w3.org/2005/xpath-functions/array\",localName:\"tail\",j:[{type:62,g:3}],i:{type:59,g:2},callFunction(e,t,n,r){return pl(e,t,n,r,w.m(N(1,5)))}},{namespaceURI:\"http://www.w3.org/2005/xpath-functions/array\",localName:\"reverse\",j:[{type:62,g:3}],i:{type:62,g:3},callFunction:(e,t,n,r)=>ve([r],([o])=>w.m(new rt(o.members.concat().reverse())))},{namespaceURI:\"http://www.w3.org/2005/xpath-functions/array\",localName:\"join\",j:[{type:62,g:2}],i:{type:62,g:3},callFunction:(e,t,n,r)=>r.M(o=>(o=o.reduce((a,s)=>a.concat(s.members),[]),w.m(new rt(o))))},{namespaceURI:\"http://www.w3.org/2005/xpath-functions/array\",localName:\"for-each\",j:[{type:62,g:3},{type:60,g:3}],i:{type:62,g:3},callFunction:(e,t,n,r,o)=>ve([r,o],([a,s])=>{if(s.v!==1)throw At(\"The callback passed into array:for-each has a wrong arity.\");return a=a.members.map(l=>je(s.value.call(void 0,e,t,n,fr(s.o,[l()],t,\"array:for-each\")[0]))),w.m(new rt(a))})},{namespaceURI:\"http://www.w3.org/2005/xpath-functions/array\",localName:\"filter\",j:[{type:62,g:3},{type:60,g:3}],i:{type:62,g:3},callFunction:(e,t,n,r,o)=>ve([r,o],([a,s])=>{if(s.v!==1)throw At(\"The callback passed into array:filter has a wrong arity.\");let l=a.members.map(T=>{T=fr(s.o,[T()],t,\"array:filter\")[0];let R=s.value;return R(e,t,n,T)}),p=[],m=!1;return w.create({next:()=>{if(m)return W;for(let R=0,X=a.members.length;R<X;++R){var T=l[R].ea();p[R]=T}return T=a.members.filter((R,X)=>p[X]),m=!0,Q(new rt(T))}})})},{namespaceURI:\"http://www.w3.org/2005/xpath-functions/array\",localName:\"fold-left\",j:[{type:62,g:3},{type:59,g:2},{type:60,g:3}],i:{type:59,g:2},callFunction:(e,t,n,r,o,a)=>ve([r,a],([s,l])=>{if(l.v!==2)throw At(\"The callback passed into array:fold-left has a wrong arity.\");return s.members.reduce((p,m)=>(m=fr(l.o,[m()],t,\"array:fold-left\")[0],l.value.call(void 0,e,t,n,p,m)),o)})},{namespaceURI:\"http://www.w3.org/2005/xpath-functions/array\",localName:\"fold-right\",j:[{type:62,g:3},{type:59,g:2},{type:60,g:3}],i:{type:59,g:2},callFunction:(e,t,n,r,o,a)=>ve([r,a],([s,l])=>{if(l.v!==2)throw At(\"The callback passed into array:fold-right has a wrong arity.\");return s.members.reduceRight((p,m)=>(m=fr(l.o,[m()],t,\"array:fold-right\")[0],l.value.call(void 0,e,t,n,p,m)),o)})},{namespaceURI:\"http://www.w3.org/2005/xpath-functions/array\",localName:\"for-each-pair\",j:[{type:62,g:3},{type:62,g:3},{type:60,g:3}],i:{type:62,g:3},callFunction:(e,t,n,r,o,a)=>ve([r,o,a],([s,l,p])=>{if(p.v!==2)throw At(\"The callback passed into array:for-each-pair has a wrong arity.\");let m=[];for(let T=0,R=Math.min(s.members.length,l.members.length);T<R;++T){let[X,P]=fr(p.o,[s.members[T](),l.members[T]()],t,\"array:for-each-pair\");m[T]=je(p.value.call(void 0,e,t,n,X,P))}return w.m(new rt(m))})},{namespaceURI:\"http://www.w3.org/2005/xpath-functions/array\",localName:\"sort\",j:[{type:62,g:3}],i:{type:62,g:3},callFunction:(e,t,n,r)=>ve([r],([o])=>(o=o.members.map(a=>a().N()),I0(e,t,n,o)))},{namespaceURI:\"http://www.w3.org/2005/xpath-functions/array\",localName:\"flatten\",j:[{type:59,g:2}],i:{type:59,g:2},callFunction:(e,t,n,r)=>r.M(o=>Ct(o.map(dl)))}];function ce(e,t,n,r,o){return o.isEmpty()?o:w.m(Te(o.first(),e))}var C0=[{namespaceURI:\"http://www.w3.org/2001/XMLSchema\",localName:\"untypedAtomic\",j:[{type:46,g:0}],i:{type:19,g:0},callFunction:ce.bind(null,19)},{namespaceURI:\"http://www.w3.org/2001/XMLSchema\",localName:\"error\",j:[{type:46,g:0}],i:{type:39,g:0},callFunction:ce.bind(null,39)},{namespaceURI:\"http://www.w3.org/2001/XMLSchema\",localName:\"string\",j:[{type:46,g:0}],i:{type:1,g:0},callFunction:ce.bind(null,1)},{namespaceURI:\"http://www.w3.org/2001/XMLSchema\",localName:\"boolean\",j:[{type:46,g:0}],i:{type:0,g:0},callFunction:ce.bind(null,0)},{namespaceURI:\"http://www.w3.org/2001/XMLSchema\",localName:\"decimal\",j:[{type:46,g:0}],i:{type:4,g:0},callFunction:ce.bind(null,4)},{namespaceURI:\"http://www.w3.org/2001/XMLSchema\",localName:\"float\",j:[{type:46,g:0}],i:{type:6,g:0},callFunction:ce.bind(null,6)},{namespaceURI:\"http://www.w3.org/2001/XMLSchema\",localName:\"double\",j:[{type:46,g:0}],i:{type:3,g:0},callFunction:ce.bind(null,3)},{namespaceURI:\"http://www.w3.org/2001/XMLSchema\",localName:\"duration\",j:[{type:46,g:0}],i:{type:18,g:0},callFunction:ce.bind(null,18)},{namespaceURI:\"http://www.w3.org/2001/XMLSchema\",localName:\"dateTime\",j:[{type:46,g:0}],i:{type:9,g:0},callFunction:ce.bind(null,9)},{namespaceURI:\"http://www.w3.org/2001/XMLSchema\",localName:\"dateTimeStamp\",j:[{type:46,g:0}],i:{type:10,g:0},callFunction:ce.bind(null,10)},{namespaceURI:\"http://www.w3.org/2001/XMLSchema\",localName:\"time\",j:[{type:46,g:0}],i:{type:8,g:0},callFunction:ce.bind(null,8)},{namespaceURI:\"http://www.w3.org/2001/XMLSchema\",localName:\"date\",j:[{type:46,g:0}],i:{type:7,g:0},callFunction:ce.bind(null,7)},{namespaceURI:\"http://www.w3.org/2001/XMLSchema\",localName:\"gYearMonth\",j:[{type:46,g:0}],i:{type:11,g:0},callFunction:ce.bind(null,11)},{namespaceURI:\"http://www.w3.org/2001/XMLSchema\",localName:\"gYear\",j:[{type:46,g:0}],i:{type:12,g:0},callFunction:ce.bind(null,12)},{namespaceURI:\"http://www.w3.org/2001/XMLSchema\",localName:\"gMonthDay\",j:[{type:46,g:0}],i:{type:13,g:0},callFunction:ce.bind(null,13)},{namespaceURI:\"http://www.w3.org/2001/XMLSchema\",localName:\"gDay\",j:[{type:46,g:0}],i:{type:15,g:0},callFunction:ce.bind(null,15)},{namespaceURI:\"http://www.w3.org/2001/XMLSchema\",localName:\"gMonth\",j:[{type:46,g:0}],i:{type:14,g:0},callFunction:ce.bind(null,14)},{namespaceURI:\"http://www.w3.org/2001/XMLSchema\",localName:\"hexBinary\",j:[{type:46,g:0}],i:{type:22,g:0},callFunction:ce.bind(null,22)},{namespaceURI:\"http://www.w3.org/2001/XMLSchema\",localName:\"base64Binary\",j:[{type:46,g:0}],i:{type:21,g:0},callFunction:ce.bind(null,21)},{namespaceURI:\"http://www.w3.org/2001/XMLSchema\",localName:\"QName\",j:[{type:46,g:0}],i:{type:23,g:0},callFunction:(e,t,n,r)=>{if(r.isEmpty())return r;if(e=r.first(),B(e.type,2))throw Error(\"XPTY0004: The provided QName is not a string-like value.\");if(e=Te(e,1).value,e=ei(e,23),!Xo(e,23))throw Error(\"FORG0001: The provided QName is invalid.\");if(!e.includes(\":\"))return n=n.Z(\"\"),w.m(N(new tt(\"\",n,e),23));let[o,a]=e.split(\":\");if(n=n.Z(o),!n)throw Error(`FONS0004: The value ${e} can not be cast to a QName. Did you mean to use fn:QName?`);return w.m(N(new tt(o,n,a),23))}},{namespaceURI:\"http://www.w3.org/2001/XMLSchema\",localName:\"anyURI\",j:[{type:46,g:0}],i:{type:20,g:0},callFunction:ce.bind(null,20)},{namespaceURI:\"http://www.w3.org/2001/XMLSchema\",localName:\"normalizedString\",j:[{type:46,g:0}],i:{type:48,g:0},callFunction:ce.bind(null,48)},{namespaceURI:\"http://www.w3.org/2001/XMLSchema\",localName:\"token\",j:[{type:46,g:0}],i:{type:52,g:0},callFunction:ce.bind(null,52)},{namespaceURI:\"http://www.w3.org/2001/XMLSchema\",localName:\"language\",j:[{type:46,g:0}],i:{type:51,g:0},callFunction:ce.bind(null,51)},{namespaceURI:\"http://www.w3.org/2001/XMLSchema\",localName:\"NMTOKEN\",j:[{type:46,g:0}],i:{type:50,g:0},callFunction:ce.bind(null,50)},{namespaceURI:\"http://www.w3.org/2001/XMLSchema\",localName:\"NMTOKENS\",j:[{type:46,g:0}],i:{type:49,g:2},callFunction:ce.bind(null,49)},{namespaceURI:\"http://www.w3.org/2001/XMLSchema\",localName:\"Name\",j:[{type:46,g:0}],i:{type:25,g:0},callFunction:ce.bind(null,25)},{namespaceURI:\"http://www.w3.org/2001/XMLSchema\",localName:\"NCName\",j:[{type:46,g:0}],i:{type:24,g:0},callFunction:ce.bind(null,24)},{namespaceURI:\"http://www.w3.org/2001/XMLSchema\",localName:\"ID\",j:[{type:46,g:0}],i:{type:42,g:0},callFunction:ce.bind(null,42)},{namespaceURI:\"http://www.w3.org/2001/XMLSchema\",localName:\"IDREF\",j:[{type:46,g:0}],i:{type:41,g:0},callFunction:ce.bind(null,41)},{namespaceURI:\"http://www.w3.org/2001/XMLSchema\",localName:\"IDREFS\",j:[{type:46,g:0}],i:{type:43,g:2},callFunction:ce.bind(null,43)},{namespaceURI:\"http://www.w3.org/2001/XMLSchema\",localName:\"ENTITY\",j:[{type:46,g:0}],i:{type:26,g:0},callFunction:ce.bind(null,26)},{namespaceURI:\"http://www.w3.org/2001/XMLSchema\",localName:\"ENTITIES\",j:[{type:46,g:0}],i:{type:40,g:2},callFunction:ce.bind(null,40)},{namespaceURI:\"http://www.w3.org/2001/XMLSchema\",localName:\"integer\",j:[{type:46,g:0}],i:{type:5,g:0},callFunction:ce.bind(null,5)},{namespaceURI:\"http://www.w3.org/2001/XMLSchema\",localName:\"nonPositiveInteger\",j:[{type:46,g:0}],i:{type:27,g:0},callFunction:ce.bind(null,27)},{namespaceURI:\"http://www.w3.org/2001/XMLSchema\",localName:\"negativeInteger\",j:[{type:46,g:0}],i:{type:28,g:0},callFunction:ce.bind(null,28)},{namespaceURI:\"http://www.w3.org/2001/XMLSchema\",localName:\"long\",j:[{type:46,g:0}],i:{type:31,g:0},callFunction:ce.bind(null,31)},{namespaceURI:\"http://www.w3.org/2001/XMLSchema\",localName:\"int\",j:[{type:46,g:0}],i:{type:32,g:0},callFunction:ce.bind(null,32)},{namespaceURI:\"http://www.w3.org/2001/XMLSchema\",localName:\"short\",j:[{type:46,g:0}],i:{type:33,g:0},callFunction:ce.bind(null,33)},{namespaceURI:\"http://www.w3.org/2001/XMLSchema\",localName:\"byte\",j:[{type:46,g:0}],i:{type:34,g:0},callFunction:ce.bind(null,34)},{namespaceURI:\"http://www.w3.org/2001/XMLSchema\",localName:\"nonNegativeInteger\",j:[{type:46,g:0}],i:{type:30,g:0},callFunction:ce.bind(null,30)},{namespaceURI:\"http://www.w3.org/2001/XMLSchema\",localName:\"unsignedLong\",j:[{type:46,g:0}],i:{type:36,g:0},callFunction:ce.bind(null,36)},{namespaceURI:\"http://www.w3.org/2001/XMLSchema\",localName:\"unsignedInt\",j:[{type:46,g:0}],i:{type:35,g:0},callFunction:ce.bind(null,35)},{namespaceURI:\"http://www.w3.org/2001/XMLSchema\",localName:\"unsignedShort\",j:[{type:46,g:0}],i:{type:38,g:0},callFunction:ce.bind(null,38)},{namespaceURI:\"http://www.w3.org/2001/XMLSchema\",localName:\"unsignedByte\",j:[{type:46,g:0}],i:{type:37,g:0},callFunction:ce.bind(null,37)},{namespaceURI:\"http://www.w3.org/2001/XMLSchema\",localName:\"positiveInteger\",j:[{type:46,g:0}],i:{type:29,g:0},callFunction:ce.bind(null,29)},{namespaceURI:\"http://www.w3.org/2001/XMLSchema\",localName:\"yearMonthDuration\",j:[{type:46,g:0}],i:{type:16,g:0},callFunction:ce.bind(null,16)},{namespaceURI:\"http://www.w3.org/2001/XMLSchema\",localName:\"dayTimeDuration\",j:[{type:46,g:0}],i:{type:17,g:0},callFunction:ce.bind(null,17)},{namespaceURI:\"http://www.w3.org/2001/XMLSchema\",localName:\"dateTimeStamp\",j:[{type:46,g:0}],i:{type:10,g:0},callFunction:ce.bind(null,10)}];let ml=(e,t,n,r)=>r.isEmpty()?r:w.m(N(r.first().value.getYear(),5)),gl=(e,t,n,r)=>r.isEmpty()?r:w.m(N(r.first().value.getMonth(),5)),yl=(e,t,n,r)=>r.isEmpty()?r:w.m(N(r.first().value.getDay(),5)),wl=(e,t,n,r)=>r.isEmpty()?r:w.m(N(r.first().value.getHours(),5)),Al=(e,t,n,r)=>r.isEmpty()?r:w.m(N(r.first().value.getMinutes(),5)),vl=(e,t,n,r)=>(r.isEmpty()||(e=w,t=e.m,r=r.first().value,r=t.call(e,N(r.D+r.ma,4))),r),yi=(e,t,n,r)=>r.isEmpty()?r:(e=r.first().value.W)?w.m(N(e,17)):w.empty();var F0=[{namespaceURI:\"http://www.w3.org/2005/xpath-functions\",localName:\"dateTime\",j:[{type:7,g:0},{type:8,g:0}],i:{type:9,g:0},callFunction:(e,t,n,r,o)=>{if(r.isEmpty())return r;if(o.isEmpty())return o;if(e=r.first().value,o=o.first().value,t=e.W,n=o.W,t||n){if(!t||n){if(!t&&n)t=n;else if(!t.equals(n))throw Error(\"FORG0008: fn:dateTime: got a date and time value with different timezones.\")}}else t=null;return o=new We(e.getYear(),e.getMonth(),e.getDay(),o.getHours(),o.getMinutes(),o.getSeconds(),o.ma,t),w.m(N(o,9))}},{namespaceURI:\"http://www.w3.org/2005/xpath-functions\",localName:\"year-from-dateTime\",j:[{type:9,g:0}],i:{type:5,g:0},callFunction:ml},{namespaceURI:\"http://www.w3.org/2005/xpath-functions\",localName:\"month-from-dateTime\",j:[{type:9,g:0}],i:{type:5,g:0},callFunction:gl},{namespaceURI:\"http://www.w3.org/2005/xpath-functions\",localName:\"day-from-dateTime\",j:[{type:9,g:0}],i:{type:5,g:0},callFunction:yl},{namespaceURI:\"http://www.w3.org/2005/xpath-functions\",localName:\"hours-from-dateTime\",j:[{type:9,g:0}],i:{type:5,g:0},callFunction:wl},{namespaceURI:\"http://www.w3.org/2005/xpath-functions\",localName:\"minutes-from-dateTime\",j:[{type:9,g:0}],i:{type:5,g:0},callFunction:Al},{namespaceURI:\"http://www.w3.org/2005/xpath-functions\",localName:\"seconds-from-dateTime\",j:[{type:9,g:0}],i:{type:4,g:0},callFunction:vl},{namespaceURI:\"http://www.w3.org/2005/xpath-functions\",localName:\"timezone-from-dateTime\",j:[{type:9,g:0}],i:{type:17,g:0},callFunction:yi},{namespaceURI:\"http://www.w3.org/2005/xpath-functions\",localName:\"year-from-date\",j:[{type:7,g:0}],i:{type:5,g:0},callFunction:ml},{namespaceURI:\"http://www.w3.org/2005/xpath-functions\",localName:\"month-from-date\",j:[{type:7,g:0}],i:{type:5,g:0},callFunction:gl},{namespaceURI:\"http://www.w3.org/2005/xpath-functions\",localName:\"day-from-date\",j:[{type:7,g:0}],i:{type:5,g:0},callFunction:yl},{namespaceURI:\"http://www.w3.org/2005/xpath-functions\",localName:\"timezone-from-date\",j:[{type:7,g:0}],i:{type:17,g:0},callFunction:yi},{namespaceURI:\"http://www.w3.org/2005/xpath-functions\",localName:\"hours-from-time\",j:[{type:8,g:0}],i:{type:5,g:0},callFunction:wl},{namespaceURI:\"http://www.w3.org/2005/xpath-functions\",localName:\"minutes-from-time\",j:[{type:8,g:0}],i:{type:5,g:0},callFunction:Al},{namespaceURI:\"http://www.w3.org/2005/xpath-functions\",localName:\"seconds-from-time\",j:[{type:8,g:0}],i:{type:4,g:0},callFunction:vl},{namespaceURI:\"http://www.w3.org/2005/xpath-functions\",localName:\"timezone-from-time\",j:[{type:8,g:0}],i:{type:17,g:0},callFunction:yi}];function Vo(e,t){let n=t.h,r=t.Ja,o=t.Oa;switch(e.node.nodeType){case 1:let s=r.createElementNS(e.node.namespaceURI,e.node.nodeName);n.getAllAttributes(e.node).forEach(l=>o.setAttributeNS(s,l.namespaceURI,l.nodeName,l.value));for(var a of kt(n,e))e=Vo(a,t),o.insertBefore(s,e.node,null);return{node:s,F:null};case 2:return t=r.createAttributeNS(e.node.namespaceURI,e.node.nodeName),t.value=Je(n,e),{node:t,F:null};case 4:return{node:r.createCDATASection(Je(n,e)),F:null};case 8:return{node:r.createComment(Je(n,e)),F:null};case 9:a=r.createDocument();for(let l of kt(n,e))e=Vo(l,t),o.insertBefore(a,e.node,null);return{node:a,F:null};case 7:return{node:r.createProcessingInstruction(e.node.target,Je(n,e)),F:null};case 3:return{node:r.createTextNode(Je(n,e)),F:null}}}function wi(e,t){let n=t.Oa;var r=t.Ja;let o=t.h;if(nt(e.node))switch(e.node.nodeType){case 2:return r=r.createAttributeNS(e.node.namespaceURI,e.node.nodeName),r.value=Je(o,e),r;case 8:return r.createComment(Je(o,e));case 1:let a=e.node.prefix,s=e.node.localName,l=r.createElementNS(e.node.namespaceURI,a?a+\":\"+s:s);return kt(o,e).forEach(p=>{p=wi(p,t),n.insertBefore(l,p,null)}),or(o,e).forEach(p=>{n.setAttributeNS(l,p.node.namespaceURI,p.node.nodeName,Je(o,p))}),l.normalize(),l;case 7:return r.createProcessingInstruction(e.node.target,Je(o,e));case 3:return r.createTextNode(Je(o,e))}else return Vo(e,t).node}function S0(e,t,n){let r=e;for(e=we(n,r);e!==null;){if(r.node.nodeType===2)t.push(r.node.nodeName);else{let o=kt(n,e);t.push(o.findIndex(a=>Ye(a,r)))}r=e,e=we(n,r)}return r}function R0(e,t,n){for(;0<t.length;){let r=t.pop();typeof r==\"string\"?e=or(n,e).find(o=>o.node.nodeName===r):e=kt(n,e)[r]}return e.node}function Ze(e,t,n){var r=e.node;if(!(nt(r)||n||e.F))return r;r=t.v;let o=[];return n?wi(e,t):(e=S0(e,o,t.h),n=r.get(e.node),n||(n={node:wi(e,t),F:null},r.set(e.node,n)),R0(n,o,t.h))}let xl=(e,t,n,r,o)=>r.M(a=>{var s;let l=\"\";for(let p=0;p<a.length;p++){let m=a[p],T=t.Wa&&B(m.type,53)?t.Wa.serializeToString(Ze(m.value,t,!1)):(s=$e(w.m(m),t).map(R=>Te(R,1)).first())===null||s===void 0?void 0:s.value;T&&(l+=`{type: ${Be[m.type]}, value: ${T}}\n`)}return o!==void 0&&(l+=o.first().value),t.jb.trace(l),w.create(a)});var O0=[{j:[{type:59,g:2}],callFunction:xl,localName:\"trace\",namespaceURI:\"http://www.w3.org/2005/xpath-functions\",i:{type:59,g:2}},{j:[{type:59,g:2},{type:1,g:3}],callFunction:xl,localName:\"trace\",namespaceURI:\"http://www.w3.org/2005/xpath-functions\",i:{type:59,g:2}}];let Ai=(e,t,n,r,o)=>{throw e=r===void 0||r.isEmpty()?new tt(\"err\",\"http://www.w3.org/2005/xqt-errors\",\"FOER0000\"):r.first().value,t=\"\",o===void 0||o.isEmpty()||(t=`: ${o.first().value}`),Error(`${e.localName}${t}`)};var G0=[{namespaceURI:\"http://www.w3.org/2005/xpath-functions\",localName:\"error\",j:[],i:{type:63,g:3},callFunction:Ai},{namespaceURI:\"http://www.w3.org/2005/xpath-functions\",localName:\"error\",j:[{type:23,g:0}],i:{type:63,g:3},callFunction:Ai},{namespaceURI:\"http://www.w3.org/2005/xpath-functions\",localName:\"error\",j:[{type:23,g:0},{type:1,g:3}],i:{type:63,g:3},callFunction:Ai},{namespaceURI:\"http://www.w3.org/2005/xpath-functions\",localName:\"error\",j:[{type:23,g:0},{type:1,g:3},{type:59,g:2}],i:{type:63,g:3},callFunction(){throw Error(\"Not implemented: Using an error object in error is not supported\")}}];function $t(e){return typeof e==\"string\"?e:(e=new un().getChildNodes(e).find(t=>t.nodeType===8))?e.data:\"some expression\"}var Nl=class extends Error{constructor(e,t){super(e),this.position={end:{ga:t.end.ga,line:t.end.line,offset:t.end.offset},start:{ga:t.start.ga,line:t.start.line,offset:t.start.offset}}}};function lt(e,t){if(t instanceof Error)throw t;typeof e!=\"string\"&&(e=$t(e));let n=Vl(t);e=e.replace(/\\r/g,\"\").split(`\n`);let r=Math.floor(Math.log10(Math.min(n.end.line+2,e.length)))+1;throw e=e.reduce((o,a,s)=>{var l=s+1;if(2<n.start.line-l||2<l-n.end.line)return o;if(s=`${Array(r).fill(\" \",0,Math.floor(Math.log10(l))+1-r).join(\"\")}${l}: `,o.push(`${s}${a}`),l>=n.start.line&&l<=n.end.line){let p=l<n.end.line?a.length+s.length:n.end.ga-1+s.length;l=l>n.start.line?s.length:n.start.ga-1+s.length,a=\" \".repeat(s.length)+Array.from(a.substring(0,l-s.length),m=>m===\"\t\"?\"\t\":\" \").join(\"\")+\"^\".repeat(p-l),o.push(a)}return o},[]),t=Jl(t).join(`\n`),new Nl(e.join(`\n`)+`\n\n`+t,n)}let fn=Object.create(null);function D0(e,t){let n=new Map;for(let r=0;r<e.length+1;++r)n.set(r,new Map);return(function r(o,a){if(o===0)return a;if(a===0)return o;if(n.get(o).has(a))return n.get(o).get(a);var s=0;return e[o-1]!==t[a-1]&&(s=1),s=Math.min(r(o-1,a)+1,r(o,a-1)+1,r(o-1,a-1)+s),n.get(o).set(a,s),s})(e.length,t.length)}function vi(e){let t=fn[e]?fn[e]:Object.keys(fn).map(n=>({name:n,sb:D0(e,n.slice(n.lastIndexOf(\":\")+1))})).sort((n,r)=>n.sb-r.sb).slice(0,5).filter(n=>n.sb<e.length/2).reduce((n,r)=>n.concat(fn[r.name]),[]).slice(0,5);return t.length?t.map(n=>`\"Q{${n.namespaceURI}}${n.localName} (${n.j.map(r=>r===4?\"...\":Bt(r)).join(\", \")})\"`).reduce((n,r,o,a)=>o===0?n+r:n+((o!==a.length-1?\", \":\" or \")+r),\"Did you mean \")+\"?\":\"No similar functions found.\"}function xi(e,t,n){var r=fn[e+\":\"+t];return r&&(r=r.find(o=>o.j.some(a=>a===4)?o.j.length-1<=n:o.j.length===n))?{j:r.j,arity:n,callFunction:r.callFunction,H:r.H,localName:t,namespaceURI:e,i:r.i}:null}function Bl(e,t,n,r,o){fn[e+\":\"+t]||(fn[e+\":\"+t]=[]),fn[e+\":\"+t].push({j:n,arity:n.length,callFunction:o,H:!1,localName:t,namespaceURI:e,i:r})}var no={xml:\"http://www.w3.org/XML/1998/namespace\",xs:\"http://www.w3.org/2001/XMLSchema\",fn:\"http://www.w3.org/2005/xpath-functions\",map:\"http://www.w3.org/2005/xpath-functions/map\",array:\"http://www.w3.org/2005/xpath-functions/array\",math:\"http://www.w3.org/2005/xpath-functions/math\",fontoxpath:\"http://fontoxml.com/fontoxpath\",local:\"http://www.w3.org/2005/xquery-local-functions\"},Jo=class{constructor(e,t,n,r){this.Ea=[Object.create(null)],this.Fa=Object.create(null),this.s=e,this.ha=Object.keys(t).reduce((o,a)=>(t[a]===void 0||(o[a]=`Q{}${a}[0]`),o),Object.create(null)),this.o=Object.create(null),this.h=Object.create(null),this.v=n,this.l=r,this.D=[]}ua(e,t,n){return xi(e,t,n)}eb(e,t){return e?null:(e=this.ha[t],this.o[t]||(this.o[t]={name:t}),e)}Ua(e,t){let n=this.l(e,t);if(n)this.D.push({fc:e,arity:t,Eb:n});else if(e.prefix===\"\"){if(this.v)return{namespaceURI:this.v,localName:e.localName}}else if(t=this.Z(e.prefix,!0))return{namespaceURI:t,localName:e.localName};return n}Z(e,t=!0){return t?no[e]?no[e]:(t=this.s(e),this.h[e]||(this.h[e]={namespaceURI:t,prefix:e}),t!==void 0||e?t:null):null}},k0=(e,t)=>(e=e.node.nodeType===2?`${e.node.nodeName}=\"${Je(t,e)}\"`:e.node.outerHTML,Error(`XQTY0024: The node ${e} follows a node that is not an attribute node or a namespace node.`)),ro=e=>Error(`XQDY0044: The node name \"${e.Aa()}\" is invalid for a computed attribute constructor.`),El=()=>Error(\"XQST0045: Functions and variables may not be declared in one of the reserved namespace URIs.\"),Il=(e,t)=>Error(`XQST0049: The function or variable \"Q{${e}}${t}\" is declared more than once.`),Ni=()=>Error(\"XQST0060: Functions declared in a module or as an external function must reside in a namespace.\"),Tl=()=>Error(\"XQST0066: A Prolog may contain at most one default function namespace declaration.\"),Bi=()=>Error(\"XQST0070: The prefixes xml and xmlns may not be used in a namespace declaration or be bound to another namespaceURI.\"),Cl=e=>Error(`XQDY0074: The value \"${e}\" of a name expressions cannot be converted to an expanded QName.`),Fl=e=>Error(`XPST0081: The prefix \"${e}\" could not be resolved`);function dr(e,t){return`Q{${e||\"\"}}${t}`}function Sl(e,t){for(let n=e.length-1;0<=n;--n)if(t in e[n])return e[n][t]}function Ko(e){let t=new kn(e.o);for(let n=0;n<e.h+1;++n)t.D=[Object.assign(Object.create(null),t.D[0],e.D[n])],t.Ea=[Object.assign(Object.create(null),t.Ea[0],e.Ea[n])],t.l=Object.assign(Object.create(null),e.l),t.Fa=e.Fa,t.v=e.v;return t}function mr(e){e.s++,e.h++,e.D[e.h]=Object.create(null),e.Ea[e.h]=Object.create(null)}function M0(e,t,n){return(e=e.Fa[dr(t,n)])?e:null}function Ei(e,t,n,r,o){if(r=dr(t,n)+\"~\"+r,e.l[r])throw Il(t,n);e.l[r]=o}function Dn(e,t,n){e.D[e.h][t]=n}function bt(e,t,n){return t=dr(t||\"\",n),e.Ea[e.h][t]=`${t}[${e.s}]`}function Rl(e,t,n,r){e.Fa[`${dr(t||\"\",n)}[${e.s}]`]=r}function gr(e){e.D.length=e.h,e.Ea.length=e.h,e.h--}var kn=class{constructor(e){this.o=e,this.s=this.h=0,this.D=[Object.create(null)],this.l=Object.create(null),this.v=null,this.Fa=e&&e.Fa,this.Ea=e&&e.Ea}ua(e,t,n,r=!1){let o=this.l[dr(e,t)+\"~\"+n];return!o||r&&o.wb?this.o===null?null:this.o.ua(e,t,n,r):o}eb(e,t){let n=Sl(this.Ea,dr(e,t));return n||(this.o===null?null:this.o.eb(e,t))}Ua(e,t){var n=e.prefix;let r=e.localName;return n===\"\"&&this.v?{localName:r,namespaceURI:this.v}:n&&(n=this.Z(n,!1))?{localName:r,namespaceURI:n}:this.o===null?null:this.o.Ua(e,t)}Z(e,t=!0){let n=Sl(this.D,e||\"\");return n===void 0?this.o===null?void 0:this.o.Z(e||\"\",t):n}};function O(e,t){t===\"*\"||Array.isArray(t)||(t=[t]);for(let n=1;n<e.length;++n){if(!Array.isArray(e[n]))continue;let r=e[n];if(t===\"*\"||t.includes(r[0]))return r}return null}function de(e){return 2>e.length?\"\":typeof e[1]==\"object\"?e[2]||\"\":e[1]||\"\"}function te(e,t){return Array.isArray(e)?(e=e[1],typeof e!=\"object\"||Array.isArray(e)?null:t in e?e[t]:null):null}function K(e,t){return t.reduce(O,e)}function Z(e,t){let n=[];for(let r=1;r<e.length;++r){if(!Array.isArray(e[r]))continue;let o=e[r];t!==\"*\"&&o[0]!==t||n.push(o)}return n}function Fe(e){return{localName:de(e),namespaceURI:te(e,\"URI\"),prefix:te(e,\"prefix\")}}function zo(e){let t=O(e,\"typeDeclaration\");if(!t||O(t,\"voidSequenceType\"))return{type:59,g:2};let n=a=>{switch(a[0]){case\"documentTest\":return 55;case\"elementTest\":return 54;case\"attributeTest\":return 47;case\"piTest\":return 57;case\"commentTest\":return 58;case\"textTest\":return 56;case\"anyKindTest\":return 53;case\"anyItemType\":return 59;case\"anyFunctionTest\":case\"functionTest\":case\"typedFunctionTest\":return 60;case\"anyMapTest\":case\"typedMapTest\":return 61;case\"anyArrayTest\":case\"typedArrayTest\":return 62;case\"atomicType\":return ht([te(a,\"prefix\"),de(a)].join(\":\"));case\"parenthesizedItemType\":return n(O(a,\"*\"));default:throw Error(`Type declaration \"${O(t,\"*\")[0]}\" is not supported.`)}};e={type:n(O(t,\"*\")),g:3};let r=null,o=O(t,\"occurrenceIndicator\");switch(o&&(r=de(o)),r){case\"*\":return e.g=2,e;case\"?\":return e.g=0,e;case\"+\":return e.g=1,e;case\"\":case null:return e}}function ue(e,t,n){if(typeof e[1]!=\"object\"||Array.isArray(e[1])){let r={};r[t]=n,e.splice(1,0,r)}else e[1][t]=n}function U0(e){let t={type:62,g:3};return ue(e,\"type\",t),t}function P0(e,t){if(!t||!t.fa)return{type:59,g:2};var n=O(e,\"EQName\");if(!n)return{type:59,g:2};var r=Fe(n);n=r.localName;let o=r.prefix;return r=Z(O(e,\"arguments\"),\"*\"),n=t.fa.Ua({localName:n,prefix:o},r.length),n?(t=t.fa.ua(n.namespaceURI,n.localName,r.length+1),t?(t.i.type!==59&&ue(e,\"type\",t.i),t.i):{type:59,g:2}):{type:59,g:2}}function Y(e,t,n){return(e<<20)+(t<<12)+(n.charCodeAt(0)<<8)+n.charCodeAt(1)}var Wo={[Y(2,2,\"idivOp\")]:5,[Y(16,16,\"addOp\")]:16,[Y(16,16,\"subtractOp\")]:16,[Y(16,16,\"divOp\")]:4,[Y(16,2,\"multiplyOp\")]:16,[Y(16,2,\"divOp\")]:16,[Y(2,16,\"multiplyOp\")]:16,[Y(17,17,\"addOp\")]:17,[Y(17,17,\"subtractOp\")]:17,[Y(17,17,\"divOp\")]:4,[Y(17,2,\"multiplyOp\")]:17,[Y(17,2,\"divOp\")]:17,[Y(2,17,\"multiplyOp\")]:17,[Y(9,9,\"subtractOp\")]:17,[Y(7,7,\"subtractOp\")]:17,[Y(8,8,\"subtractOp\")]:17,[Y(9,16,\"addOp\")]:9,[Y(9,16,\"subtractOp\")]:9,[Y(9,17,\"addOp\")]:9,[Y(9,17,\"subtractOp\")]:9,[Y(7,16,\"addOp\")]:7,[Y(7,16,\"subtractOp\")]:7,[Y(7,17,\"addOp\")]:7,[Y(7,17,\"subtractOp\")]:7,[Y(8,17,\"addOp\")]:8,[Y(8,17,\"subtractOp\")]:8,[Y(9,16,\"addOp\")]:9,[Y(9,16,\"subtractOp\")]:9,[Y(9,17,\"addOp\")]:9,[Y(9,17,\"subtractOp\")]:9,[Y(7,17,\"addOp\")]:7,[Y(7,17,\"subtractOp\")]:7,[Y(7,16,\"addOp\")]:7,[Y(7,16,\"subtractOp\")]:7,[Y(8,17,\"addOp\")]:8,[Y(8,17,\"subtractOp\")]:8},Ol={[Y(2,2,\"addOp\")]:(e,t)=>e+t,[Y(2,2,\"subtractOp\")]:(e,t)=>e-t,[Y(2,2,\"multiplyOp\")]:(e,t)=>e*t,[Y(2,2,\"divOp\")]:(e,t)=>e/t,[Y(2,2,\"modOp\")]:(e,t)=>e%t,[Y(2,2,\"idivOp\")]:(e,t)=>Math.trunc(e/t),[Y(16,16,\"addOp\")]:function(e,t){return new ur(e.da+t.da)},[Y(16,16,\"subtractOp\")]:function(e,t){return new ur(e.da-t.da)},[Y(16,16,\"divOp\")]:function(e,t){return e.da/t.da},[Y(16,2,\"multiplyOp\")]:du,[Y(16,2,\"divOp\")]:function(e,t){if(isNaN(t))throw Error(\"FOCA0005: Cannot divide xs:yearMonthDuration by NaN\");if(e=Math.round(e.da/t),e>Number.MAX_SAFE_INTEGER||!Number.isFinite(e))throw Error(\"FODT0002: Value overflow while dividing xs:yearMonthDuration\");return new ur(e<Number.MIN_SAFE_INTEGER||e===0?0:e)},[Y(2,16,\"multiplyOp\")]:(e,t)=>du(t,e),[Y(17,17,\"addOp\")]:function(e,t){return new Fn(e.ba+t.ba)},[Y(17,17,\"subtractOp\")]:function(e,t){return new Fn(e.ba-t.ba)},[Y(17,17,\"divOp\")]:function(e,t){if(t.ba===0)throw Error(\"FOAR0001: Division by 0\");return e.ba/t.ba},[Y(17,2,\"multiplyOp\")]:ou,[Y(17,2,\"divOp\")]:function(e,t){if(isNaN(t))throw Error(\"FOCA0005: Cannot divide xs:dayTimeDuration by NaN\");if(e=e.ba/t,e>Number.MAX_SAFE_INTEGER||!Number.isFinite(e))throw Error(\"FODT0002: Value overflow while dividing xs:dayTimeDuration\");return new Fn(e<Number.MIN_SAFE_INTEGER||Object.is(-0,e)?0:e)},[Y(2,17,\"multiplyOp\")]:(e,t)=>ou(t,e),[Y(9,9,\"subtractOp\")]:za,[Y(7,7,\"subtractOp\")]:za,[Y(8,8,\"subtractOp\")]:za,[Y(9,16,\"addOp\")]:Mt,[Y(9,16,\"subtractOp\")]:Ut,[Y(9,17,\"addOp\")]:Mt,[Y(9,17,\"subtractOp\")]:Ut,[Y(7,16,\"addOp\")]:Mt,[Y(7,16,\"subtractOp\")]:Ut,[Y(7,17,\"addOp\")]:Mt,[Y(7,17,\"subtractOp\")]:Ut,[Y(8,17,\"addOp\")]:Mt,[Y(8,17,\"subtractOp\")]:Ut,[Y(9,16,\"addOp\")]:Mt,[Y(9,16,\"subtractOp\")]:Ut,[Y(9,17,\"addOp\")]:Mt,[Y(9,17,\"subtractOp\")]:Ut,[Y(7,17,\"addOp\")]:Mt,[Y(7,17,\"subtractOp\")]:Ut,[Y(7,16,\"addOp\")]:Mt,[Y(7,16,\"subtractOp\")]:Ut,[Y(8,17,\"addOp\")]:Mt,[Y(8,17,\"subtractOp\")]:Ut};function Gl(e,t){return B(e,5)&&B(t,5)?5:B(e,4)&&B(t,4)?4:B(e,6)&&B(t,6)?6:3}let Zo=[2,16,17,9,7,8];function Dl(e,t,n){function r(p,m){return{T:o?o(p):p,U:a?a(m):m}}let o=null,a=null;B(t,19)&&(o=p=>Te(p,3),t=3),B(n,19)&&(a=p=>Te(p,3),n=3);let s=Zo.filter(p=>B(t,p)),l=Zo.filter(p=>B(n,p));if(s.includes(2)&&l.includes(2)){let p=Ol[Y(2,2,e)],m=Wo[Y(2,2,e)];return m||(m=Gl(t,n)),e===\"divOp\"&&m===5&&(m=4),e===\"idivOp\"?kl(r,p)[0]:(T,R)=>{let{T:X,U:P}=r(T,R);return N(p(X.value,P.value),m)}}for(let p of s)for(let m of l){let T=Ol[Y(p,m,e)],R=Wo[Y(p,m,e)];if(T&&R!==void 0)return(X,P)=>{let{T:V,U:se}=r(X,P);return N(T(V.value,se.value),R)}}}function H0(e,t,n){function r(m,T){return{T:a?a(m):m,U:s?s(T):T}}var o=[2,53,59,46,47];if(o.includes(t)||o.includes(n))return 2;let a=null,s=null;B(t,19)&&(a=m=>Te(m,3),t=3),B(n,19)&&(s=m=>Te(m,3),n=3);var l=Zo.filter(m=>B(t,m));if(o=Zo.filter(m=>B(n,m)),l.includes(2)&&o.includes(2)){var p=Wo[Y(2,2,e)];return p===void 0&&(p=Gl(t,n)),e===\"divOp\"&&p===5&&(p=4),e===\"idivOp\"?kl(r,(m,T)=>Math.trunc(m/T))[1]:p}for(p of l)for(let m of o)if(l=Wo[Y(p,m,e)],l!==void 0)return l}function kl(e,t){return[(n,r)=>{let{T:o,U:a}=e(n,r);if(a.value===0)throw Error(\"FOAR0001: Divisor of idiv operator cannot be (-)0\");if(Number.isNaN(o.value)||Number.isNaN(a.value)||!Number.isFinite(o.value))throw Error(\"FOAR0002: One of the operands of idiv is NaN or the first operand is (-)INF\");return Number.isFinite(o.value)&&!Number.isFinite(a.value)?N(0,5):N(t(o.value,a.value),5)},5]}let Ml=Object.create(null);var X0=class extends he{constructor(e,t,n,r,o){super(t.o.add(n.o),[t,n],{B:!1},!1,r),this.A=t,this.K=n,this.l=e,this.s=o}h(e,t){return $e(oe(this.A,e,t),t).M(n=>n.length===0?w.empty():$e(oe(this.K,e,t),t).M(r=>{if(r.length===0)return w.empty();if(1<n.length||1<r.length)throw Error('XPTY0004: the operands of the \"'+this.l+'\" operator should be empty or singleton.');let o=n[0];if(r=r[0],this.s&&this.type)return w.m(this.s(o,r));var a=o.type,s=r.type,l=this.l;let p=`${a}~${s}~${l}`,m=Ml[p];if(m||(m=Ml[p]=Dl(l,a,s)),a=m,!a)throw Error(`XPTY0004: ${this.l} not available for types ${Be[o.type]} and ${Be[r.type]}`);return w.m(a(o,r))}))}};function j0(e,t){var n=pe;let r=!1;for(var o=1;o<e.length;o++)switch(e[o][0]){case\"letClause\":ea(t);var a=e[o],s=t,l=n,p=K(a,[\"letClauseItem\",\"typedVariableBinding\",\"varName\"]);p=Fe(p),a=K(a,[\"letClauseItem\",\"letExpr\"]),l=l(a[1],s),jl(s,p.localName,l);break;case\"forClause\":r=!0,ea(t),$0(e[o],t,n);break;case\"whereClause\":ea(t),s=e[o],n(s,t),ue(s,\"type\",{type:0,g:3});break;case\"orderByClause\":ea(t);break;case\"returnClause\":return o=e[o],s=n,n=K(o,[\"*\"]),t=s(n,t),ue(n,\"type\",t),ue(o,\"type\",t),n=t,n?(r&&(n={type:n.type,g:2}),n.type!==59&&ue(e,\"type\",n),n):{type:59,g:2};default:return n=n(e[o],t),n?(r&&(n={type:n.type,g:2}),n.type!==59&&ue(e,\"type\",n),n):{type:59,g:2}}if(0<t.h)t.h--,t.o.pop(),t.v.pop();else throw Error(\"Variable scope out of bound\")}function $0(e,t,n){let r=Fe(K(e,[\"forClauseItem\",\"typedVariableBinding\",\"varName\"]));(e=K(e,[\"forClauseItem\",\"forExpr\",\"sequenceExpr\"]))&&(e=Z(e,\"*\").map(o=>n(o,t)),e.includes(void 0)||e.includes(null)||(e=Ul(e),e.length===1&&jl(t,r.localName,e[0])))}function Ul(e){return e.filter((t,n,r)=>r.findIndex(o=>o.type===t.type&&o.g===t.g)===n)}function b0(e,t){if(!t||!t.fa)return{type:59,g:2};let n=O(e,\"functionName\");var r=Fe(n);let o=r.localName;var a=r.prefix;let s=r.namespaceURI;if(r=Z(O(e,\"arguments\"),\"*\"),s===null){if(a=t.fa.Ua({localName:o,prefix:a},r.length),!a)return{type:59,g:2};o=a.localName,s=a.namespaceURI,ue(n,\"URI\",s),n[2]=o}return t=t.fa.ua(s,o,r.length),!t||t.i.type===63?{type:59,g:2}:(t.i.type!==59&&ue(e,\"type\",t.i),t.i)}function L0(e){let t={type:61,g:3};return ue(e,\"type\",t),t}function q0(e,t){if(!t||!t.fa)return{type:59,g:2};let n=O(e,\"functionName\");var r=Fe(n);let o=r.localName;var a=r.namespaceURI;let s=r.prefix;if(r=Number(K(e,[\"integerConstantExpr\",\"value\"])[1]),!a){if(a=t.fa.Ua({localName:o,prefix:s},r),!a)return{type:59,g:2};o=a.localName,a=a.namespaceURI,ue(n,\"URI\",a)}return t=t.fa.ua(a,o,r)||null,t?(t.i.type!==59&&t.i.type!==63&&ue(e,\"type\",t.i),t.i):{type:59,g:2}}function Y0(e,t){var n=Z(e,\"stepExpr\");if(!n)return{type:59,g:2};for(let a of n){e:{n=a;var r=t;let s=null;if(!n)break e;var o=Z(n,\"*\");let l=\"\";for(let p of o)switch(p[0]){case\"filterExpr\":s=te(K(p,[\"*\"]),\"type\");break;case\"xpathAxis\":l=p[1];t:{switch(l){case\"attribute\":s={type:47,g:2};break t;case\"child\":case\"decendant\":case\"self\":case\"descendant-or-self\":case\"following-sibling\":case\"following\":case\"namespace\":case\"parent\":case\"ancestor\":case\"preceding-sibling\":case\"preceding\":case\"ancestor-or-self\":s={type:53,g:2};break t}s=void 0}break;case\"nameTest\":if(o=Fe(p),o.namespaceURI!==null||l===\"attribute\"&&!o.prefix)break;o=r.Z(o.prefix||\"\"),o!==void 0&&ue(p,\"URI\",o);break;case\"lookup\":s={type:59,g:2}}s&&s.type!==59&&ue(n,\"type\",s)}r=te(a,\"type\")}return r&&r.type!==59&&ue(e,\"type\",r),r}function Q0(e){let t={type:0,g:3};return ue(e,\"type\",t),t}function _0(e,t,n){return t===0?t={type:53,g:2}:t===1?t=n[0]:n.includes(void 0)||n.includes(null)?t={type:59,g:2}:(t=Ul(n),t=1<t.length?{type:59,g:2}:{type:t[0].type,g:2}),t&&t.type!==59&&ue(e,\"type\",t),t}function V0(e,t,n,r){if(!t||n.includes(void 0))return{type:59,g:2};var o=Z(e,\"typeswitchExprCaseClause\");for(let s=0;s<n.length;s++){var a=O(o[s],\"*\");switch(a[0]){case\"sequenceType\":if(a=Pl(a,t,n[s]))return a.type!==59&&ue(e,\"type\",a),a;continue;case\"sequenceTypeUnion\":for(r=Z(a,\"*\"),o=0;2>o;o++)if(a=Pl(r[o],t,n[s]))return a.type!==59&&ue(e,\"type\",a),a;default:return{type:59,g:2}}}return r.type!==59&&ue(e,\"type\",r),r}function Pl(e,t,n){let r=Z(e,\"*\"),o=O(e,\"atomicType\");if(!o)return{type:59,g:2};if(ht(te(o,\"prefix\")+\":\"+o[2])===t.type){if(r.length===1){if(t.g===3)return n}else if(e=O(e,\"occurrenceIndicator\")[1],t.g===qa(e))return n}}function Hl(e,t){pe(e,t)}function pe(e,t){var n=J0.get(e[0]);if(n)return n(e,t);for(n=1;n<e.length;n++)e[n]&&pe(e[n],t)}let yr=(e,t)=>{var n=pe(O(e,\"firstOperand\")[1],t);let r=pe(O(e,\"secondOperand\")[1],t);var o=e[0];if(n&&r)if(t=H0(o,n.type,r.type))n={type:t,g:n.g},t!==2&&t!==59&&ue(e,\"type\",n),e=n;else throw Error(`XPTY0004: ${o} not available for types ${Bt(n)} and ${Bt(r)}`);else e={type:2,g:3};return e},Xl=(e,t)=>{pe(O(e,\"firstOperand\")[1],t),pe(O(e,\"secondOperand\")[1],t);e:{switch(e[0]){case\"orOp\":t={type:0,g:3},ue(e,\"type\",t),e=t;break e;case\"andOp\":t={type:0,g:3},ue(e,\"type\",t),e=t;break e}e=void 0}return e},Ii=(e,t)=>{pe(O(e,\"firstOperand\")[1],t),pe(O(e,\"secondOperand\")[1],t);e:{switch(e[0]){case\"unionOp\":t={type:53,g:2},ue(e,\"type\",t),e=t;break e;case\"intersectOp\":t={type:53,g:2},ue(e,\"type\",t),e=t;break e;case\"exceptOp\":t={type:53,g:2},ue(e,\"type\",t),e=t;break e}e=void 0}return e},wr=(e,t)=>(pe(O(e,\"firstOperand\")[1],t),pe(O(e,\"secondOperand\")[1],t),t={type:0,g:3},ue(e,\"type\",t),t),Ar=(e,t)=>{pe(O(e,\"firstOperand\")[1],t),pe(O(e,\"secondOperand\")[1],t),t=te(K(e,[\"firstOperand\",\"*\"]),\"type\");let n=te(K(e,[\"secondOperand\",\"*\"]),\"type\");return t={type:0,g:Rn(t)||Rn(n)?0:3},ue(e,\"type\",t),t},Ti=(e,t)=>{pe(O(e,\"firstOperand\")[1],t),pe(O(e,\"secondOperand\")[1],t),t=te(K(e,[\"firstOperand\",\"*\"]),\"type\");let n=te(K(e,[\"secondOperand\",\"*\"]),\"type\");return t={type:0,g:Rn(t)||Rn(n)?0:3},ue(e,\"type\",t),t},J0=new Map([[\"unaryMinusOp\",(e,t)=>(t=pe(O(e,\"operand\")[1],t),t?B(t.type,2)?(t={type:t.type,g:t.g},ue(e,\"type\",t),e=t):(t={type:3,g:3},ue(e,\"type\",t),e=t):(t={type:2,g:2},ue(e,\"type\",t),e=t),e)],[\"unaryPlusOp\",(e,t)=>(t=pe(O(e,\"operand\")[1],t),t?B(t.type,2)?(t={type:t.type,g:t.g},ue(e,\"type\",t),e=t):(t={type:3,g:3},ue(e,\"type\",t),e=t):(t={type:2,g:2},ue(e,\"type\",t),e=t),e)],[\"addOp\",yr],[\"subtractOp\",yr],[\"divOp\",yr],[\"idivOp\",yr],[\"modOp\",yr],[\"multiplyOp\",yr],[\"andOp\",Xl],[\"orOp\",Xl],[\"sequenceExpr\",(e,t)=>{let n=Z(e,\"*\"),r=n.map(o=>pe(o,t));return _0(e,n.length,r)}],[\"unionOp\",Ii],[\"intersectOp\",Ii],[\"exceptOp\",Ii],[\"stringConcatenateOp\",(e,t)=>(pe(O(e,\"firstOperand\")[1],t),pe(O(e,\"secondOperand\")[1],t),t={type:1,g:3},ue(e,\"type\",t),t)],[\"rangeSequenceExpr\",(e,t)=>(pe(O(e,\"startExpr\")[1],t),pe(O(e,\"endExpr\")[1],t),t={type:5,g:1},ue(e,\"type\",t),t)],[\"equalOp\",wr],[\"notEqualOp\",wr],[\"lessThanOrEqualOp\",wr],[\"lessThanOp\",wr],[\"greaterThanOrEqualOp\",wr],[\"greaterThanOp\",wr],[\"eqOp\",Ar],[\"neOp\",Ar],[\"ltOp\",Ar],[\"leOp\",Ar],[\"gtOp\",Ar],[\"geOp\",Ar],[\"isOp\",Ti],[\"nodeBeforeOp\",Ti],[\"nodeAfterOp\",Ti],[\"pathExpr\",(e,t)=>{let n=O(e,\"rootExpr\");return n&&n[1]&&pe(n[1],t),Z(e,\"stepExpr\").map(r=>pe(r,t)),Y0(e,t)}],[\"contextItemExpr\",()=>({type:59,g:2})],[\"ifThenElseExpr\",(e,t)=>{var n=O(e,\"ifClause\")||O(Z(e,\"x:stackTrace\")[0],\"ifClause\");let r=O(e,\"thenClause\")||O(Z(e,\"x:stackTrace\")[1],\"thenClause\"),o=O(e,\"elseClause\")||O(Z(e,\"x:stackTrace\")[2],\"elseClause\");return pe(O(n,\"*\"),t),n=pe(O(r,\"*\"),t),t=pe(O(o,\"*\"),t),n&&t?n.type===t.type&&n.g===t.g?(n.type!==59&&ue(e,\"type\",n),e=n):e={type:59,g:2}:e={type:59,g:2},e}],[\"instanceOfExpr\",(e,t)=>(pe(O(e,\"argExpr\"),t),pe(O(e,\"sequenceType\"),t),t={type:0,g:3},ue(e,\"type\",t),t)],[\"integerConstantExpr\",e=>{let t={type:5,g:3};return ue(e,\"type\",t),t}],[\"doubleConstantExpr\",e=>{let t={type:3,g:3};return ue(e,\"type\",t),t}],[\"decimalConstantExpr\",e=>{let t={type:4,g:3};return ue(e,\"type\",t),t}],[\"stringConstantExpr\",e=>{let t={type:1,g:3};return ue(e,\"type\",t),t}],[\"functionCallExpr\",(e,t)=>{let n=O(e,\"arguments\");return Z(n,\"*\").map(r=>pe(r,t)),b0(e,t)}],[\"arrowExpr\",(e,t)=>(pe(O(e,\"argExpr\")[1],t),P0(e,t))],[\"dynamicFunctionInvocationExpr\",(e,t)=>(pe(K(e,[\"functionItem\",\"*\"]),t),(e=O(e,\"arguments\"))&&pe(e,t),{type:59,g:2})],[\"namedFunctionRef\",(e,t)=>q0(e,t)],[\"inlineFunctionExpr\",(e,t)=>(pe(O(e,\"functionBody\")[1],t),t={type:60,g:3},ue(e,\"type\",t),t)],[\"castExpr\",e=>{var t=K(e,[\"singleType\",\"atomicType\"]);return t=te(t,\"prefix\")+\":\"+t[2],t={type:ht(t),g:3},t.type!==59&&ue(e,\"type\",t),t}],[\"castableExpr\",e=>{let t={type:0,g:3};return ue(e,\"type\",t),t}],[\"simpleMapExpr\",(e,t)=>{let n=Z(e,\"pathExpr\"),r;for(let o=0;o<n.length;o++)r=pe(n[o],t);return r!=null?(t={type:r.type,g:2},t.type!==59&&ue(e,\"type\",t),e=t):e={type:59,g:2},e}],[\"mapConstructor\",(e,t)=>(Z(e,\"mapConstructorEntry\").map(n=>({key:pe(K(n,[\"mapKeyExpr\",\"*\"]),t),value:pe(K(n,[\"mapValueExpr\",\"*\"]),t)})),L0(e))],[\"arrayConstructor\",(e,t)=>(Z(O(e,\"*\"),\"arrayElem\").map(n=>pe(n,t)),U0(e))],[\"unaryLookup\",e=>(O(e,\"NCName\"),{type:59,g:2})],[\"typeswitchExpr\",(e,t)=>{let n=pe(O(e,\"argExpr\")[1],t),r=Z(e,\"typeswitchExprCaseClause\").map(a=>pe(K(a,[\"resultExpr\"])[1],t)),o=pe(K(e,[\"typeswitchExprDefaultClause\",\"resultExpr\"])[1],t);return V0(e,n,r,o)}],[\"quantifiedExpr\",(e,t)=>(Z(e,\"*\").map(n=>pe(n,t)),Q0(e))],[\"x:stackTrace\",(e,t)=>(e=Z(e,\"*\"),pe(e[0],t))],[\"queryBody\",(e,t)=>pe(e[1],t)],[\"flworExpr\",(e,t)=>j0(e,t)],[\"varRef\",(e,t)=>{let n=Fe(O(e,\"name\"));var r;e:{for(r=t.h;0<=r;r--){let o=t.o[r][n.localName];if(o){r=o;break e}}r=void 0}return r&&r.type!==59&&ue(e,\"type\",r),n.namespaceURI===null&&(t=t.Z(n.prefix),t!==void 0&&ue(e,\"URI\",t)),r}]]);function ea(e){e.h++,e.o.push({}),e.v.push({})}function jl(e,t,n){if(e.o[e.h][t])throw Error(`Another variable of in the scope ${e.h} with the same name ${t} already exists`);e.o[e.h][t]=n}var ta=class{constructor(e){this.h=0,this.fa=e,this.o=[{}],this.v=[{}]}Z(e){for(let t=this.h;0<=t;t--){let n=this.v[t][e];if(n!==void 0)return n}return this.fa?this.fa.Z(e):void 0}},K0=class extends Gn{constructor(e,t){super(e.reduce((n,r)=>0<hr(n,r.o)?n:r.o,new Ae({})),e,{B:e.every(n=>n.B)},t)}A(e,t,n){for(let r of n)if(t=r(e),!t.isEmpty())return t;return w.empty()}};let $l=new Map([[\"type-1-or-type-2\",[\"name\",\"type-1\",\"type-2\"]],[\"type-1\",[\"name\"]],[\"type-2\",[\"name\"]]]),bl=new Map([[\"name\",\"type-1-or-type-2\"],[\"type-1\",\"type-1-or-type-2\"],[\"type-2\",\"type-1-or-type-2\"]]);function ft(e,t){if(e===null)return t;if(t===null||e===t)return e;let n=e.startsWith(\"name-\")?\"name\":e,r=t.startsWith(\"name-\")?\"name\":t,o=$l.get(n);return o!==void 0&&o.includes(r)?t:(t=$l.get(r),t!==void 0&&t.includes(n)?e:\"empty\")}function Ll(e,t){if(e===null||t===null)return null;if(e===\"empty\")return t;if(t===\"empty\"||e===t)return e;e=e.startsWith(\"name-\")?\"name\":e;var n=t.startsWith(\"name-\")?\"name\":t;return t=bl.get(e),t!==void 0&&t===n?t:(n=bl.get(n),n!==void 0&&n===e?n:t===n?t:null)}var oo=class extends he{constructor(e){super(e,[],{B:!1})}h(e,t){return this.l(e,e.L,t)?w.$():w.S()}},z0=class extends oo{constructor(e){super(e.reduce((n,r)=>0<hr(n,r.o)?n:r.o,new Ae({})));let t;for(let n=0;n<e.length;++n){let r=e[n].D();if(t===void 0&&(t=r),t===null)break;t=Ll(t,r)}this.A=t,this.s=e}l(e,t,n){return this.s.some(r=>r.l(e,t,n))}D(){return this.A}v(e){this.s.forEach(t=>t.v(e))}},W0=class extends he{constructor(e,t){super(new Ae({external:1}),e,{B:e.every(n=>n.B)},!1,t),this.l=e}h(e,t){return this.l.length===0?w.m(new rt([])):oe(this.l[0],e,t).M(n=>w.m(new rt(n.map(r=>je(w.m(r))))))}},Z0=class extends he{constructor(e,t){super(new Ae({external:1}),e,{B:e.every(n=>n.B)},!1,t),this.l=e}h(e,t){return w.m(new rt(this.l.map(n=>je(oe(n,e,t)))))}};function Lt(e){if(e===null)throw Ft(\"context is absent, it needs to be present to use axes.\");if(!B(e.type,53))throw Error(\"XPTY0020: Axes can only be applied to nodes.\");return e.value}function ed(e,t,n){let r=t;return{next:()=>{if(!r)return W;let o=r;return r=we(e,o,n),Q(Ce(o))}}}var ql=class extends he{constructor(e,t){t=t||{Sa:!1},super(e.o,[e],{P:\"reverse-sorted\",V:!1,subtree:!1,B:!1}),this.l=e,this.s=!!t.Sa}h(e,t){let n=t.h,r=Lt(e.L);var o=this.l.D();return o=o&&(o.startsWith(\"name-\")||o===\"type-1\")?\"type-1\":null,w.create(ed(n,this.s?r:we(n,r,o),o)).filter(a=>this.l.l(e,a,t))}},td=class extends he{constructor(e,t){super(new Ae({attribute:1}),[e],{P:\"unsorted\",subtree:!0,V:!0,B:!1}),this.l=e,this.s=ft(this.l.D(),t)}h(e,t){var n=t.h;let r=Lt(e.L);return r.node.nodeType!==1?w.empty():(n=or(n,r,this.s).filter(o=>o.node.namespaceURI!==\"http://www.w3.org/2000/xmlns/\").map(o=>Ce(o)).filter(o=>this.l.l(e,o,t)),w.create(n))}D(){return\"type-1\"}},nd=class extends he{constructor(e,t){super(e.o,[e],{P:\"sorted\",subtree:!0,V:!0,B:!1}),this.s=e,this.l=ft(t,e.D())}h(e,t){let n=t.h,r=Lt(e.L),o=r.node.nodeType;if(o!==1&&o!==9)return w.empty();let a=null,s=!1;return w.create({next:()=>{for(;!s;){if(!a){if(a=Oo(n,r,this.l),!a){s=!0;continue}return Q(Ce(a))}if(a=ln(n,a,this.l))return Q(Ce(a));s=!0}return W}}).filter(l=>this.s.l(e,l,t))}};function Ci(e,t,n){let r=t.node.nodeType;if(r!==1&&r!==9)return{next:()=>W};let o=Oo(e,t,n);return{next(){if(!o)return W;let a=o;return o=ln(e,o,n),Q(a)}}}function rd(e,t,n){let r=[tn(t)];return{next:o=>{if(0<r.length&&(o&1)!==0&&r.shift(),!r.length)return W;for(o=r[0].next(0);o.done;){if(r.shift(),!r.length)return W;o=r[0].next(0)}return r.unshift(Ci(e,o.value,n)),Q(Ce(o.value))}}}var Yl=class extends he{constructor(e,t){t=t||{Sa:!1},super(e.o,[e],{B:!1,V:!1,P:\"sorted\",subtree:!0}),this.l=e,this.s=!!t.Sa,this.A=(e=this.l.D())&&(e.startsWith(\"name-\")||e===\"type-1\")||e===\"type-1-or-type-2\"?\"type-1\":null}h(e,t){var n=t.h;let r=Lt(e.L);return n=rd(n,r,this.A),this.s||n.next(0),w.create(n).filter(o=>this.l.l(e,o,t))}};function Ql(e,t,n){var r=e.node.nodeType;if(r!==1&&r!==9)return e;for(r=tu(t,e,n);r!==null;){if(r.node.nodeType!==1)return r;e=r,r=tu(t,e,n)}return e}function _l(e,t,n=!1,r){if(n){let a=t,s=!1;return{next:()=>{if(s)return W;if(Ye(a,t))return a=Ql(t,e,r),Ye(a,t)?(s=!0,W):Q(Ce(a));let l=a.node.nodeType,p=l===9||l===2?null:Yr(e,a,r);return p!==null?(a=Ql(p,e,r),Q(Ce(a))):(a=l===9?null:we(e,a,r),Ye(a,t)?(s=!0,W):Q(Ce(a)))}}}let o=[Ci(e,t,r)];return{next:()=>{if(!o.length)return W;let a=o[0].next(0);for(;a.done;){if(o.shift(),!o.length)return W;a=o[0].next(0)}return o.unshift(Ci(e,a.value,r)),Q(Ce(a.value))}}}function od(e,t,n){let r=[];for(;t&&t.node.nodeType!==9;t=we(e,t,null)){let a=ln(e,t,n);a&&r.push(a)}let o=null;return{next:()=>{for(;o||r.length;){if(!o){o=_l(e,r[0],!1,n);var a=Q(Ce(r[0]));let s=ln(e,r[0],n);return s?r[0]=s:r.shift(),a}if(a=o.next(0),a.done)o=null;else return a}return W}}}var ad=class extends he{constructor(e){super(e.o,[e],{P:\"sorted\",V:!0,subtree:!1,B:!1}),this.l=e,this.s=(e=this.l.D())&&(e.startsWith(\"name-\")||e===\"type-1\")?\"type-1\":null}h(e,t){let n=t.h,r=Lt(e.L);return w.create(od(n,r,this.s)).filter(o=>this.l.l(e,o,t))}};function id(e,t,n){return{next:()=>(t=t&&ln(e,t,n))?Q(Ce(t)):W}}var sd=class extends he{constructor(e,t){super(e.o,[e],{P:\"sorted\",V:!0,subtree:!1,B:!1}),this.l=e,this.s=ft(this.l.D(),t)}h(e,t){let n=t.h,r=Lt(e.L);return w.create(id(n,r,this.s)).filter(o=>this.l.l(e,o,t))}},ud=class extends he{constructor(e,t){super(e.o,[e],{P:\"reverse-sorted\",V:!0,subtree:!0,B:!1}),this.l=e,this.s=ft(t,this.l.D())}h(e,t){var n=t.h;let r=Lt(e.L);return n=we(n,r,this.s),n?(n=Ce(n),this.l.l(e,n,t)?w.m(n):w.empty()):w.empty()}};function ld(e,t,n){let r=[];for(;t&&t.node.nodeType!==9;t=we(e,t,null)){let a=Yr(e,t,n);a!==null&&r.push(a)}let o=null;return{next:()=>{for(;o||r.length;){o||(o=_l(e,r[0],!0,n));var a=o.next(0);if(a.done){o=null,a=Yr(e,r[0],n);let s=Q(Ce(r[0]));return a===null?r.shift():r[0]=a,s}return a}return W}}}var cd=class extends he{constructor(e){super(e.o,[e],{B:!1,V:!0,P:\"reverse-sorted\",subtree:!1}),this.l=e,this.s=(e=this.l.D())&&(e.startsWith(\"name-\")||e===\"type-1\")?\"type-1\":null}h(e,t){let n=t.h,r=Lt(e.L);return w.create(ld(n,r,this.s)).filter(o=>this.l.l(e,o,t))}};function pd(e,t,n){return{next:()=>(t=t&&Yr(e,t,n))?Q(Ce(t)):W}}var hd=class extends he{constructor(e,t){super(e.o,[e],{B:!1,V:!0,P:\"reverse-sorted\",subtree:!1}),this.l=e,this.s=ft(this.l.D(),t)}h(e,t){let n=t.h,r=Lt(e.L);return w.create(pd(n,r,this.s)).filter(o=>this.l.l(e,o,t))}},fd=class extends he{constructor(e,t){super(e.o,[e],{P:\"sorted\",subtree:!0,V:!0,B:!1}),this.l=e,this.s=ft(this.l.D(),t)}h(e,t){return Lt(e.L),this.l.l(e,e.L,t)?w.m(e.L):w.empty()}D(){return this.s}},dd=class extends Gn{constructor(e,t,n,r){super(e.o.add(t.o).add(n.o),[e,t,n],{B:e.B&&t.B&&n.B,V:t.V===n.V&&t.V,P:t.ha===n.ha?t.ha:\"unsorted\",subtree:t.subtree===n.subtree&&t.subtree},r),this.l=e}A(e,t,n){let r=null,o=n[0](e);return w.create({next:a=>(r||(r=(o.ea()?n[1](e):n[2](e)).value),r.next(a))})}v(e){if(super.v(e),this.l.H)throw nn()}};function Vl(e){return e.h instanceof Error?e.location:Vl(e.h)}function Jl(e){let t;return t=e.h instanceof Nl?[\"Inner error:\",e.h.message]:e.h instanceof Error?[e.h.toString()]:Jl(e.h),t.push(`  at <${e.o}${e.Xa?` (${e.Xa})`:\"\"}>:${e.location.start.line}:${e.location.start.ga} - ${e.location.end.line}:${e.location.end.ga}`),t}var na=class{constructor(e,t,n,r){this.location=e,this.o=t,this.Xa=n,this.h=r}},md=class extends Gn{constructor(e,t,n,r){super(n.o,[n],{B:n.B,V:n.V,P:n.ha,subtree:n.subtree}),this.K=t,this.O={end:{ga:e.end.ga,line:e.end.line,offset:e.end.offset},start:{ga:e.start.ga,line:e.start.line,offset:e.start.offset}},this.l=r}A(e,t,[n]){let r;try{r=n(e)}catch(o){throw new na(this.O,this.K,this.l,o)}return w.create({next:o=>{try{return r.value.next(o)}catch(a){throw new na(this.O,this.K,this.l,a)}}})}v(e){try{super.v(e)}catch(t){throw new na(this.O,this.K,this.l,t)}}D(){return this.Ga[0].D()}};function Kl(e,t,n,r){let o=[],a=e.K(t,n,r,l=>{if(e.l instanceof Mn){let m=Kl(e.l,t,l,r);return pr(m,T=>o=T)}let p=null;return w.create({next:()=>{for(;;){if(!p){var m=l.next(0);if(m.done)return W;m=e.l.s(m.value,r),p=pr(m,T=>o=St(o,T)).value}if(m=p.next(0),m.done)p=null;else return m}}})}),s=!1;return{next:()=>{if(s)return W;let l=a.N();return s=!0,Q(new rl(l,o))}}}function zl(e,t,n,r){return e.K(t,n,r,o=>{if(e.l instanceof Mn)return zl(e.l,t,o,r);let a=null;return w.create({next:()=>{for(;;){if(!a){var s=o.next(0);if(s.done)return W;a=oe(e.l,s.value,r).value}if(s=a.next(0),s.done)a=null;else return s}}})})}var Mn=class extends he{constructor(e,t,n,r){super(e,t,n,!0),this.l=r,this.H=this.l.H}h(e,t){return this.K(e,tn(e),t,n=>{if(this.l instanceof Mn)return zl(this.l,e,n,t);let r=null;return w.create({next:o=>{for(;;){if(!r){var a=n.next(0);if(a.done)return W;r=oe(this.l,a.value,t).value}if(a=r.next(o),a.done)r=null;else return a}}})})}s(e,t){return Kl(this,e,tn(e),t)}v(e){super.v(e),this.H=this.l.H;for(let t of this.Ga)if(t!==this.l&&t.H)throw nn()}},gd=class extends Mn{constructor(e,t,n,r){super(t.o.add(r.o),[t,r],{B:!1},r),this.O=e.prefix,this.la=e.namespaceURI,this.Rb=e.localName,this.yb=null,this.A=n,this.Ma=null,this.ya=t}K(e,t,n,r){let o=null,a=null,s=0;return r({next:()=>{for(;;){if(!o){var l=t.next(0);if(l.done)return W;a=l.value,s=0,o=oe(this.ya,a,n).value}let p=o.next(0);if(p.done)o=null;else return s++,l={[this.yb]:()=>w.m(p.value)},this.Ma&&(l[this.Ma]=()=>w.m(new In(5,s))),Q(pn(a,l))}}})}v(e){if(this.O&&(this.la=e.Z(this.O),!this.la&&this.O))throw Error(`XPST0081: Could not resolve namespace for prefix ${this.O} in a for expression`);if(this.ya.v(e),mr(e),this.yb=bt(e,this.la,this.Rb),this.A){if(this.A.prefix&&(this.A.namespaceURI=e.Z(this.A.prefix),!this.A.namespaceURI&&this.A.prefix))throw Error(`XPST0081: Could not resolve namespace for prefix ${this.O} in the positionalVariableBinding in a for expression`);this.Ma=bt(e,this.A.namespaceURI,this.A.localName)}if(this.l.v(e),gr(e),this.ya.H)throw nn();this.l.H&&(this.H=!0)}},yd=class extends he{constructor(e,t,n){super(new Ae({external:1}),[n],{B:!1,P:\"unsorted\"}),this.O=e.map(({name:r})=>r),this.A=e.map(({type:r})=>r),this.s=null,this.K=t,this.l=n}h(e,t){let n=new sn({j:this.A,arity:this.A.length,bb:!0,H:this.l.H,localName:\"dynamic-function\",namespaceURI:\"\",i:this.K,value:(r,o,a,...s)=>(r=pn(Zt(e,-1,null,w.empty()),this.s.reduce((l,p,m)=>(l[p]=je(s[m]),l),Object.create(null))),oe(this.l,r,t))});return w.m(n)}v(e){if(mr(e),this.s=this.O.map(t=>bt(e,t.namespaceURI,t.localName)),this.l.v(e),gr(e),this.l.H)throw Error(\"Not implemented: inline functions can not yet be updating.\")}},wd=class extends Mn{constructor(e,t,n){if(super(t.o.add(n.o),[t,n],{B:!1,V:n.V,P:n.ha,subtree:n.subtree},n),e.prefix||e.namespaceURI)throw Error(\"Not implemented: let expressions with namespace usage.\");this.A=e.prefix,this.O=e.namespaceURI,this.Ma=e.localName,this.la=t,this.ya=null}K(e,t,n,r){return r({next:()=>{var o=t.next(0);return o.done?W:(o=o.value,o=pn(o,{[this.ya]:je(oe(this.la,o,n))}),Q(o))}})}v(e){if(this.A&&(this.O=e.Z(this.A),!this.O&&this.A))throw Error(`XPST0081: Could not resolve namespace for prefix ${this.A} using in a for expression`);if(this.la.v(e),mr(e),this.ya=bt(e,this.O,this.Ma),this.l.v(e),gr(e),this.H=this.l.H,this.la.H)throw nn()}},vr=class extends he{constructor(e,t){super(new Ae({}),[],{B:!0,P:\"sorted\"},!1,t);let n;switch(t.type){case 5:n=N(parseInt(e,10),t.type);break;case 1:n=N(e,t.type);break;case 4:case 3:n=N(parseFloat(e),t.type);break;default:throw new TypeError(\"Type \"+t+\" not expected in a literal\")}this.l=()=>w.m(n)}h(){return this.l()}},Ad=class extends he{constructor(e,t){super(new Ae({external:1}),e.reduce((n,{key:r,value:o})=>n.concat(r,o),[]),{B:!1},!1,t),this.l=e}h(e,t){let n=this.l.map(r=>$e(oe(r.key,e,t),t).X({default:()=>{throw Error(\"XPTY0004: A key of a map should be a single atomizable value.\")},m:o=>o}));return ve(n,r=>w.m(new Wt(r.map((o,a)=>({key:o,value:je(oe(this.l[a].value,e,t))})))))}},ao=class extends he{constructor(e,t,n){super(new Ae({external:1}),[],{B:!0},!1,n),this.s=t,this.A=e,this.l=null}h(){let e=new sn({j:this.l.j,H:this.l.H,arity:this.s,localName:this.l.localName,namespaceURI:this.l.namespaceURI,i:this.l.i,value:this.l.callFunction});return w.m(e)}v(e){let t=this.A.namespaceURI,n=this.A.localName,r=this.A.prefix;if(t===null){let o=e.Ua({localName:n,prefix:r},this.s);if(!o)throw Error(`XPST0017: The function ${r?r+\":\":\"\"}${n} with arity ${this.s} could not be resolved. ${vi(n)}`);t=o.namespaceURI,n=o.localName}if(this.l=e.ua(t,n,this.s)||null,!this.l)throw e=this.A,Error(`XPST0017: Function ${`${e.namespaceURI?`Q{${e.namespaceURI}}`:e.prefix?`${e.prefix}:`:\"\"}${e.localName}`} with arity of ${this.s} not registered. ${vi(n)}`);super.v(e)}};let vd={5:5,27:5,28:5,31:5,32:5,33:5,34:5,30:5,36:5,35:5,38:5,37:5,29:5,4:4,6:6,3:3};var Wl=class extends he{constructor(e,t,n){super(t.o,[t],{B:!1},!1,n),this.s=t,this.l=e}h(e,t){return $e(oe(this.s,e,t),t).M(n=>{if(n.length===0)return w.empty();var r=n[0];if(this.type)return n=this.l===\"+\"?+r.value:-r.value,r.type===0&&(n=Number.NaN),w.m(N(n,this.type.type));if(1<n.length)throw Error(\"XPTY0004: The operand to a unary operator must be a sequence with a length less than one\");return B(r.type,19)?(r=Te(r,3).value,w.m(N(this.l===\"+\"?r:-r,3))):B(r.type,2)?this.l===\"+\"?w.m(r):w.m(N(-1*r.value,vd[r.type])):w.m(N(Number.NaN,3))})}},xd=class extends he{constructor(e,t){super(e.reduce((n,r)=>n.add(r.o),new Ae({})),e,{B:e.every(n=>n.B)},!1,t),this.l=e,this.s=e.reduce((n,r)=>ft(n,r.D()),null)}h(e,t){let n=0,r=null,o=!1,a=null;if(e!==null){let s=e.L;s!==null&&B(s.type,53)&&(a=Zs(s.value))}return w.create({next:()=>{if(!o){for(;n<this.l.length;){if(!r){let s=this.l[n];if(a!==null&&s.D()!==null&&!a.includes(s.D()))return n++,o=!0,Q(Me);r=oe(s,e,t)}if(r.ea()===!1)return o=!0,Q(Me);r=null,n++}return o=!0,Q(Xe)}return W}})}D(){return this.s}},Nd=class extends he{constructor(e,t){super(e.reduce((r,o)=>0<hr(r,o.o)?r:o.o,new Ae({})),e,{B:e.every(r=>r.B)},!1,t);let n;for(t=0;t<e.length;++t){let r=e[t].D();if(n===void 0&&(n=r),n===null)break;n=Ll(n,r)}this.s=n,this.l=e}h(e,t){let n=0,r=null,o=!1,a=null;if(e!==null){let s=e.L;s!==null&&B(s.type,53)&&(a=Zs(s.value))}return w.create({next:()=>{if(!o){for(;n<this.l.length;){if(!r){let s=this.l[n];if(a!==null&&s.D()!==null&&!a.includes(s.D())){n++;continue}r=oe(s,e,t)}if(r.ea()===!0)return o=!0,Q(Xe);r=null,n++}return o=!0,Q(Me)}return W}})}D(){return this.s}};function xr(e,t){let n;return w.create({next:r=>{for(;;){if(!n){var o=e.value.next(r);if(o.done)return W;n=en(o.value,t)}if(o=n.value.next(r),o.done)n=null;else return o}}})}function Bd(e,t){if(e===\"eqOp\")return(n,r)=>{let{T:o,U:a}=t(n,r);return o.value.namespaceURI===a.value.namespaceURI&&o.value.localName===a.value.localName};if(e===\"neOp\")return(n,r)=>{let{T:o,U:a}=t(n,r);return o.value.namespaceURI!==a.value.namespaceURI||o.value.localName!==a.value.localName};throw Error('XPTY0004: Only the \"eq\" and \"ne\" comparison is defined for xs:QName')}function Ed(e,t){switch(e){case\"eqOp\":return(n,r)=>{let{T:o,U:a}=t(n,r);return o.value===a.value};case\"neOp\":return(n,r)=>{let{T:o,U:a}=t(n,r);return o.value!==a.value};case\"ltOp\":return(n,r)=>{let{T:o,U:a}=t(n,r);return o.value<a.value};case\"leOp\":return(n,r)=>{let{T:o,U:a}=t(n,r);return o.value<=a.value};case\"gtOp\":return(n,r)=>{let{T:o,U:a}=t(n,r);return o.value>a.value};case\"geOp\":return(n,r)=>{let{T:o,U:a}=t(n,r);return o.value>=a.value}}}function Id(e,t){switch(e){case\"ltOp\":return(n,r)=>{let{T:o,U:a}=t(n,r);return o.value.da<a.value.da};case\"leOp\":return(n,r)=>{let{T:o,U:a}=t(n,r);return o.value.equals(a.value)||o.value.da<a.value.da};case\"gtOp\":return(n,r)=>{let{T:o,U:a}=t(n,r);return o.value.da>a.value.da};case\"geOp\":return(n,r)=>{let{T:o,U:a}=t(n,r);return o.value.equals(a.value)||o.value.da>a.value.da}}}function Td(e,t){switch(e){case\"eqOp\":return(n,r)=>{let{T:o,U:a}=t(n,r);return o.value.equals(a.value)};case\"ltOp\":return(n,r)=>{let{T:o,U:a}=t(n,r);return o.value.ba<a.value.ba};case\"leOp\":return(n,r)=>{let{T:o,U:a}=t(n,r);return o.value.equals(a.value)||o.value.ba<a.value.ba};case\"gtOp\":return(n,r)=>{let{T:o,U:a}=t(n,r);return o.value.ba>a.value.ba};case\"geOp\":return(n,r)=>{let{T:o,U:a}=t(n,r);return o.value.equals(a.value)||o.value.ba>a.value.ba}}}function Cd(e,t){switch(e){case\"eqOp\":return(n,r)=>{let{T:o,U:a}=t(n,r);return o.value.equals(a.value)};case\"neOp\":return(n,r)=>{let{T:o,U:a}=t(n,r);return!o.value.equals(a.value)}}}function Fd(e,t){switch(e){case\"eqOp\":return(n,r,o)=>{let{T:a,U:s}=t(n,r);return Sn(a.value,s.value,Tt(o))};case\"neOp\":return(n,r,o)=>{let{T:a,U:s}=t(n,r);return!Sn(a.value,s.value,Tt(o))};case\"ltOp\":return(n,r,o)=>{let{T:a,U:s}=t(n,r);return n=Tt(o),0>Jr(a.value,s.value,n)};case\"leOp\":return(n,r,o)=>{let{T:a,U:s}=t(n,r);return(n=Sn(a.value,s.value,Tt(o)))||(o=Tt(o),n=0>Jr(a.value,s.value,o)),n};case\"gtOp\":return(n,r,o)=>{let{T:a,U:s}=t(n,r);return n=Tt(o),0<Jr(a.value,s.value,n)};case\"geOp\":return(n,r,o)=>{let{T:a,U:s}=t(n,r);return(n=Sn(a.value,s.value,Tt(o)))||(o=Tt(o),n=0<Jr(a.value,s.value,o)),n}}}function Sd(e,t){switch(e){case\"eqOp\":return(n,r,o)=>{let{T:a,U:s}=t(n,r);return Sn(a.value,s.value,Tt(o))};case\"neOp\":return(n,r,o)=>{let{T:a,U:s}=t(n,r);return!Sn(a.value,s.value,Tt(o))}}}function Rd(e,t,n){function r(m,T){return{T:s?s(m):m,U:l?l(T):T}}function o(m){return B(t,m)&&B(n,m)}function a(m){return 0<m.filter(T=>B(t,T)).length&&0<m.filter(T=>B(n,T)).length}let s=null,l=null;if(B(t,19)&&B(n,19)?t=n=1:B(t,19)?(s=m=>Te(m,n),t=n):B(n,19)&&(l=m=>Te(m,t),n=t),B(t,23)&&B(n,23))return Bd(e,r);if(o(0)||a([1,47,61])||a([2,47,61])||o(20)||o(22)||o(21)||a([1,20])){var p=Ed(e,r);if(p!==void 0)return p}if(o(16)&&(p=Id(e,r),p!==void 0)||o(17)&&(p=Td(e,r),p!==void 0)||o(18)&&(p=Cd(e,r),p!==void 0)||(o(9)||o(7)||o(8))&&(p=Fd(e,r),p!==void 0)||(o(11)||o(12)||o(13)||o(14)||o(15))&&(p=Sd(e,r),p!==void 0))return p;throw Error(`XPTY0004: ${e} not available for ${Be[t]} and ${Be[n]}`)}let Zl=Object.create(null);function ra(e,t,n){let r=`${t}~${n}~${e}`,o=Zl[r];return o||(o=Zl[r]=Rd(e,t,n)),o}var Od=class extends he{constructor(e,t,n){super(t.o.add(n.o),[t,n],{B:!1}),this.l=t,this.A=n,this.s=e}h(e,t){let n=oe(this.l,e,t),r=oe(this.A,e,t),o=xr(n,t),a=xr(r,t);return o.X({empty:()=>w.empty(),m:()=>a.X({empty:()=>w.empty(),m:()=>{let s=o.first(),l=a.first();return ra(this.s,s.type,l.type)(s,l,e)?w.$():w.S()},multiple:()=>{throw Error(\"XPTY0004: Sequences to compare are not singleton.\")}}),multiple:()=>{throw Error(\"XPTY0004: Sequences to compare are not singleton.\")}})}};let Gd={equalOp:\"eqOp\",notEqualOp:\"neOp\",lessThanOrEqualOp:\"leOp\",lessThanOp:\"ltOp\",greaterThanOrEqualOp:\"geOp\",greaterThanOp:\"gtOp\"};function Dd(e,t,n,r){return e=Gd[e],n.M(o=>t.filter(a=>{for(let p=0,m=o.length;p<m;++p){let T=o[p],R,X;var s=a.type,l=T.type;(B(s,19)||B(l,19))&&(B(s,2)?R=3:B(l,2)?X=3:B(s,17)?R=17:B(l,17)?X=17:B(s,16)?R=16:B(l,16)?X=16:B(s,19)?X=l:B(l,19)&&(R=s));let[P,V]=[X,R];if(s=P,l=V,s?a=Te(a,s):l&&(T=Te(T,l)),ra(e,a.type,T.type)(a,T,r))return!0}return!1}).X({default:()=>w.$(),empty:()=>w.S()}))}var kd=class extends he{constructor(e,t,n){super(t.o.add(n.o),[t,n],{B:!1}),this.l=t,this.A=n,this.s=e}h(e,t){let n=oe(this.l,e,t),r=oe(this.A,e,t);return n.X({empty:()=>w.S(),default:()=>r.X({empty:()=>w.S(),default:()=>{let o=xr(n,t),a=xr(r,t);return Dd(this.s,o,a,e)}})})}};function Md(e,t,n,r){if(!B(n,53)||!B(r,53))throw Error(\"XPTY0004: Sequences to compare are not nodes\");switch(e){case\"isOp\":return Ud(n,r);case\"nodeBeforeOp\":return t?(o,a)=>0>zr(t,o.first(),a.first()):void 0;case\"nodeAfterOp\":return t?(o,a)=>0<zr(t,o.first(),a.first()):void 0;default:throw Error(\"Unexpected operator\")}}function Ud(e,t){return e!==t||e!==47&&e!==53&&e!==54&&e!==55&&e!==56&&e!==57&&e!==58?()=>!1:(n,r)=>Ye(n.first().value,r.first().value)}var Pd=class extends he{constructor(e,t,n){super(t.o.add(n.o),[t,n],{B:!1}),this.l=t,this.A=n,this.s=e}h(e,t){let n=oe(this.l,e,t),r=oe(this.A,e,t);return n.X({empty:()=>w.empty(),multiple:()=>{throw Error(\"XPTY0004: Sequences to compare are not singleton\")},m:()=>r.X({empty:()=>w.empty(),multiple:()=>{throw Error(\"XPTY0004: Sequences to compare are not singleton\")},m:()=>{let o=n.first(),a=r.first();return Md(this.s,t.h,o.type,a.type)(n,r,e)?w.$():w.S()}})})}};function ec(e,t,n,r){return n.M(o=>{if(o.some(a=>!B(a.type,53)))throw Error(`XPTY0004: Sequences given to ${e} should only contain nodes.`);return r===\"sorted\"?w.create(o):r===\"reverse-sorted\"?w.create(o.reverse()):w.create(Wr(t,o))})}var Hd=class extends he{constructor(e,t,n,r){super(0<hr(t.o,n.o)?t.o:n.o,[t,n],{B:t.B&&n.B},!1,r),this.l=e,this.s=t,this.A=n}h(e,t){let n=ec(this.l,t.h,oe(this.s,e,t),this.s.ha);e=ec(this.l,t.h,oe(this.A,e,t),this.A.ha);let r=n.value,o=e.value,a=null,s=null,l=!1,p=!1;return w.create({next:()=>{if(l)return W;for(;!p;){if(!a){var m=r.next(0);if(m.done)return l=!0,W;a=m.value}if(!s){if(m=o.next(0),m.done){p=!0;break}s=m.value}if(Ye(a.value,s.value)){if(m=Q(a),s=a=null,this.l===\"intersectOp\")return m}else if(0>zr(t.h,a,s)){if(m=Q(a),a=null,this.l===\"exceptOp\")return m}else s=null}return this.l===\"exceptOp\"?a!==null?(m=Q(a),a=null,m):r.next(0):(l=!0,W)}})}},Fi=class extends Gn{constructor(e,t){super(e.reduce((n,r)=>n.add(r.o),new Ae({})),e,{P:\"unsorted\",B:e.every(n=>n.B)},t)}A(e,t,n){return n.length?Ct(n.map(r=>r(e))):w.empty()}},Xd=class extends he{constructor(e,t,n){super(new Ae({}).add(e.o),[e,t],{B:e.B&&t.B},!1,n),this.l=e,this.s=t}h(e,t){let n=oe(this.l,e,t),r=uu(e,n),o=null,a=null,s=!1;return w.create({next:l=>{for(;!s;){if(!o&&(o=r.next(l),o.done))return s=!0,W;a||(a=oe(this.s,o.value,t));let p=a.value.next(l);if(p.done)o=a=null;else return p}}})}},jd=class extends he{constructor(e,t,n){if(super(e.o,[e],{B:!1}),this.l=ht(t.prefix?`${t.prefix}:${t.localName}`:t.localName),this.l===46||this.l===45||this.l===44)throw Error(\"XPST0080: Casting to xs:anyAtomicType, xs:anySimpleType or xs:NOTATION is not permitted.\");if(t.namespaceURI)throw Error(\"Not implemented: castable as expressions with a namespace URI.\");this.A=e,this.s=n}h(e,t){let n=$e(oe(this.A,e,t),t);return n.X({empty:()=>this.s?w.$():w.S(),m:()=>n.map(r=>ri(r,this.l).u?Xe:Me),multiple:()=>w.S()})}},$d=class extends he{constructor(e,t,n){if(super(e.o,[e],{B:!1}),this.l=ht(t.prefix?`${t.prefix}:${t.localName}`:t.localName),this.l===46||this.l===45||this.l===44)throw Error(\"XPST0080: Casting to xs:anyAtomicType, xs:anySimpleType or xs:NOTATION is not permitted.\");if(t.namespaceURI)throw Error(\"Not implemented: casting expressions with a namespace URI.\");this.A=e,this.s=n}h(e,t){let n=$e(oe(this.A,e,t),t);return n.X({empty:()=>{if(!this.s)throw Error(\"XPTY0004: Sequence to cast is empty while target type is singleton.\");return w.empty()},m:()=>n.map(r=>Te(r,this.l)),multiple:()=>{throw Error(\"XPTY0004: Sequence to cast is not singleton or empty.\")}})}};function tc(e,t){let n=e.value,r=null,o=!1;return w.create({next:()=>{for(;!o;){if(!r){var a=n.next(0);if(a.done)return o=!0,Q(Xe);r=t(a.value)}if(a=r.ea(),r=null,a===!1)return o=!0,Q(Me)}return W}})}var bd=class extends he{constructor(e,t,n,r){super(e.o,[e,t],{B:!1},!1,r),this.A=e,this.s=t,this.l=n}h(e,t){let n=oe(this.A,e,t);return n.X({empty:()=>this.l===\"?\"||this.l===\"*\"?w.$():w.S(),multiple:()=>this.l===\"+\"||this.l===\"*\"?tc(n,r=>{let o=w.m(r);return r=Zt(e,0,r,o),oe(this.s,r,t)}):w.S(),m:()=>tc(n,r=>{let o=w.m(r);return r=Zt(e,0,r,o),oe(this.s,r,t)})})}};function nc(e,t){return e!==null&&t!==null&&B(e.type,53)&&B(t.type,53)?Ye(e.value,t.value):!1}function Si(e){let t=e.next(0);if(t.done)return w.empty();let n=null,r=null;return w.create({next(o){if(t.done)return W;n||(n=t.value.value);let a;do if(a=n.next(o),a.done){if(t=e.next(0),t.done)return a;n=t.value.value}while(a.done||nc(a.value,r));return r=a.value,a}})}function rc(e,t){let n=[];(function(){for(var a=t.next(0);!a.done;){let s=a.value.value;a={current:s.next(0),next:l=>s.next(l)},a.current.done||n.push(a),a=t.next(0)}})();let r=null,o=!1;return w.create({[Symbol.iterator](){return this},next:()=>{o||(o=!0,n.every(s=>B(s.current.value.type,53))&&n.sort((s,l)=>zr(e,s.current.value,l.current.value)));let a;do{if(!n.length)return W;let s=n.shift();if(a=s.current,s.current=s.next(0),!B(a.value.type,53))return a;if(!s.current.done){let l=0,p=n.length-1,m=0;for(;l<=p;){m=Math.floor((l+p)/2);let T=zr(e,s.current.value,n[m].current.value);if(T===0){l=m;break}0<T?l=m+1:p=m-1}n.splice(l,0,s)}}while(nc(a.value,r));return r=a.value,a}})}var Ld=class extends he{constructor(e,t){super(e.reduce((n,r)=>0<hr(n,r.o)?n:r.o,new Ae({})),e,{B:e.every(n=>n.B)},!1,t),this.l=e}h(e,t){if(this.l.every(n=>n.ha===\"sorted\")){let n=0;return rc(t.h,{next:()=>n>=this.l.length?W:Q(oe(this.l[n++],e,t))}).map(r=>{if(!B(r.type,53))throw Error(\"XPTY0004: The sequences to union are not of type node()*\");return r})}return Ct(this.l.map(n=>oe(n,e,t))).M(n=>{if(n.some(r=>!B(r.type,53)))throw Error(\"XPTY0004: The sequences to union are not of type node()*\");return n=Wr(t.h,n),w.create(n)})}};function oa(e){return e.every(t=>t===null||B(t.type,5)||B(t.type,4))||e.map(t=>t?Ho(t.type):null).reduce((t,n)=>n===null||n===t?t:null)!==null?e:e.every(t=>t===null||B(t.type,1)||B(t.type,20))?e.map(t=>t?Te(t,1):null):e.every(t=>t===null||B(t.type,4)||B(t.type,6))?e.map(t=>t&&Te(t,6)):e.every(t=>t===null||B(t.type,4)||B(t.type,6)||B(t.type,3))?e.map(t=>t&&Te(t,3)):null}function qd(e){return(e=e.find(t=>!!t))?Ho(e.type):null}var Yd=class extends Mn{constructor(e,t){super(new Ae({}),[t,...e.map(n=>n.aa)],{B:!1,V:!1,P:\"unsorted\",subtree:!1},t),this.A=e}K(e,t,n,r){if(this.A[1])throw Error(\"More than one order spec is not supported for the order by clause.\");let o=[],a=!1,s,l,p=null,m=this.A[0];return w.create({next:()=>{if(!a){for(var T=t.next(0);!T.done;)o.push(T.value),T=t.next(0);if(T=o.map(X=>m.aa.h(X,n)).map(X=>$e(X,n)),T.find(X=>!X.isEmpty()&&!X.oa()))throw Error(\"XPTY0004: Order by only accepts empty or singleton sequences\");if(s=T.map(X=>X.first()),s=s.map(X=>X===null?X:B(19,X.type)?Te(X,1):X),qd(s)&&(s=oa(s),!s))throw Error(\"XPTY0004: Could not cast values\");T=s.length,l=s.map((X,P)=>P);for(let X=0;X<T;X++)if(X+1!==T)for(let P=X;0<=P;P--){let V=P,se=P+1;if(se===T)continue;let fe=s[l[V]],Ee=s[l[se]];if(Ee!==null||fe!==null){if(m.ec){if(fe===null)continue;if(Ee===null&&fe!==null){[l[V],l[se]]=[l[se],l[V]];continue}if(isNaN(Ee.value)&&fe!==null&&!isNaN(fe.value)){[l[V],l[se]]=[l[se],l[V]];continue}}else{if(Ee===null)continue;if(fe===null&&Ee!==null){[l[V],l[se]]=[l[se],l[V]];continue}if(isNaN(fe.value)&&Ee!==null&&!isNaN(Ee.value)){[l[V],l[se]]=[l[se],l[V]];continue}}ra(\"gtOp\",fe.type,Ee.type)(fe,Ee,e)&&([l[V],l[se]]=[l[se],l[V]])}}let R=m.Cb?0:s.length-1;p=r({next:()=>m.Cb?R>=s.length?W:Q(o[l[R++]]):0>R?W:Q(o[l[R--]])}).value,a=!0}return p.next(0)}})}},oc=class extends he{constructor(e){super(e?e.o:new Ae({}),e?[e]:[],{P:\"sorted\",subtree:!1,V:!1,B:!1}),this.l=e}h(e,t){if(e.L===null)throw Ft(\"context is absent, it needs to be present to use paths.\");var n=t.h;let r=e.L.value;for(;r.node.nodeType!==9;)if(r=we(n,r),r===null)throw Error(\"XPDY0050: the root node of the context node is not a document node.\");return n=w.m(Ce(r)),this.l?oe(this.l,Zt(e,0,n.first(),n),t):n}},Qd=class extends he{constructor(e){super(new Ae({}),[],{P:\"sorted\"},!1,e)}h(e){if(e.L===null)throw Ft('context is absent, it needs to be present to use the \".\" operator');return w.m(e.L)}};function _d(e,t){let n=!1,r=!1;if(t.forEach(o=>{B(o.type,53)?n=!0:r=!0}),r&&n)throw Error(\"XPTY0018: The path operator should either return nodes or non-nodes. Mixed sequences are not allowed.\");return n?Wr(e,t):t}var Vd=class extends he{constructor(e,t){let n=e.every(o=>o.V),r=e.every(o=>o.subtree);super(e.reduce((o,a)=>o.add(a.o),new Ae({})),e,{B:!1,V:n,P:t?\"sorted\":\"unsorted\",subtree:r}),this.l=e,this.s=t}h(e,t){let n=!0;return this.l.reduce((r,o,a)=>{let s=r===null?tn(e):uu(e,r);r={next:p=>{if(p=s.next(p),p.done)return W;if(p.value.L!==null&&!B(p.value.L.type,53)&&0<a)throw Error(\"XPTY0019: The result of E1 in a path expression E1/E2 should not evaluate to a sequence of nodes.\");return Q(oe(o,p.value,t))}};let l;if(this.s)switch(o.ha){case\"reverse-sorted\":let p=r;r={next:m=>(m=p.next(m),m.done?m:Q(m.value.M(T=>w.create(T.reverse()))))};case\"sorted\":if(o.subtree&&n){l=Si(r);break}l=rc(t.h,r);break;case\"unsorted\":return Si(r).M(m=>w.create(_d(t.h,m)))}else l=Si(r);return n=n&&o.V,l},null)}D(){return this.l[0].D()}},Jd=class extends he{constructor(e,t){super(e.o.add(t.o),[e,t],{B:e.B&&t.B,V:e.V,P:e.ha,subtree:e.subtree}),this.s=e,this.l=t}h(e,t){let n=oe(this.s,e,t);if(this.l.B){let l=oe(this.l,e,t);if(l.isEmpty())return l;let p=l.first();if(B(p.type,2)){let m=p.value;if(!Number.isInteger(m))return w.empty();let T=n.value,R=!1;return w.create({next:()=>{if(!R){for(let X=T.next(0);!X.done;X=T.next(0))if(m--===1)return R=!0,X;R=!0}return W}})}return l.ea()?n:w.empty()}let r=n.value,o=null,a=0,s=null;return w.create({next:l=>{let p=!1;for(;(!o||!o.done)&&(o||(o=r.next(p?0:l),p=!0),!o.done);){s||(s=oe(this.l,Zt(e,a,o.value,n),t));var m=s.first();m=m===null?!1:B(m.type,2)?m.value===a+1:s.ea(),s=null;let T=o.value;if(o=null,a++,m)return Q(T)}return o}})}D(){return this.s.D()}};function ac(e,t,n){if(n=[n],B(e.type,62))if(t===\"*\")n.push(...e.members.map(r=>r()));else if(B(t.type,5)){let r=t.value;if(e.members.length<r||0>=r)throw Error(\"FOAY0001: Array index out of bounds\");n.push(e.members[r-1]())}else throw Error(\"XPTY0004: The key specifier is not an integer.\");else if(B(e.type,61))t===\"*\"?n.push(...e.h.map(r=>r.value())):(e=e.h.find(r=>ar(r.key,t)))&&n.push(e.value());else throw Error(\"XPTY0004: The provided context item is not a map or an array.\");return Ct(n)}function ic(e,t,n,r,o){return t===\"*\"?ac(e,t,n):(t=oe(t,r,o),t=je(t)().M(a=>a.reduce((s,l)=>ac(e,l,s),new nr)),Ct([n,t]))}var Kd=class extends he{constructor(e,t){super(e.o,[e].concat(t===\"*\"?[]:[t]),{B:e.B,P:e.ha,subtree:e.subtree}),this.l=e,this.s=t}h(e,t){return oe(this.l,e,t).M(n=>n.reduce((r,o)=>ic(o,this.s,r,e,t),new nr))}D(){return this.l.D()}},zd=class extends he{constructor(e,t){super(new Ae({external:1}),e===\"*\"?[]:[e],{B:!1},!1,t),this.l=e}h(e,t){return ic(e.L,this.l,new nr,e,t)}},Wd=class extends he{constructor(e,t,n,r){let o=t.map(a=>a.fb);t=t.map(a=>a.name),super(o.reduce((a,s)=>a.add(s.o),n.o),o.concat(n),{B:!1},!1,r),this.s=e,this.A=t,this.K=o,this.O=n,this.l=null}h(e,t){let n=e,r=this.l.map((l,p)=>{let m=oe(this.K[p],n,t).N();return n=pn(e,{[l]:()=>w.create(m)}),m});if(r.some(l=>l.length===0))return this.s===\"every\"?w.$():w.S();let o=Array(r.length).fill(0);o[0]=-1;for(var a=!0;a;){a=!1;for(let l=0,p=o.length;l<p;++l){var s=r[l];if(++o[l]>s.length-1)o[l]=0;else{for(a=Object.create(null),s=0;s<o.length;s++){let m=r[s][o[s]];a[this.l[s]]=()=>w.m(m)}if(a=pn(e,a),a=oe(this.O,a,t),a.ea()&&this.s===\"some\")return w.$();if(!a.ea()&&this.s===\"every\")return w.S();a=!0;break}}}return this.s===\"every\"?w.$():w.S()}v(e){this.l=[];for(let n=0,r=this.A.length;n<r;++n){this.K[n].v(e),mr(e);var t=this.A[n];let o=t.prefix?e.Z(t.prefix):null;t=bt(e,o,t.localName),this.l[n]=t}this.O.v(e);for(let n=0,r=this.A.length;n<r;++n)gr(e)}},Nr=class extends oo{constructor(e){super(new Ae({nodeType:1})),this.s=e}l(e,t){return B(t.type,53)?(e=t.value.node.nodeType,this.s===3&&e===4?!0:this.s===e):!1}D(){return`type-${this.s}`}},Un=class extends oo{constructor(e,t={kind:null}){let n=e.prefix,r=e.namespaceURI;e=e.localName;let o={};e!==\"*\"&&(o.nodeName=1),o.nodeType=1,super(new Ae(o)),this.s=e,this.K=r,this.A=n,this.O=t.kind}l(e,t){e=B(t.type,54);let n=B(t.type,47);return!e&&!n?!1:(t=t.value,this.O!==null&&(this.O===1&&!e||this.O===2&&!n)?!1:this.A===null&&this.K!==\"\"&&this.s===\"*\"?!0:this.A===\"*\"?this.s===\"*\"?!0:this.s===t.node.localName:this.s!==\"*\"&&this.s!==t.node.localName?!1:(t.node.namespaceURI||null)===((this.A===\"\"?e?this.K:null:this.K)||null))}D(){return this.s===\"*\"?this.O===null?\"type-1-or-type-2\":`type-${this.O}`:`name-${this.s}`}v(e){if(this.K===null&&this.A!==\"*\"&&(this.K=e.Z(this.A||\"\")||null,!this.K&&this.A))throw Error(`XPST0081: The prefix ${this.A} could not be resolved.`)}},Zd=class extends oo{constructor(e){super(new Ae({nodeName:1})),this.s=e}l(e,t){return B(t.type,57)&&t.value.node.target===this.s}D(){return\"type-7\"}},io=class extends oo{constructor(e){super(new Ae({})),this.s=e}l(e,t){return B(t.type,ht(this.s.prefix?this.s.prefix+\":\"+this.s.localName:this.s.localName))}},em=class extends he{constructor(e,t,n){super(new Ae({}),[],{B:!1,P:\"unsorted\"}),this.A=n,this.s=t,this.K=e,this.l=null}h(e,t){if(!e.qa[this.l]){if(this.O)return this.O(e,t);throw Error(\"XQDY0054: The variable \"+this.A+\" is declared but not in scope.\")}return e.qa[this.l]()}v(e){if(this.s===null&&this.K&&(this.s=e.Z(this.K)),this.l=e.eb(this.s||\"\",this.A),!this.l)throw Error(\"XPST0008, The variable \"+this.A+\" is not in scope.\");(e=e.Fa[this.l])&&(this.O=e)}},tm=class extends Mn{constructor(e,t){super(new Ae({}),[e,t],{B:!1,V:!1,P:\"unsorted\",subtree:!1},t),this.A=e}K(e,t,n,r){let o=null,a=null;return r({next:()=>{for(;;){if(!a){var s=t.next(0);if(s.done)return W;o=s.value,a=oe(this.A,o,n)}s=a.ea();let l=o;if(a=o=null,s)return Q(l)}}})}},Pn=class{constructor(e){this.type=e}},sc=class extends Pn{constructor(e){super(\"delete\"),this.target=e}h(e){return{type:this.type,target:Ze(this.target,e,!1)}}},so=class extends Pn{constructor(e,t,n){super(n),this.target=e,this.content=t}h(e){return{type:this.type,target:Ze(this.target,e,!1),content:this.content.map(t=>Ze(t,e,!0))}}},uc=class extends so{constructor(e,t){super(e,t,\"insertAfter\")}},Br=class extends Pn{constructor(e,t){super(\"insertAttributes\"),this.target=e,this.content=t}h(e){return{type:this.type,target:Ze(this.target,e,!1),content:this.content.map(t=>Ze(t,e,!0))}}},lc=class extends so{constructor(e,t){super(e,t,\"insertBefore\")}},cc=class extends so{constructor(e,t){super(e,t,\"insertIntoAsFirst\")}},pc=class extends so{constructor(e,t){super(e,t,\"insertIntoAsLast\")}},hc=class extends so{constructor(e,t){super(e,t,\"insertInto\")}},fc=class extends Pn{constructor(e,t){super(\"rename\"),this.target=e,this.o=t.Aa?t:new tt(t.prefix,t.namespaceURI,t.localName)}h(e){return{type:this.type,target:Ze(this.target,e,!1),newName:{prefix:this.o.prefix,namespaceURI:this.o.namespaceURI,localName:this.o.localName}}}},dc=class extends Pn{constructor(e,t){super(\"replaceElementContent\"),this.target=e,this.text=t}h(e){return{type:this.type,target:Ze(this.target,e,!1),text:this.text?Ze(this.text,e,!0):null}}},mc=class extends Pn{constructor(e,t){super(\"replaceNode\"),this.target=e,this.o=t}h(e){return{type:this.type,target:Ze(this.target,e,!1),replacement:this.o.map(t=>Ze(t,e,!0))}}},gc=class extends Pn{constructor(e,t){super(\"replaceValue\"),this.target=e,this.o=t}h(e){return{type:this.type,target:Ze(this.target,e,!1),\"string-value\":this.o}}},nm=(e,t)=>new mc(e,t),rm=class extends cr{constructor(e){super(new Ae({}),[e],{B:!1,P:\"unsorted\"}),this.l=e}s(e,t){let n=jt(this.l)(e,t),r=t.h,o,a;return{next:()=>{if(!o){let s=n.next(0);if(s.value.I.some(l=>!B(l.type,53)))throw Error(\"XUTY0007: The target of a delete expression must be a sequence of zero or more nodes.\");o=s.value.I,a=s.value.ca}return o=o.filter(s=>we(r,s.value)),Q({ca:St(o.map(s=>new sc(s.value)),a),I:[]})}}}};function yc(e,t,n,r,o,a){let s=t.h;return e.reduce(function l(p,m){return B(m.type,62)?(m.members.forEach(T=>T().N().forEach(R=>l(p,R))),p):(p.push(m),p)},[]).forEach((l,p,m)=>{if(B(l.type,47)){if(o)throw a(l.value,s);n.push(l.value.node)}else if(B(l.type,46)||B(l.type,53)&&l.value.node.nodeType===3){let T=B(l.type,46)?Te(en(l,t).first(),1).value:Je(s,l.value);p!==0&&B(m[p-1].type,46)&&B(l.type,46)?(r.push({data:\" \"+T,Ta:!0,nodeType:3}),o=!0):T&&(r.push({data:\"\"+T,Ta:!0,nodeType:3}),o=!0)}else if(B(l.type,55)){let T=[];kt(s,l.value).forEach(R=>T.push(Ce(R))),o=yc(T,t,n,r,o,a)}else if(B(l.type,53))r.push(l.value.node),o=!0;else throw B(l.type,60)?cu(l.type):Error(`Atomizing ${l.type} is not implemented.`)}),o}function Ri(e,t,n){let r=[],o=[],a=!1;return e.forEach(s=>{a=yc(s,t,r,o,a,n)}),{attributes:r,Ya:o}}function om(e,t,n,r,o){let a=[];switch(e){case 4:r.length&&a.push(new Br(t,r)),o.length&&a.push(new cc(t,o));break;case 5:r.length&&a.push(new Br(t,r)),o.length&&a.push(new pc(t,o));break;case 3:r.length&&a.push(new Br(t,r)),o.length&&a.push(new hc(t,o));break;case 2:r.length&&a.push(new Br(n,r)),o.length&&a.push(new lc(t,o));break;case 1:r.length&&a.push(new Br(n,r)),o.length&&a.push(new uc(t,o))}return a}var am=class extends cr{constructor(e,t,n){super(new Ae({}),[e,n],{B:!1,P:\"unsorted\"}),this.K=e,this.l=t,this.A=n}s(e,t){let n=jt(this.K)(e,t),r=jt(this.A)(e,t),o=t.h,a,s,l,p,m,T;return{next:()=>{if(!a){var R=n.next(0);let X=Ri([R.value.I],t,m0);a=X.attributes.map(P=>({node:P,F:null})),s=X.Ya.map(P=>({node:P,F:null})),l=R.value.ca}if(!p){if(R=r.next(0),R.value.I.length===0)throw Qo();if(3<=this.l){if(R.value.I.length!==1||!B(R.value.I[0].type,54)&&!B(R.value.I[0].type,55))throw Wu()}else{if(R.value.I.length!==1||!(B(R.value.I[0].type,54)||B(R.value.I[0].type,56)||B(R.value.I[0].type,58)||B(R.value.I[0].type,57)))throw Zu();if(T=we(o,R.value.I[0].value,null),T===null)throw Error(`XUDY0029: The target ${R.value.I[0].value.outerHTML} for inserting a node before or after must have a parent.`)}p=R.value.I[0],m=R.value.ca}if(a.length){if(3<=this.l){if(!B(p.type,54))throw Error(\"XUTY0022: An insert expression specifies the insertion of an attribute node into a document node.\")}else if(T.node.nodeType!==1)throw Error(\"XUDY0030: An insert expression specifies the insertion of an attribute node before or after a child of a document node.\");a.reduce((X,P)=>{let V=P.node.prefix||\"\";var se=P.node.prefix||\"\";let fe=P.node.namespaceURI,Ee=se?p.value.node.lookupNamespaceURI(se):null;if(Ee&&Ee!==fe)throw qo(fe);if((se=X[se])&&fe!==se)throw Yo(fe);return X[V]=P.node.namespaceURI,X},{})}return Q({I:[],ca:St(om(this.l,p.value,T||null,a,s),l,m)})}}}};let aa=()=>At(\"Casting not supported from given type to a single xs:string or xs:untypedAtomic or any of its derived types.\"),wc=/([A-Z_a-z\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD]|[\\uD800-\\uDB7F][\\uDC00-\\uDFFF])/,im=new RegExp(`${wc.source}${new RegExp(`(${wc.source}|[-.0-9\\xB7\\u0300-\\u036F\\u203F\\u2040])`).source}*`,\"g\"),Oi=e=>(e=e.match(im))?e.length===1:!1;function Ac(e,t){return $e(t,e).X({m:n=>{if(n=n.first(),B(n.type,1)||B(n.type,19)){if(!Oi(n.value))throw Error(`XQDY0041: The value \"${n.value}\" of a name expressions cannot be converted to a NCName.`);return w.m(n)}throw aa()},default:()=>{throw aa()}}).value}function ia(e,t,n){return $e(n,t).X({m:r=>{if(r=r.first(),B(r.type,23))return w.m(r);if(B(r.type,1)||B(r.type,19)){let o,a;if(r=r.value.split(\":\"),r.length===1?r=r[0]:(o=r[0],a=e.Z(o),r=r[1]),!Oi(r)||o&&!Oi(o))throw Cl(o?`${o}:${r}`:r);if(o&&!a)throw Cl(`${o}:${r}`);return w.m({type:23,value:new tt(o,a,r)})}throw aa()},default:()=>{throw aa()}}).value}var sm=class extends cr{constructor(e,t){super(new Ae({}),[e,t],{B:!1,P:\"unsorted\"}),this.A=e,this.K=t,this.l=void 0}s(e,t){let n=jt(this.A)(e,t),r=jt(this.K)(e,t);return{next:()=>{let o=n.next(0);var a=o.value.I;if(a.length===0)throw Qo();if(a.length!==1||!B(a[0].type,54)&&!B(a[0].type,47)&&!B(a[0].type,57))throw el();a=a[0];let s=r.next(0);e:{var l=this.l,p=w.create(s.value.I);switch(a.type){case 54:if(l=ia(l,t,p).next(0).value.value,(p=a.value.node.lookupNamespaceURI(l.prefix))&&p!==l.namespaceURI)throw qo(l.namespaceURI);break e;case 47:if(l=ia(l,t,p).next(0).value.value,l.namespaceURI&&(p=a.value.node.lookupNamespaceURI(l.prefix))&&p!==l.namespaceURI)throw qo(l.namespaceURI);break e;case 57:l=Ac(t,p).next(0).value.value,l=new tt(\"\",null,l);break e}l=void 0}return Q({I:[],ca:St([new fc(a.value,l)],o.value.ca,s.value.ca)})}}}v(e){this.l=Ko(e),super.v(e)}};function um(e,t,n){let r,o,a;return{next:()=>{if(!r){var s=n.next(0),l=Ri([s.value.I],e,Yo);r={attributes:l.attributes.map(p=>({node:p,F:null})),Ya:l.Ya.map(p=>({node:p,F:null}))},o=s.value.ca}if(l=t.next(0),l.value.I.length===0)throw Qo();if(l.value.I.length!==1||!(B(l.value.I[0].type,54)||B(l.value.I[0].type,47)||B(l.value.I[0].type,56)||B(l.value.I[0].type,58)||B(l.value.I[0].type,57)))throw Lo();if(a=we(e.h,l.value.I[0].value,null),a===null)throw Error(`XUDY0009: The target ${l.value.I[0].value.outerHTML} for replacing a node must have a parent.`);if(s=l.value.I[0],l=l.value.ca,B(s.type,47)){if(r.Ya.length)throw Error(\"XUTY0011: When replacing an attribute the new value must be zero or more attribute nodes.\");r.attributes.reduce((p,m)=>{let T=m.node.prefix||\"\";m=m.node.namespaceURI;var R=a.node.lookupNamespaceURI(T);if(R&&R!==m)throw qo(m);if((R=p[T])&&m!==R)throw Yo(m);return p[T]=m,p},{})}else if(r.attributes.length)throw Error(\"XUTY0010: When replacing an an element, text, comment, or processing instruction node the new value must be a single node.\");return Q({I:[],ca:St([nm(s.value,[].concat(r.attributes,r.Ya))],o,l)})}}}function lm(e,t,n){let r,o,a,s,l=!1;return{next:()=>{if(l)return W;if(!a){var p=n.next(0);let m=$e(w.create(p.value.I),e).map(T=>Te(T,1)).N().map(T=>T.value).join(\" \");a=m.length===0?null:{node:e.Ja.createTextNode(m),F:null},s=p.value.ca}if(!r){if(p=t.next(0),p.value.I.length===0)throw Qo();if(p.value.I.length!==1||!(B(p.value.I[0].type,54)||B(p.value.I[0].type,47)||B(p.value.I[0].type,56)||B(p.value.I[0].type,58)||B(p.value.I[0].type,57)))throw Lo();r=p.value.I[0],o=p.value.ca}if(B(r.type,54))return l=!0,Q({I:[],ca:St([new dc(r.value,a)],s,o)});if(B(r.type,47)||B(r.type,56)||B(r.type,58)||B(r.type,57)){if(p=a?Je(e.h,a):\"\",B(r.type,58)&&(p.includes(\"--\")||p.endsWith(\"-\")))throw Error(`XQDY0072: The content \"${p}\" for a comment node contains two adjacent hyphens or ends with a hyphen.`);if(B(r.type,57)&&p.includes(\"?>\"))throw Error(`XQDY0026: The content \"${p}\" for a processing instruction node contains \"?>\".`);return l=!0,Q({I:[],ca:St([new gc(r.value,p)],s,o)})}}}}var cm=class extends cr{constructor(e,t,n){super(new Ae({}),[t,n],{B:!1,P:\"unsorted\"}),this.K=e,this.l=t,this.A=n}s(e,t){let n=jt(this.l)(e,t);return e=jt(this.A)(e,t),this.K?lm(t,n,e):um(t,n,e)}};function vc(e){switch(e.type){case\"delete\":return new sc({node:e.target,F:null});case\"insertAfter\":return new uc({node:e.target,F:null},e.content.map(t=>({node:t,F:null})));case\"insertBefore\":return new lc({node:e.target,F:null},e.content.map(t=>({node:t,F:null})));case\"insertInto\":return new hc({node:e.target,F:null},e.content.map(t=>({node:t,F:null})));case\"insertIntoAsFirst\":return new cc({node:e.target,F:null},e.content.map(t=>({node:t,F:null})));case\"insertIntoAsLast\":return new pc({node:e.target,F:null},e.content.map(t=>({node:t,F:null})));case\"insertAttributes\":return new Br({node:e.target,F:null},e.content.map(t=>({node:t,F:null})));case\"rename\":return new fc({node:e.target,F:null},e.newName);case\"replaceNode\":return new mc({node:e.target,F:null},e.replacement.map(t=>({node:t,F:null})));case\"replaceValue\":return new gc({node:e.target,F:null},e[\"string-value\"]);case\"replaceElementContent\":return new dc({node:e.target,F:null},e.text?{node:e.text,F:null}:null);default:throw Error(`Unexpected type \"${e.type}\" when parsing a transferable pending update.`)}}function xc(e,t,n){if(t.find(o=>Ye(o,e)))return!0;let r=we(n,e);return r?xc(r,t,n):!1}var pm=class extends cr{constructor(e,t,n){super(new Ae({}),e.reduce((r,o)=>(r.push(o.fb),r),[t,n]),{B:!1,P:\"unsorted\"}),this.l=e,this.K=t,this.A=n,this.H=null}h(e,t){return e=this.s(e,t),pr(e,()=>{})}s(e,t){let n=t.h,r=t.Ja,o=t.Oa,a=[],s,l,p,m=[],T=[];return{next:()=>{if(m.length!==this.l.length)for(var R=m.length;R<this.l.length;R++){let P=this.l[R];var X=a[R];if(X||(a[R]=X=jt(P.fb)(e,t)),X=X.next(0),X.value.I.length!==1||!B(X.value.I[0].type,53))throw Error(\"XUTY0013: The source expression of a copy modify expression must return a single node.\");let V=Ce(Vo(X.value.I[0].value,t));m.push(V.value),T.push(X.value.ca),e=pn(e,{[P.ic]:()=>w.m(V)})}return p||(s||(s=jt(this.K)(e,t)),p=s.next(0).value.ca),p.forEach(P=>{if(P.target&&!xc(P.target,m,n))throw Error(`XUDY0014: The target ${P.target.node.outerHTML} must be a node created by the copy clause.`);if(P.type===\"put\")throw Error(\"XUDY0037: The modify expression of a copy modify expression can not contain a fn:put.\")}),R=p.map(P=>(P=P.h(t),vc(P))),ul(R,n,r,o),l||(l=jt(this.A)(e,t)),R=l.next(0),Q({I:R.value.I,ca:St(R.value.ca,...T)})}}}v(e){mr(e),this.l.forEach(t=>t.ic=bt(e,t.Lb.namespaceURI,t.Lb.localName)),super.v(e),gr(e),this.H=this.l.some(t=>t.fb.H)||this.A.H}};function Nc(e,t){return{node:{nodeType:2,Ta:!0,nodeName:e.Aa(),namespaceURI:e.namespaceURI,prefix:e.prefix,localName:e.localName,name:e.Aa(),value:t},F:null}}var Bc=class extends he{constructor(e,t){let n=t.nb||[];n=n.concat(e.Pa||[]),super(new Ae({}),n,{B:!1,P:\"unsorted\"}),e.Pa?this.s=e.Pa:this.name=new tt(e.prefix,e.namespaceURI,e.localName),this.l=t,this.A=void 0}h(e,t){let n,r,o,a=!1;return w.create({next:()=>{if(a)return W;if(!r){if(this.s){if(!n){var s=this.s.h(e,t);n=ia(this.A,t,s)}r=n.next(0).value.value}else r=this.name;if(r&&(r.prefix===\"xmlns\"||r.prefix===\"\"&&r.localName===\"xmlns\"||r.namespaceURI===\"http://www.w3.org/2000/xmlns/\"||r.prefix===\"xml\"&&r.namespaceURI!==\"http://www.w3.org/XML/1998/namespace\"||r.prefix!==\"\"&&r.prefix!==\"xml\"&&r.namespaceURI===\"http://www.w3.org/XML/1998/namespace\"))throw ro(r)}return this.l.nb?(s=this.l.nb,o||(o=Ct(s.map(l=>$e(l.h(e,t),t).M(p=>w.m(N(p.map(m=>m.value).join(\" \"),1))))).M(l=>w.m(Ce(Nc(r,l.map(p=>p.value).join(\"\"))))).value),o.next(0)):(a=!0,Q(Ce(Nc(r,this.l.value))))}})}v(e){if(this.A=Ko(e),this.name&&this.name.prefix&&!this.name.namespaceURI){let t=e.Z(this.name.prefix);if(t===void 0&&this.name.prefix)throw pu(this.name.prefix);this.name.namespaceURI=t||null}super.v(e)}},hm=class extends he{constructor(e){super(e?e.o:new Ae({}),e?[e]:[],{B:!1,P:\"unsorted\"}),this.l=e}h(e,t){let n={data:\"\",Ta:!0,nodeType:8},r={node:n,F:null};return this.l?(e=oe(this.l,e,t),$e(e,t).M(o=>{if(o=o.map(a=>Te(a,1).value).join(\" \"),o.indexOf(\"-->\")!==-1)throw Error('XQDY0072: The contents of the data of a comment may not include \"-->\"');return n.data=o,w.m(Ce(r))})):w.m(Ce(r))}},Ec=class extends he{constructor(e,t,n,r){super(new Ae({}),r.concat(t).concat(e.Pa||[]),{B:!1,P:\"unsorted\"}),e.Pa?this.s=e.Pa:this.l=new tt(e.prefix,e.namespaceURI,e.localName),this.O=n.reduce((o,a)=>{if(a.prefix in o)throw Error(`XQST0071: The namespace declaration with the prefix ${a.prefix} has already been declared on the constructed element.`);return o[a.prefix||\"\"]=a.uri,o},{}),this.K=t,this.la=r,this.A=void 0}h(e,t){let n=!1,r,o,a=!1,s,l,p,m=!1;return w.create({next:()=>{if(m)return W;if(n||(r||(r=Ct(this.K.map(V=>oe(V,e,t)))),o=r.N(),n=!0),!a){s||(s=this.la.map(V=>oe(V,e,t)));for(var T=[],R=0;R<s.length;R++){var X=s[R].N();T.push(X)}l=T,a=!0}if(this.s&&(p||(T=this.s.h(e,t),p=ia(this.A,t,T)),this.l=p.next(0).value.value),this.l.prefix===\"xmlns\"||this.l.namespaceURI===\"http://www.w3.org/2000/xmlns/\"||this.l.prefix===\"xml\"&&this.l.namespaceURI!==\"http://www.w3.org/XML/1998/namespace\"||this.l.prefix&&this.l.prefix!==\"xml\"&&this.l.namespaceURI===\"http://www.w3.org/XML/1998/namespace\")throw Error(`XQDY0096: The node name \"${this.l.Aa()}\" is invalid for a computed element constructor.`);let P={nodeType:1,Ta:!0,attributes:[],childNodes:[],nodeName:this.l.Aa(),namespaceURI:this.l.namespaceURI,prefix:this.l.prefix,localName:this.l.localName};for(T={node:P,F:null},o.forEach(V=>{P.attributes.push(V.value.node)}),R=Ri(l,t,k0),R.attributes.forEach(V=>{if(P.attributes.find(se=>se.namespaceURI===V.namespaceURI&&se.localName===V.localName))throw Error(`XQDY0025: The attribute ${V.name} does not have an unique name in the constructed element.`);P.attributes.push(V)}),R.Ya.forEach(V=>{P.childNodes.push(V)}),R=0;R<P.childNodes.length;R++){if(X=P.childNodes[R],!nt(X)||X.nodeType!==3)continue;let V=P.childNodes[R-1];V&&nt(V)&&V.nodeType===3&&(V.data+=X.data,P.childNodes.splice(R,1),R--)}return m=!0,Q(Ce(T))}})}v(e){if(mr(e),Object.keys(this.O).forEach(t=>Dn(e,t,this.O[t])),this.Ga.forEach(t=>t.v(e)),this.K.reduce((t,n)=>{if(n.name){if(n=`Q{${n.name.namespaceURI===null?e.Z(n.name.prefix):n.name.namespaceURI}}${n.name.localName}`,t.includes(n))throw Error(`XQST0040: The attribute ${n} does not have an unique name in the constructed element.`);t.push(n)}return t},[]),this.l&&this.l.namespaceURI===null){let t=e.Z(this.l.prefix);if(t===void 0&&this.l.prefix)throw pu(this.l.prefix);this.l.namespaceURI=t}this.A=Ko(e),gr(e)}};function Ic(e){if(/^xml$/i.test(e))throw Error(`XQDY0064: The target of a created PI may not be \"${e}\"`)}function Tc(e,t){return{node:{data:t,Ta:!0,nodeName:e,nodeType:7,target:e},F:null}}var fm=class extends he{constructor(e,t){let n=e.xb?[e.xb].concat(t):[t];super(n.reduce((r,o)=>r.add(o.o),new Ae({})),n,{B:!1,P:\"unsorted\"}),this.l=e,this.s=t}h(e,t){let n=oe(this.s,e,t);return $e(n,t).M(r=>{let o=r.map(s=>Te(s,1).value).join(\" \");if(o.indexOf(\"?>\")!==-1)throw Error('XQDY0026: The contents of the data of a processing instruction may not include \"?>\"');if(this.l.Gb!==null)return r=this.l.Gb,Ic(r),w.m(Ce(Tc(r,o)));r=oe(this.l.xb,e,t);let a=Ac(t,r);return w.create({next:()=>{var s=a.next(0);return s.done?s:(s=s.value.value,Ic(s),Q(Ce(Tc(s,o))))}})})}},dm=class extends he{constructor(e){super(e?e.o:new Ae({}),e?[e]:[],{B:!1,P:\"unsorted\"}),this.l=e}h(e,t){return this.l?(e=oe(this.l,e,t),$e(e,t).M(n=>n.length===0?w.empty():(n={node:{data:n.map(r=>Te(r,1).value).join(\" \"),Ta:!0,nodeType:3},F:null},w.m(Ce(n))))):w.empty()}},mm=class extends Gn{constructor(e,t,n,r){super(new Ae({}),[e,...t.map(o=>o.pb),n].concat(...t.map(o=>o.Kb.map(a=>a.Jb))),{B:!1,V:!1,P:\"unsorted\",subtree:!1},r),this.K=e,this.l=t.length,this.O=t.map(o=>o.Kb)}A(e,t,n){return n[0](e).M(r=>{for(let o=0;o<this.l;o++)if(this.O[o].some(a=>{switch(a.hc){case\"?\":if(1<r.length)return!1;break;case\"*\":break;case\"+\":if(1>r.length)return!1;break;default:if(r.length!==1)return!1}let s=w.create(r);return r.every((l,p)=>(l=Zt(e,p,l,s),oe(a.Jb,l,t).ea()))}))return n[o+1](e);return n[this.l+1](e)})}v(e){if(super.v(e),this.K.H)throw nn()}},gm=class extends Gn{constructor(e,t,n,r){super(new Ae({}),[e,n,...t.map(o=>o.pb)].concat(...t.map(o=>o.Hb.map(a=>a))),{B:!1,V:!1,P:\"unsorted\",subtree:!1},r),this.K=e,this.l=t.length,this.O=t.map(o=>o.Hb)}A(e,t,n){let r=xr(n[0](e),t),[,o,...a]=n;return r.X({multiple:()=>{throw Error(\"XPTY0004: The operand for a switch expression should result in zero or one item\")},default:()=>{let s=r.first(),l=!s;for(let m=0;m<this.l;m++){var p=this.O[m].map(T=>oe(T,e,t));for(let T of p)if(p=xr(T,t),p.isEmpty()){if(l)return a[m](e)}else{if(!p.oa())throw Error(\"XPTY0004: The operand for a switch case should result in zero or one item\");if(!l&&(p=p.first(),di(e,t,null,s,p).next(0).value))return a[m](e)}}return o(e)}})}v(e){if(super.v(e),this.K.H)throw nn()}},ym={Y:!1,ra:!1},wm={Y:!0,ra:!1},Am={Y:!0,ra:!0};function me(e){return e.Y?e.ra?Am:wm:ym}function _(e,t){switch(e[0]){case\"andOp\":var n=te(e,\"type\");return new xd(Cc(\"andOp\",e,me(t)),n);case\"orOp\":return n=te(e,\"type\"),new Nd(Cc(\"orOp\",e,me(t)),n);case\"unaryPlusOp\":return n=O(O(e,\"operand\"),\"*\"),e=te(e,\"type\"),new Wl(\"+\",_(n,t),e);case\"unaryMinusOp\":return n=O(O(e,\"operand\"),\"*\"),e=te(e,\"type\"),new Wl(\"-\",_(n,t),e);case\"addOp\":case\"subtractOp\":case\"multiplyOp\":case\"divOp\":case\"idivOp\":case\"modOp\":var r=e[0],o=_(K(e,[\"firstOperand\",\"*\"]),me(t));t=_(K(e,[\"secondOperand\",\"*\"]),me(t));let a=te(e,\"type\"),s=te(K(e,[\"firstOperand\",\"*\"]),\"type\"),l=te(K(e,[\"secondOperand\",\"*\"]),\"type\");return s&&l&&te(e,\"type\")&&(n=Dl(r,s.type,l.type)),new X0(r,o,t,a,n);case\"sequenceExpr\":return Om(e,t);case\"unionOp\":return n=te(e,\"type\"),new Ld([_(K(e,[\"firstOperand\",\"*\"]),me(t)),_(K(e,[\"secondOperand\",\"*\"]),me(t))],n);case\"otherwiseOp\":return n=te(e,\"type\"),new K0([_(K(e,[\"firstOperand\",\"*\"]),me(t)),_(K(e,[\"secondOperand\",\"*\"]),me(t))],n);case\"exceptOp\":case\"intersectOp\":return n=te(e,\"type\"),new Hd(e[0],_(K(e,[\"firstOperand\",\"*\"]),me(t)),_(K(e,[\"secondOperand\",\"*\"]),me(t)),n);case\"stringConcatenateOp\":return Dm(e,t);case\"rangeSequenceExpr\":return km(e,t);case\"equalOp\":case\"notEqualOp\":case\"lessThanOrEqualOp\":case\"lessThanOp\":case\"greaterThanOrEqualOp\":case\"greaterThanOp\":return Di(\"generalCompare\",e,t);case\"eqOp\":case\"neOp\":case\"ltOp\":case\"leOp\":case\"gtOp\":case\"geOp\":return Di(\"valueCompare\",e,t);case\"isOp\":case\"nodeBeforeOp\":case\"nodeAfterOp\":return Di(\"nodeCompare\",e,t);case\"pathExpr\":return Sm(e,t);case\"contextItemExpr\":return t=te(e,\"type\"),new Qd(t);case\"functionCallExpr\":return Em(e,t);case\"inlineFunctionExpr\":return Cm(e,t);case\"arrowExpr\":return Im(e,t);case\"dynamicFunctionInvocationExpr\":return Tm(e,t);case\"namedFunctionRef\":return t=O(e,\"functionName\"),n=te(e,\"type\"),e=de(K(e,[\"integerConstantExpr\",\"value\"])),new ao(Fe(t),parseInt(e,10),n);case\"integerConstantExpr\":return new vr(de(O(e,\"value\")),{type:5,g:3});case\"stringConstantExpr\":return new vr(de(O(e,\"value\")),{type:1,g:3});case\"decimalConstantExpr\":return new vr(de(O(e,\"value\")),{type:4,g:3});case\"doubleConstantExpr\":return new vr(de(O(e,\"value\")),{type:3,g:3});case\"varRef\":let{prefix:p,namespaceURI:m,localName:T}=Fe(O(e,\"name\"));return new em(p,m,T);case\"flworExpr\":return Bm(e,t);case\"quantifiedExpr\":return Rm(e,t);case\"ifThenElseExpr\":return n=te(e,\"type\"),r=O(e,\"ifClause\")||Z(e,\"x:stackTrace\")[0],o=O(e,\"thenClause\")||Z(e,\"x:stackTrace\")[1],e=O(e,\"elseClause\")||Z(e,\"x:stackTrace\")[2],new dd(_(r,me(t)),_(o,t),_(e,t),n);case\"instanceOfExpr\":return n=_(K(e,[\"argExpr\",\"*\"]),t),r=K(e,[\"sequenceType\",\"*\"]),o=K(e,[\"sequenceType\",\"occurrenceIndicator\"]),e=te(e,\"type\"),new bd(n,_(r,me(t)),o?de(o):\"\",e);case\"castExpr\":return t=_(O(O(e,\"argExpr\"),\"*\"),me(t)),n=O(e,\"singleType\"),e=Fe(O(n,\"atomicType\")),n=O(n,\"optional\")!==null,new $d(t,e,n);case\"castableExpr\":return t=_(O(O(e,\"argExpr\"),\"*\"),me(t)),n=O(e,\"singleType\"),e=Fe(O(n,\"atomicType\")),n=O(n,\"optional\")!==null,new jd(t,e,n);case\"simpleMapExpr\":return Gm(e,t);case\"mapConstructor\":return xm(e,t);case\"arrayConstructor\":return vm(e,t);case\"unaryLookup\":return n=te(e,\"type\"),new zd(Fc(e,t),n);case\"typeswitchExpr\":return Xm(e,t);case\"switchExpr\":return jm(e,t);case\"elementConstructor\":return Mm(e,t);case\"attributeConstructor\":return Um(e,t);case\"computedAttributeConstructor\":return(n=O(e,\"tagName\"))?n=Fe(n):(n=O(e,\"tagNameExpr\"),n={Pa:_(O(n,\"*\"),me(t))}),t=_(O(O(e,\"valueExpr\"),\"*\"),me(t)),new Bc(n,{nb:[t]});case\"computedCommentConstructor\":if(!t.Y)throw Error(\"XPST0003: Use of XQuery functionality is not allowed in XPath context\");return t=(e=O(e,\"argExpr\"))?_(O(e,\"*\"),me(t)):null,new hm(t);case\"computedTextConstructor\":if(!t.Y)throw Error(\"XPST0003: Use of XQuery functionality is not allowed in XPath context\");return t=(e=O(e,\"argExpr\"))?_(O(e,\"*\"),me(t)):null,new dm(t);case\"computedElementConstructor\":return Pm(e,t);case\"computedPIConstructor\":if(!t.Y)throw Error(\"XPST0003: Use of XQuery functionality is not allowed in XPath context\");return n=O(e,\"piTargetExpr\"),r=O(e,\"piTarget\"),o=O(e,\"piValueExpr\"),e=te(e,\"type\"),new fm({xb:n?_(O(n,\"*\"),me(t)):null,Gb:r?de(r):null},o?_(O(o,\"*\"),me(t)):new Fi([],e));case\"CDataSection\":return new vr(de(e),{type:1,g:3});case\"deleteExpr\":return t=_(K(e,[\"targetExpr\",\"*\"]),t),new rm(t);case\"insertExpr\":switch(n=_(K(e,[\"sourceExpr\",\"*\"]),t),o=Z(e,\"*\")[1],o[0]){case\"insertAfter\":r=1;break;case\"insertBefore\":r=2;break;case\"insertInto\":r=(r=O(o,\"*\"))?r[0]===\"insertAsFirst\"?4:5:3}return t=_(K(e,[\"targetExpr\",\"*\"]),t),new am(n,r,t);case\"renameExpr\":return n=_(K(e,[\"targetExpr\",\"*\"]),t),t=_(K(e,[\"newNameExpr\",\"*\"]),t),new sm(n,t);case\"replaceExpr\":return n=!!O(e,\"replaceValue\"),r=_(K(e,[\"targetExpr\",\"*\"]),t),t=_(K(e,[\"replacementExpr\",\"*\"]),t),new cm(n,r,t);case\"transformExpr\":return Hm(e,t);case\"x:stackTrace\":for(n=e,e=n[2];e[0]===\"x:stackTrace\";)n=e,e=e[2];return n=n[1],new md(n,e[0],_(e,t),n.Xa);case\"ifClause\":case\"thenClause\":case\"elseClause\":return _(O(e,\"*\"),t);default:return Gi(e,t)}}function Gi(e,t){switch(e[0]){case\"nameTest\":return new Un(Fe(e));case\"piTest\":return(e=O(e,\"piTarget\"))?new Zd(de(e)):new Nr(7);case\"commentTest\":return new Nr(8);case\"textTest\":return new Nr(3);case\"documentTest\":return new Nr(9);case\"attributeTest\":return t=(e=O(e,\"attributeName\"))&&O(e,\"star\"),!e||t?new Nr(2):new Un(Fe(O(e,\"QName\")),{kind:2});case\"elementTest\":return t=(e=O(e,\"elementName\"))&&O(e,\"star\"),!e||t?new Nr(1):new Un(Fe(O(e,\"QName\")),{kind:1});case\"anyKindTest\":return new io({prefix:\"\",namespaceURI:null,localName:\"node()\"});case\"anyMapTest\":return new io({prefix:\"\",namespaceURI:null,localName:\"map(*)\"});case\"anyArrayTest\":return new io({prefix:\"\",namespaceURI:null,localName:\"array(*)\"});case\"Wildcard\":return O(e,\"star\")?(t=O(e,\"uri\"))?e=new Un({localName:\"*\",namespaceURI:de(t),prefix:\"\"}):(t=O(e,\"NCName\"),e=O(e,\"*\")[0]===\"star\"?new Un({localName:de(t),namespaceURI:null,prefix:\"*\"}):new Un({localName:\"*\",namespaceURI:null,prefix:de(t)})):e=new Un({localName:\"*\",namespaceURI:null,prefix:\"*\"}),e;case\"atomicType\":return e=Fe(e),new io(e);case\"anyItemType\":return new io({prefix:\"\",namespaceURI:null,localName:\"item()\"});case\"unionNodeTest\":return Fm(e,t);default:throw Error(\"No selector counterpart for: \"+e[0]+\".\")}}function vm(e,t){let n=te(e,\"type\");e=O(e,\"*\");let r=Z(e,\"arrayElem\").map(o=>_(O(o,\"*\"),me(t)));switch(e[0]){case\"curlyArray\":return new W0(r,n);case\"squareArray\":return new Z0(r,n);default:throw Error(\"Unrecognized arrayType: \"+e[0])}}function xm(e,t){let n=te(e,\"type\");return new Ad(Z(e,\"mapConstructorEntry\").map(r=>({key:_(K(r,[\"mapKeyExpr\",\"*\"]),me(t)),value:_(K(r,[\"mapValueExpr\",\"*\"]),me(t))})),n)}function Cc(e,t,n){function r(a){let s=O(O(a,\"firstOperand\"),\"*\");a=O(O(a,\"secondOperand\"),\"*\"),s[0]===e?r(s):o.push(_(s,n)),a[0]===e?r(a):o.push(_(a,n))}let o=[];return r(t),o}function Fc(e,t){switch(e=O(e,\"*\"),e[0]){case\"NCName\":return new vr(de(e),{type:1,g:3});case\"star\":return\"*\";default:return _(e,me(t))}}function Di(e,t,n){var r=K(t,[\"firstOperand\",\"*\"]);let o=K(t,[\"secondOperand\",\"*\"]);switch(r=_(r,me(n)),n=_(o,me(n)),e){case\"valueCompare\":return new Od(t[0],r,n);case\"nodeCompare\":return new Pd(t[0],r,n);case\"generalCompare\":return new kd(t[0],r,n)}}function Nm(e,t,n){return e=Z(e,\"*\"),new Yd(e.filter(r=>r[0]!==\"stable\").map(r=>{var o=O(r,\"orderModifier\"),a=o?O(o,\"orderingKind\"):null;return o=o?O(o,\"emptyOrderingMode\"):null,a=a?de(a)===\"ascending\":!0,o=o?de(o)===\"empty least\":!0,{aa:_(K(r,[\"orderByExpr\",\"*\"]),t),Cb:a,ec:o}}),n)}function Bm(e,t){var n=Z(e,\"*\");if(e=O(n[n.length-1],\"*\"),n=n.slice(0,-1),1<n.length&&!t.Y)throw Error(\"XPST0003: Use of XQuery FLWOR expressions in XPath is no allowed\");return n.reduceRight((r,o)=>{switch(o[0]){case\"forClause\":o=Z(o,\"*\");for(var a=o.length-1;0<=a;--a){var s=o[a],l=K(s,[\"forExpr\",\"*\"]);let p=O(s,\"positionalVariableBinding\");r=new gd(Fe(K(s,[\"typedVariableBinding\",\"varName\"])),_(l,me(t)),p?Fe(p):null,r)}return r;case\"letClause\":for(o=Z(o,\"*\"),a=o.length-1;0<=a;--a)s=o[a],l=K(s,[\"letExpr\",\"*\"]),r=new wd(Fe(K(s,[\"typedVariableBinding\",\"varName\"])),_(l,me(t)),r);return r;case\"whereClause\":for(o=Z(o,\"*\"),a=o.length-1;0<=a;--a)r=new tm(_(o[a],t),r);return r;case\"windowClause\":throw Error(`Not implemented: ${o[0]} is not implemented yet.`);case\"groupByClause\":throw Error(`Not implemented: ${o[0]} is not implemented yet.`);case\"orderByClause\":return Nm(o,t,r);case\"countClause\":throw Error(`Not implemented: ${o[0]} is not implemented yet.`);default:throw Error(`Not implemented: ${o[0]} is not supported in a flwor expression`)}},_(e,t))}function Em(e,t){let n=O(e,\"functionName\"),r=Z(O(e,\"arguments\"),\"*\");return e=te(e,\"type\"),new to(new ao(Fe(n),r.length,e),r.map(o=>o[0]===\"argumentPlaceholder\"?null:_(o,t)),e)}function Im(e,t){let n=te(e,\"type\");var r=K(e,[\"argExpr\",\"*\"]);e=Z(e,\"*\").slice(1),r=[_(r,t)];for(let a=0;a<e.length;a++)if(e[a][0]!==\"arguments\"){if(e[a+1][0]===\"arguments\"){var o=Z(e[a+1],\"*\");r=r.concat(o.map(s=>s[0]===\"argumentPlaceholder\"?null:_(s,t)))}o=e[a][0]===\"EQName\"?new ao(Fe(e[a]),r.length,n):_(e[a],me(t)),r=[new to(o,r,n)]}return r[0]}function Tm(e,t){let n=K(e,[\"functionItem\",\"*\"]),r=te(e,\"type\");e=O(e,\"arguments\");let o=[];return e&&(o=Z(e,\"*\").map(a=>a[0]===\"argumentPlaceholder\"?null:_(a,t))),new to(_(n,t),o,r)}function Cm(e,t){let n=Z(O(e,\"paramList\"),\"*\"),r=K(e,[\"functionBody\",\"*\"]),o=te(e,\"type\");return new yd(n.map(a=>({name:Fe(O(a,\"varName\")),type:zo(a)})),zo(e),r?_(r,t):new Fi([],o))}function Fm(e,t){return e=Z(e,\"*\").map(n=>Gi(n,t)),e.length===1?e[1]:new z0(e)}function Sm(e,t){let n=te(e,\"type\");var r=Z(e,\"stepExpr\");let o=!1;var a=r.map(s=>{var l=O(s,\"xpathAxis\");let p;var m=Z(s,\"*\");let T=[],R=null,X=!1;for(let P of m)switch(P[0]){case\"lookup\":T.push([\"lookup\",Fc(P,t)]);break;case\"predicate\":case\"predicates\":for(let V of Z(P,\"*\")){if(m=_(V,me(t)),!X){let se=m.D();se===null?X=!0:R=ft(R,se)}T.push([\"predicate\",m])}}if(l)switch(o=!0,s=O(s,\"attributeTest anyElementTest piTest documentTest elementTest commentTest namespaceTest anyKindTest textTest anyFunctionTest typedFunctionTest schemaAttributeTest atomicType anyItemType parenthesizedItemType typedMapTest typedArrayTest nameTest Wildcard unionNodeTest\".split(\" \")),s=Gi(s,me(t)),de(l)){case\"ancestor\":p=new ql(s,{Sa:!1});break;case\"ancestor-or-self\":p=new ql(s,{Sa:!0});break;case\"attribute\":p=new td(s,R);break;case\"child\":p=new nd(s,R);break;case\"descendant\":p=new Yl(s,{Sa:!1});break;case\"descendant-or-self\":p=new Yl(s,{Sa:!0});break;case\"parent\":p=new ud(s,R);break;case\"following-sibling\":p=new sd(s,R);break;case\"preceding-sibling\":p=new hd(s,R);break;case\"following\":p=new ad(s);break;case\"preceding\":p=new cd(s);break;case\"self\":p=new fd(s,R)}else l=K(s,[\"filterExpr\",\"*\"]),p=_(l,me(t));for(let P of T)switch(P[0]){case\"lookup\":p=new Kd(p,P[1]);break;case\"predicate\":p=new Jd(p,P[1])}return p.type=n,p});return e=O(e,\"rootExpr\"),r=o||e!==null||1<r.length,!r&&a.length===1||!e&&a.length===1&&a[0].ha===\"sorted\"?a[0]:e&&a.length===0?new oc(null):(a=new Vd(a,r),e?new oc(a):a)}function Rm(e,t){let n=te(e,\"type\"),r=de(O(e,\"quantifier\")),o=K(e,[\"predicateExpr\",\"*\"]);return e=Z(e,\"quantifiedExprInClause\").map(a=>{let s=Fe(K(a,[\"typedVariableBinding\",\"varName\"]));return a=K(a,[\"sourceExpr\",\"*\"]),{name:s,fb:_(a,me(t))}}),new Wd(r,e,_(o,me(t)),n)}function Om(e,t){var n=Z(e,\"*\").map(r=>_(r,t));return n.length===1?n[0]:(n=te(e,\"type\"),new Fi(Z(e,\"*\").map(r=>_(r,t)),n))}function Gm(e,t){let n=te(e,\"type\");return Z(e,\"*\").reduce((r,o)=>r===null?_(o,me(t)):new Xd(r,_(o,me(t)),n),null)}function Dm(e,t){let n=te(e,\"type\");return e=[K(e,[\"firstOperand\",\"*\"]),K(e,[\"secondOperand\",\"*\"])],new to(new ao({localName:\"concat\",namespaceURI:\"http://www.w3.org/2005/xpath-functions\",prefix:\"\"},e.length,n),e.map(r=>_(r,me(t))),n)}function km(e,t){let n=te(e,\"type\");e=[O(O(e,\"startExpr\"),\"*\"),O(O(e,\"endExpr\"),\"*\")];let r=new ao({localName:\"to\",namespaceURI:\"http://fontoxpath/operators\",prefix:\"\"},e.length,n);return new to(r,e.map(o=>_(o,me(t))),n)}function Mm(e,t){if(!t.Y)throw Error(\"XPST0003: Use of XQuery functionality is not allowed in XPath context\");let n=Fe(O(e,\"tagName\"));var r=O(e,\"attributeList\");let o=r?Z(r,\"attributeConstructor\").map(a=>_(a,me(t))):[];return r=r?Z(r,\"namespaceDeclaration\").map(a=>{let s=O(a,\"prefix\");return{prefix:s?de(s):\"\",uri:de(O(a,\"uri\"))}}):[],e=(e=O(e,\"elementContent\"))?Z(e,\"*\").map(a=>_(a,me(t))):[],new Ec(n,o,r,e)}function Um(e,t){if(!t.Y)throw Error(\"XPST0003: Use of XQuery functionality is not allowed in XPath context\");let n=Fe(O(e,\"attributeName\"));var r=O(e,\"attributeValue\");return r=r?de(r):null,e=(e=O(e,\"attributeValueExpr\"))?Z(e,\"*\").map(o=>_(o,me(t))):null,new Bc(n,{value:r,nb:e})}function Pm(e,t){var n=O(e,\"tagName\");return n?n=Fe(n):(n=O(e,\"tagNameExpr\"),n={Pa:_(O(n,\"*\"),me(t))}),e=(e=O(e,\"contentExpr\"))?Z(e,\"*\").map(r=>_(r,me(t))):[],new Ec(n,[],[],e)}function Hm(e,t){let n=Z(O(e,\"transformCopies\"),\"transformCopy\").map(o=>{let a=Fe(O(O(o,\"varRef\"),\"name\"));return{fb:_(O(O(o,\"copySource\"),\"*\"),t),Lb:new tt(a.prefix,a.namespaceURI,a.localName)}}),r=_(O(O(e,\"modifyExpr\"),\"*\"),t);return e=_(O(O(e,\"returnExpr\"),\"*\"),t),new pm(n,r,e)}function Xm(e,t){if(!t.Y)throw Error(\"XPST0003: Use of XQuery functionality is not allowed in XPath context\");let n=te(e,\"type\"),r=_(O(O(e,\"argExpr\"),\"*\"),t),o=Z(e,\"typeswitchExprCaseClause\").map(a=>{let s=Z(a,\"sequenceTypeUnion\").length===0?[O(a,\"sequenceType\")]:Z(O(a,\"sequenceTypeUnion\"),\"sequenceType\");return{pb:_(K(a,[\"resultExpr\",\"*\"]),t),Kb:s.map(l=>{let p=O(l,\"occurrenceIndicator\");return{hc:p?de(p):\"\",Jb:_(O(l,\"*\"),t)}})}});return e=_(K(e,[\"typeswitchExprDefaultClause\",\"resultExpr\",\"*\"]),t),new mm(r,o,e,n)}function jm(e,t){if(!t.Y)throw Error(\"XPST0003: Use of XQuery functionality is not allowed in XPath context\");let n=te(e,\"type\"),r=_(O(O(e,\"argExpr\"),\"*\"),t),o=Z(e,\"switchExprCaseClause\").map(a=>{let s=Z(a,\"switchCaseExpr\");return{pb:_(K(a,[\"resultExpr\",\"*\"]),t),Hb:s.map(l=>_(O(l,\"*\"),t))}});return e=_(K(e,[\"switchExprDefaultClause\",\"resultExpr\",\"*\"]),t),new gm(r,o,e,n)}function ki(e,t){return _(e,t)}let sa=new Map;class $m{constructor(t,n,r,o,a,s){this.v=t,this.D=n,this.h=r,this.kb=o,this.o=a,this.l=s}}function bm(e,t,n,r,o,a,s,l){return e=sa.get(e),e?(t=e[t+(a?\"_DEBUG\":\"\")],t&&(t=t.find(p=>p.o===s&&p.v.every(m=>n(m.prefix)===m.namespaceURI)&&p.D.every(m=>r[m.name]!==void 0)&&p.kb.every(m=>o[m.prefix]===m.namespaceURI)&&p.l.every(m=>{let T=l(m.fc,m.arity);return T&&T.namespaceURI===m.Eb.namespaceURI&&T.localName===m.Eb.localName})))?{aa:t.h,jc:!1}:null):null}function Sc(e,t,n,r,o,a,s){let l=sa.get(e);l||(l=Object.create(null),sa.set(e,l)),e=t+(a?\"_DEBUG\":\"\"),(t=l[e])||(t=l[e]=[]),t.push(new $m(Object.values(n.h),Object.values(n.o),o,Object.keys(r).map(p=>({namespaceURI:r[p],prefix:p})),s,n.D))}function ua(e){var t=new un;if(e.namespaceURI!==\"http://www.w3.org/2005/XQueryX\"&&e.namespaceURI!==\"http://www.w3.org/2005/XQueryX\"&&e.namespaceURI!==\"http://fontoxml.com/fontoxpath\"&&e.namespaceURI!==\"http://www.w3.org/2007/xquery-update-10\")throw At(\"The XML structure passed as an XQueryX program was not valid XQueryX\");let n=[e.localName===\"stackTrace\"?\"x:stackTrace\":e.localName],r=t.getAllAttributes(e);r&&0<r.length&&n.push(Array.from(r).reduce((o,a)=>(a.localName!==\"comment\"&&a.localName!==\"start\"&&a.localName!==\"end\"||e.localName!==\"stackTrace\"?a.localName===\"type\"?o[a.localName]=Tn(a.value):o[a.localName]=a.value:o[a.localName]=JSON.parse(a.value),o),{})),t=t.getChildNodes(e);for(let o of t)switch(o.nodeType){case 1:n.push(ua(o));break;case 3:n.push(o.data)}return n}let uo=Object.create(null);var Rc=(e,t)=>{let n=uo[e];n||(n=uo[e]={Ia:[],Va:[],pa:null,source:t.source});let r=n.pa||(()=>{});n.Ia=n.Ia.concat(t.Ia),n.Va=n.Va.concat(t.Va),n.pa=o=>{r(o),t.pa&&t.pa(o)}},Mi=(e,t)=>{let n=uo[t];if(!n)throw Error(`XQST0051: No modules found with the namespace uri ${t}`);n.Ia.forEach(r=>{r.cb&&Ei(e,t,r.localName,r.arity,r)}),n.Va.forEach(r=>{bt(e,t,r.localName),Rl(e,t,r.localName,(o,a)=>oe(r.aa,o,a))})},lo=()=>{Object.keys(uo).forEach(e=>{if(e=uo[e],e.pa)try{e.pa(e)}catch(t){e.pa=null,lt(e.source,t)}e.pa=null})};function Ui(e){return e.replace(/(\\x0D\\x0A)|(\\x0D(?!\\x0A))/g,`\n`)}var i=c;function Pi(e,t){return(n,r)=>t.has(r)?t.get(r):(n=e(n,r),t.set(r,n),n)}function ie(e,t){return(0,i.delimited)(t,e,t)}function j(e,t){return e.reverse().reduce((n,r)=>(0,i.preceded)(r,n),t)}function _e(e,t,n,r){return(0,i.then)((0,i.then)(e,t,(o,a)=>[o,a]),n,([o,a],s)=>r(o,a,s))}function Hi(e,t,n,r,o){return(0,i.then)((0,i.then)((0,i.then)(e,t,(a,s)=>[a,s]),n,([a,s],l)=>[a,s,l]),r,([a,s,l],p)=>o(a,s,l,p))}function Lm(e,t,n,r,o,a){return(0,i.then)((0,i.then)((0,i.then)((0,i.then)(e,t,(s,l)=>[s,l]),n,([s,l],p)=>[s,l,p]),r,([s,l,p],m)=>[s,l,p,m]),o,([s,l,p,m],T)=>a(s,l,p,m,T))}function dn(e){return(0,i.map)(e,t=>[t])}function xe(e,t){return(0,i.map)((0,i.or)(e),()=>t)}function Ve(e){return(t,n)=>(t=e.exec(t.substring(n)))&&t.index===0?(0,i.okWithValue)(n+t[0].length,t[0]):(0,i.error)(n,[e.source],!1)}var Oc=(0,i.or)([(0,i.token)(\" \"),(0,i.token)(\"\t\"),(0,i.token)(\"\\r\"),(0,i.token)(`\n`)]),Gc=(0,i.token)(\"(:\"),Dc=(0,i.token)(\":)\"),qm=(0,i.token)(\"(#\"),kc=(0,i.token)(\"#)\"),He=(0,i.token)(\"(\"),ke=(0,i.token)(\")\"),Mc=(0,i.token)(\"[\"),Uc=(0,i.token)(\"]\"),mn=(0,i.token)(\"{\"),gn=(0,i.token)(\"}\"),Ym=(0,i.token)(\"{{\"),Qm=(0,i.token)(\"}}\"),la=(0,i.token)(\"'\"),_m=(0,i.token)(\"''\"),ca=(0,i.token)('\"'),Vm=(0,i.token)('\"\"'),Jm=(0,i.token)(\"<![CDATA[\"),Pc=(0,i.token)(\"]]>\"),Km=(0,i.token)(\"/>\"),zm=(0,i.token)(\"</\"),Wm=(0,i.token)(\"<!--\"),Zm=(0,i.token)(\"-->\"),eg=(0,i.token)(\"<?\"),Hc=(0,i.token)(\"?>\"),tg=(0,i.token)(\"&#x\"),ng=(0,i.token)(\"&#\"),rg=(0,i.token)(\":*\"),og=(0,i.token)(\"*:\"),Hn=(0,i.token)(\":=\"),ag=(0,i.token)(\"&\"),co=(0,i.token)(\":\"),Xn=(0,i.token)(\";\"),qt=(0,i.token)(\"*\"),Xc=(0,i.token)(\"@\"),Yt=(0,i.token)(\"$\"),ig=(0,i.token)(\"#\"),jc=(0,i.token)(\"%\"),po=(0,i.token)(\"?\"),yn=(0,i.token)(\"=\"),sg=(0,i.followed)((0,i.token)(\"!\"),(0,i.not)((0,i.peek)(yn),[])),Xi=(0,i.followed)((0,i.token)(\"|\"),(0,i.not)((0,i.peek)((0,i.token)(\"|\")),[])),ug=(0,i.token)(\"||\"),lg=(0,i.token)(\"!=\"),$c=(0,i.token)(\"<\"),cg=(0,i.token)(\"<<\"),pg=(0,i.token)(\"<=\"),ji=(0,i.token)(\">\"),hg=(0,i.token)(\">>\"),fg=(0,i.token)(\">=\"),Ke=(0,i.token)(\",\"),Er=(0,i.token)(\".\"),dg=(0,i.token)(\"..\"),pa=(0,i.token)(\"+\"),Ir=(0,i.token)(\"-\"),ha=(0,i.token)(\"/\"),mg=(0,i.token)(\"//\"),gg=(0,i.token)(\"=>\"),yg=(0,i.token)(\"e\"),wg=(0,i.token)(\"E\");(0,i.token)(\"l\"),(0,i.token)(\"L\"),(0,i.token)(\"m\"),(0,i.token)(\"M\");var Ag=(0,i.token)(\"Q\");(0,i.token)(\"x\"),(0,i.token)(\"X\");var Rt=(0,i.token)(\"as\"),vg=(0,i.token)(\"cast\"),xg=(0,i.token)(\"castable\"),Ng=(0,i.token)(\"treat\"),Bg=(0,i.token)(\"instance\"),bc=(0,i.token)(\"of\"),ho=(0,i.token)(\"node\"),Lc=(0,i.token)(\"nodes\"),Eg=(0,i.token)(\"delete\"),Ig=(0,i.token)(\"value\"),Tr=(0,i.token)(\"function\"),fa=(0,i.token)(\"map\"),jn=(0,i.token)(\"element\"),fo=(0,i.token)(\"attribute\"),qc=(0,i.token)(\"schema-element\"),Tg=(0,i.token)(\"intersect\"),Cg=(0,i.token)(\"except\"),Fg=(0,i.token)(\"union\"),Sg=(0,i.token)(\"otherwise\"),Rg=(0,i.token)(\"to\"),Og=(0,i.token)(\"is\"),Gg=(0,i.token)(\"or\"),Dg=(0,i.token)(\"and\"),kg=(0,i.token)(\"div\"),Mg=(0,i.token)(\"idiv\"),Ug=(0,i.token)(\"mod\"),Pg=(0,i.token)(\"eq\"),Hg=(0,i.token)(\"ne\"),Yc=(0,i.token)(\"lt\"),Xg=(0,i.token)(\"le\"),Qc=(0,i.token)(\"gt\"),jg=(0,i.token)(\"ge\"),$g=(0,i.token)(\"amp\"),bg=(0,i.token)(\"quot\"),Lg=(0,i.token)(\"apos\"),_c=(0,i.token)(\"if\"),qg=(0,i.token)(\"then\"),Yg=(0,i.token)(\"else\"),Qg=(0,i.token)(\"allowing\"),$i=(0,i.token)(\"empty\"),bi=(0,i.token)(\"at\"),Vc=(0,i.token)(\"in\"),_g=(0,i.token)(\"for\"),Vg=(0,i.token)(\"let\"),Jg=(0,i.token)(\"where\"),Li=(0,i.token)(\"collation\"),Kg=(0,i.token)(\"group\"),qi=(0,i.token)(\"by\"),Yi=(0,i.token)(\"order\"),zg=(0,i.token)(\"stable\"),Cr=(0,i.token)(\"return\"),da=(0,i.token)(\"array\"),Wg=(0,i.token)(\"document\"),$n=(0,i.token)(\"namespace\"),Jc=(0,i.token)(\"text\"),Kc=(0,i.token)(\"comment\"),zc=(0,i.token)(\"processing-instruction\"),Zg=(0,i.token)(\"lax\"),ey=(0,i.token)(\"strict\"),ty=(0,i.token)(\"validate\"),ny=(0,i.token)(\"type\"),dt=(0,i.token)(\"declare\"),bn=(0,i.token)(\"default\"),ry=(0,i.token)(\"boundary-space\"),Wc=(0,i.token)(\"strip\"),Qi=(0,i.token)(\"preserve\"),oy=(0,i.token)(\"no-preserve\"),ay=(0,i.token)(\"inherit\"),iy=(0,i.token)(\"no-inherit\"),Zc=(0,i.token)(\"greatest\"),ep=(0,i.token)(\"least\"),sy=(0,i.token)(\"copy-namespaces\"),tp=(0,i.token)(\"decimal-format\"),np=(0,i.token)(\"case\"),rp=(0,i.token)(\"typeswitch\"),uy=(0,i.token)(\"some\"),ly=(0,i.token)(\"every\"),cy=(0,i.token)(\"satisfies\"),py=(0,i.token)(\"replace\"),hy=(0,i.token)(\"with\"),fy=(0,i.token)(\"copy\"),dy=(0,i.token)(\"modify\"),my=(0,i.token)(\"first\"),gy=(0,i.token)(\"last\"),yy=(0,i.token)(\"before\"),wy=(0,i.token)(\"after\"),Ay=(0,i.token)(\"into\"),vy=(0,i.token)(\"insert\"),xy=(0,i.token)(\"rename\"),op=(0,i.token)(\"switch\"),Ny=(0,i.token)(\"variable\"),_i=(0,i.token)(\"external\"),By=(0,i.token)(\"updating\"),ap=(0,i.token)(\"import\"),Ey=(0,i.token)(\"schema\"),ip=(0,i.token)(\"module\"),Iy=(0,i.token)(\"base-uri\"),Ty=(0,i.token)(\"construction\"),Cy=(0,i.token)(\"ordering\"),Fy=(0,i.token)(\"ordered\"),Sy=(0,i.token)(\"unordered\"),Ry=(0,i.token)(\"option\"),Oy=(0,i.token)(\"context\"),sp=(0,i.token)(\"item\"),Gy=(0,i.token)(\"xquery\"),Dy=(0,i.token)(\"version\"),up=(0,i.token)(\"encoding\"),ky=(0,i.token)(\"document-node\"),My=(0,i.token)(\"namespace-node\"),Uy=(0,i.token)(\"schema-attribute\"),Py=(0,i.token)(\"ascending\"),Hy=(0,i.token)(\"descending\"),Xy=(0,i.token)(\"empty-sequence\"),jy=(0,i.token)(\"child::\"),$y=(0,i.token)(\"descendant::\"),by=(0,i.token)(\"attribute::\"),Ly=(0,i.token)(\"self::\"),qy=(0,i.token)(\"descendant-or-self::\"),Yy=(0,i.token)(\"following-sibling::\"),Qy=(0,i.token)(\"following::\"),_y=(0,i.token)(\"parent::\"),Vy=(0,i.token)(\"ancestor::\"),Jy=(0,i.token)(\"preceding-sibling::\"),Ky=(0,i.token)(\"preceding::\"),zy=(0,i.token)(\"ancestor-or-self::\"),Wy=(0,i.token)(\"decimal-separator\"),Zy=(0,i.token)(\"grouping-separator\"),ew=(0,i.token)(\"infinity\"),tw=(0,i.token)(\"minus-sign\"),nw=(0,i.token)(\"NaN\"),rw=(0,i.token)(\"per-mille\"),ow=(0,i.token)(\"zero-digit\"),aw=(0,i.token)(\"digit\"),iw=(0,i.token)(\"pattern-separator\"),sw=(0,i.token)(\"exponent-separator\"),uw=(0,i.token)(\"schema-attribute(\"),lw=(0,i.token)(\"document-node(\"),cw=(0,i.token)(\"processing-instruction(\"),pw=(0,i.token)(\"processing-instruction()\"),hw=(0,i.token)(\"comment()\"),fw=(0,i.token)(\"text()\"),dw=(0,i.token)(\"namespace-node()\"),mw=(0,i.token)(\"node()\"),gw=(0,i.token)(\"item()\"),yw=(0,i.token)(\"empty-sequence()\");(0,i.token)(\"`\");var ww=(0,i.token)(\"``[\"),lp=(0,i.token)(\"]``\"),cp=(0,i.token)(\"`{\"),pp=(0,i.token)(\"}`\"),hp=new Map,fp=new Map,Qt=(0,i.or)([Ve(/[\\t\\n\\r -\\uD7FF\\uE000\\uFFFD]/),Ve(/[\\uD800-\\uDBFF][\\uDC00-\\uDFFF]/)]),Aw=(0,i.preceded)((0,i.peek)((0,i.not)((0,i.or)([Gc,Dc]),['comment contents cannot contain \"(:\" or \":)\"'])),Qt),dp=(0,i.map)((0,i.delimited)(Gc,(0,i.star)((0,i.or)([Aw,function(e,t){return dp(e,t)}])),Dc,!0),e=>e.join(\"\")),Vi=(0,i.or)([Oc,dp]),ma=(0,i.map)((0,i.plus)(Oc),e=>e.join(\"\")),G=Pi((0,i.map)((0,i.star)(Vi),e=>e.join(\"\")),hp),b=Pi((0,i.map)((0,i.plus)(Vi),e=>e.join(\"\")),fp);let Ji=(0,i.or)([Ve(/[A-Z_a-z\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD]/),(0,i.then)(Ve(/[\\uD800-\\uDB7F]/),Ve(/[\\uDC00-\\uDFFF]/),(e,t)=>e+t)]),mp=(0,i.or)([Ji,Ve(/[\\-\\.0-9\\xB7\\u0300-\\u036F\\u203F\\u2040]/)]);var at=(0,i.then)(Ji,(0,i.star)(mp),(e,t)=>e+t.join(\"\")),vw=(0,i.map)(at,e=>[\"prefix\",e]);let xw=(0,i.or)([Ji,co]),Nw=(0,i.or)([mp,co]);(0,i.then)(xw,(0,i.star)(Nw),(e,t)=>e+t.join(\"\"));let Bw=(0,i.map)(at,e=>[{prefix:\"\",URI:null},e]),Ew=(0,i.then)(at,(0,i.preceded)(co,at),(e,t)=>[{prefix:e,URI:null},t]);var ga=(0,i.or)([Ew,Bw]),gp=(0,i.followed)(j([Ag,G,mn],(0,i.map)((0,i.star)(Ve(/[^{}]/)),e=>e.join(\"\").replace(/\\s+/g,\" \").trim())),gn);let Iw=(0,i.then)(gp,at,(e,t)=>[e,t]);var Se=(0,i.or)([(0,i.map)(Iw,e=>[{prefix:null,URI:e[0]},e[1]]),ga]),yp=(0,i.or)([(0,i.map)(Se,e=>[\"QName\",...e]),(0,i.map)(qt,()=>[\"star\"])]),Ki=(0,i.map)((0,i.preceded)(Yt,Se),e=>[\"varRef\",[\"name\",...e]]),ze=(0,i.peek)((0,i.or)([He,ca,la,Vi])),Tw=(0,i.map)((0,i.or)([jy,$y,by,Ly,qy,Yy,Qy]),e=>e.substring(0,e.length-2)),Cw=(0,i.map)((0,i.or)([_y,Vy,Jy,Ky,zy]),e=>e.substring(0,e.length-2)),zi=_e(ag,(0,i.or)([Yc,Qc,$g,bg,Lg]),Xn,(e,t,n)=>e+t+n),Wi=(0,i.or)([_e(tg,Ve(/[0-9a-fA-F]+/),Xn,(e,t,n)=>e+t+n),_e(ng,Ve(/[0-9]+/),Xn,(e,t,n)=>e+t+n)]),Zi=xe([Vm],'\"'),es=xe([_m],\"'\"),Fw=dn(xe([hw],\"commentTest\")),Sw=dn(xe([fw],\"textTest\")),Rw=dn(xe([dw],\"namespaceTest\")),Ow=dn(xe([mw],\"anyKindTest\"));let Ln=Ve(/[0-9]+/),Gw=(0,i.then)((0,i.or)([(0,i.then)(Er,Ln,(e,t)=>e+t),(0,i.then)(Ln,(0,i.optional)((0,i.preceded)(Er,Ve(/[0-9]*/))),(e,t)=>e+(t!==null?\".\"+t:\"\"))]),_e((0,i.or)([yg,wg]),(0,i.optional)((0,i.or)([pa,Ir])),Ln,(e,t,n)=>e+(t||\"\")+n),(e,t)=>[\"doubleConstantExpr\",[\"value\",e+t]]),Dw=(0,i.or)([(0,i.map)((0,i.preceded)(Er,Ln),e=>[\"decimalConstantExpr\",[\"value\",\".\"+e]]),(0,i.then)((0,i.followed)(Ln,Er),(0,i.optional)(Ln),(e,t)=>[\"decimalConstantExpr\",[\"value\",e+\".\"+(t!==null?t:\"\")]])]);var ts=(0,i.map)(Ln,e=>[\"integerConstantExpr\",[\"value\",e]]),kw=(0,i.followed)((0,i.or)([Gw,Dw,ts]),(0,i.peek)((0,i.not)(Ve(/[a-zA-Z]/),[\"no alphabetical characters after numeric literal\"]))),Mw=(0,i.map)((0,i.followed)(Er,(0,i.peek)((0,i.not)(Er,[\"context item should not be followed by another .\"]))),()=>[\"contextItemExpr\"]),wp=(0,i.or)([da,fo,Kc,ky,jn,Xy,Tr,_c,sp,fa,My,ho,zc,Uy,qc,op,Jc,rp]),Uw=dn(xe([po],\"argumentPlaceholder\")),Pw=(0,i.or)([po,qt,pa]),Hw=(0,i.preceded)((0,i.peek)((0,i.not)(Ve(/[{}<&]/),[\"elementContentChar cannot be {, }, <, or &\"])),Qt),Xw=(0,i.map)((0,i.delimited)(Jm,(0,i.star)((0,i.preceded)((0,i.peek)((0,i.not)(Pc,['CDataSection content may not contain \"]]>\"'])),Qt)),Pc,!0),e=>[\"CDataSection\",e.join(\"\")]),jw=(0,i.preceded)((0,i.peek)((0,i.not)(Ve(/[\"{}<&]/),['quotAttrValueContentChar cannot be \", {, }, <, or &'])),Qt),$w=(0,i.preceded)((0,i.peek)((0,i.not)(Ve(/['{}<&]/),[\"aposAttrValueContentChar cannot be ', {, }, <, or &\"])),Qt),bw=(0,i.map)((0,i.star)((0,i.or)([(0,i.preceded)((0,i.peek)((0,i.not)(Ir,[])),Qt),(0,i.map)(j([Ir,(0,i.peek)((0,i.not)(Ir,[]))],Qt),e=>\"-\"+e)])),e=>e.join(\"\")),Lw=(0,i.map)((0,i.delimited)(Wm,bw,Zm,!0),e=>[\"computedCommentConstructor\",[\"argExpr\",[\"stringConstantExpr\",[\"value\",e]]]]);let qw=(0,i.filter)(at,e=>e.toLowerCase()!==\"xml\",['A processing instruction target cannot be \"xml\"']),Yw=(0,i.map)((0,i.star)((0,i.preceded)((0,i.peek)((0,i.not)(Hc,[])),Qt)),e=>e.join(\"\"));var Qw=(0,i.then)((0,i.preceded)(eg,(0,i.cut)(qw)),(0,i.cut)((0,i.followed)((0,i.optional)((0,i.preceded)(ma,Yw)),Hc)),(e,t)=>[\"computedPIConstructor\",[\"piTarget\",e],[\"piValueExpr\",[\"stringConstantExpr\",[\"value\",t]]]]),ns=(0,i.map)(mg,()=>[\"stepExpr\",[\"xpathAxis\",\"descendant-or-self\"],[\"anyKindTest\"]]),_w=(0,i.or)([Zg,ey]),Vw=(0,i.map)((0,i.star)((0,i.followed)(Qt,(0,i.peek)((0,i.not)(kc,[\"Pragma contents should not contain '#)'\"])))),e=>e.join(\"\")),Jw=(0,i.map)((0,i.followed)((0,i.or)([Pg,Hg,Yc,Xg,Qc,jg]),ze),e=>e+\"Op\"),Kw=(0,i.or)([(0,i.followed)(xe([Og],\"isOp\"),ze),xe([cg],\"nodeBeforeOp\"),xe([hg],\"nodeAfterOp\")]),zw=(0,i.or)([xe([yn],\"equalOp\"),xe([lg],\"notEqualOp\"),xe([pg],\"lessThanOrEqualOp\"),xe([$c],\"lessThanOp\"),xe([fg],\"greaterThanOrEqualOp\"),xe([ji],\"greaterThanOp\")]),Ww=(0,i.map)(By,()=>[\"annotation\",[\"annotationName\",\"updating\"]]);let Zw=(0,i.or)([Qi,oy]),e1=(0,i.or)([ay,iy]);var t1=(0,i.or)([Wy,Zy,ew,tw,nw,jc,rw,ow,aw,iw,sw]),n1=(0,i.map)(j([dt,b,ry,b],(0,i.or)([Qi,Wc])),e=>[\"boundarySpaceDecl\",e]),r1=(0,i.map)(j([dt,b,Ty,b],(0,i.or)([Qi,Wc])),e=>[\"constructionDecl\",e]),o1=(0,i.map)(j([dt,b,Cy,b],(0,i.or)([Fy,Sy])),e=>[\"orderingModeDecl\",e]),a1=(0,i.map)(j([dt,b,bn,b,Yi,b,$i,b],(0,i.or)([Zc,ep])),e=>[\"emptyOrderDecl\",e]),i1=(0,i.then)(j([dt,b,sy,b],Zw),j([G,Ke,G],e1),(e,t)=>[\"copyNamespacesDecl\",[\"preserveMode\",e],[\"inheritMode\",t]]);function rs(e){switch(e[0]){case\"constantExpr\":case\"varRef\":case\"contextItemExpr\":case\"functionCallExpr\":case\"sequenceExpr\":case\"elementConstructor\":case\"computedElementConstructor\":case\"computedAttributeConstructor\":case\"computedDocumentConstructor\":case\"computedTextConstructor\":case\"computedCommentConstructor\":case\"computedNamespaceConstructor\":case\"computedPIConstructor\":case\"orderedExpr\":case\"unorderedExpr\":case\"namedFunctionRef\":case\"inlineFunctionExpr\":case\"dynamicFunctionInvocationExpr\":case\"mapConstructor\":case\"arrayConstructor\":case\"stringConstructor\":case\"unaryLookup\":return e}return[\"sequenceExpr\",e]}function Ap(e){if(!(1<=e&&55295>=e||57344<=e&&65533>=e||65536<=e&&1114111>=e))throw Error(\"XQST0090: The character reference \"+e+\" (\"+e.toString(16)+\") does not reference a valid codePoint.\")}function ya(e){return e.replace(/(&[^;]+);/g,t=>{if(/^&#x/.test(t))return t=parseInt(t.slice(3,-1),16),Ap(t),String.fromCodePoint(t);if(/^&#/.test(t))return t=parseInt(t.slice(2,-1),10),Ap(t),String.fromCodePoint(t);switch(t){case\"&lt;\":return\"<\";case\"&gt;\":return\">\";case\"&amp;\":return\"&\";case\"&quot;\":return'\"';case\"&apos;\":return\"'\"}throw Error('XPST0003: Unknown character reference: \"'+t+'\"')})}function vp(e,t,n){if(!e.length)return[];let r=[e[0]];for(let o=1;o<e.length;++o){let a=r[r.length-1];typeof a==\"string\"&&typeof e[o]==\"string\"?r[r.length-1]=a+e[o]:r.push(e[o])}if(typeof r[0]==\"string\"&&r.length===0)return[];if(r=r.reduce((o,a,s)=>{if(typeof a!=\"string\")o.push(a);else if(n&&/^\\s*$/.test(a)){let l=r[s+1];(l&&l[0]===\"CDataSection\"||(s=r[s-1])&&s[0]===\"CDataSection\")&&o.push(ya(a))}else o.push(ya(a));return o},[]),!r.length)return r;if(1<r.length||t)for(e=0;e<r.length;e++)typeof r[e]==\"string\"&&(r[e]=[\"stringConstantExpr\",[\"value\",r[e]]]);return r}function xp(e){return e[0].prefix?e[0].prefix+\":\"+e[1]:e[1]}var Np=(0,i.then)(Se,(0,i.optional)(po),(e,t)=>t!==null?[\"singleType\",[\"atomicType\",...e],[\"optional\"]]:[\"singleType\",[\"atomicType\",...e]]),Bp=(0,i.map)(Se,e=>[\"atomicType\",...e]);let Ep=new Map;function wn(e){function t(f,E){return E.reduce(($,ge)=>[ge[0],[\"firstOperand\",$],[\"secondOperand\",ge[1]]],f)}function n(f,E,$){return(0,i.then)(f,(0,i.star)((0,i.then)(ie(E,G),(0,i.cut)(f),(ge,Ie)=>[ge,Ie])),$)}function r(f,E,$=\"firstOperand\",ge=\"secondOperand\"){return(0,i.then)(f,(0,i.optional)((0,i.then)(ie(E,G),(0,i.cut)(f),(Ie,ut)=>[Ie,ut])),(Ie,ut)=>ut===null?Ie:[ut[0],[$,Ie],[ge,ut[1]]])}function o(f){return e.Ka?(E,$)=>{if(E=f(E,$),!E.success)return E;let ge=m.has($)?m.get($):{offset:$,line:-1,ga:-1},Ie=m.has(E.offset)?m.get(E.offset):{offset:E.offset,line:-1,ga:-1};return m.set($,ge),m.set(E.offset,Ie),$=E.value.Xa,(0,i.okWithValue)(E.offset,[\"x:stackTrace\",Object.assign({start:ge,end:Ie},$?{Xa:$}:{}),E.value])}:f}function a(f,E){return oh(f,E)}function s(f,E){return Is(f,E)}function l(f,E){return o((0,i.or)([hx,wx,Cx,mx,_v,Ex,Ax,Ix,vx,Nx,Lv]))(f,E)}function p(f,E){return n(l,Ke,($,ge)=>ge.length===0?$:[\"sequenceExpr\",$,...ge.map(Ie=>Ie[1])])(f,E)}let m=new Map,T=(0,i.preceded)(Mc,(0,i.followed)(ie(p,G),Uc)),R=(0,i.map)(e.xa?(0,i.or)([ie((0,i.star)((0,i.or)([zi,Wi,Zi,Ve(/[^\"&]/)])),ca),ie((0,i.star)((0,i.or)([zi,Wi,es,Ve(/[^'&]/)])),la)]):(0,i.or)([ie((0,i.star)((0,i.or)([Zi,Ve(/[^\"]/)])),ca),ie((0,i.star)((0,i.or)([es,Ve(/[^']/)])),la)]),f=>f.join(\"\")),X=(0,i.or)([(0,i.map)(j([jn,G],(0,i.delimited)((0,i.followed)(He,G),(0,i.then)(yp,j([G,Ke,G],Se),(f,E)=>[[\"elementName\",f],[\"typeName\",...E]]),(0,i.preceded)(G,ke))),([f,E])=>[\"elementTest\",f,E]),(0,i.map)(j([jn,G],(0,i.delimited)(He,yp,ke)),f=>[\"elementTest\",[\"elementName\",f]]),(0,i.map)(j([jn,G],(0,i.delimited)(He,G,ke)),()=>[\"elementTest\"])]),P=(0,i.or)([(0,i.map)(Se,f=>[\"QName\",...f]),(0,i.map)(qt,()=>[\"star\"])]),V=(0,i.or)([(0,i.map)(j([fo,G],(0,i.delimited)((0,i.followed)(He,G),(0,i.then)(P,j([G,Ke,G],Se),(f,E)=>[[\"attributeName\",f],[\"typeName\",...E]]),(0,i.preceded)(G,ke))),([f,E])=>[\"attributeTest\",f,E]),(0,i.map)(j([fo,G],(0,i.delimited)(He,P,ke)),f=>[\"attributeTest\",[\"attributeName\",f]]),(0,i.map)(j([fo,G],(0,i.delimited)(He,G,ke)),()=>[\"attributeTest\"])]),se=(0,i.map)(j([qc,G,He],(0,i.followed)(Se,ke)),f=>[\"schemaElementTest\",...f]),fe=(0,i.map)((0,i.delimited)(uw,ie(Se,G),ke),f=>[\"schemaAttributeTest\",...f]),Ee=(0,i.map)((0,i.preceded)(lw,(0,i.followed)(ie((0,i.optional)((0,i.or)([X,se])),G),ke)),f=>[\"documentTest\",...f?[f]:[]]),st=(0,i.or)([(0,i.map)((0,i.preceded)(cw,(0,i.followed)(ie((0,i.or)([at,R]),G),ke)),f=>[\"piTest\",[\"piTarget\",f]]),dn(xe([pw],\"piTest\"))]),vn=(0,i.or)([Ee,X,V,se,fe,st,Fw,Sw,Rw,Ow]),Yn=(0,i.or)([(0,i.map)((0,i.preceded)(og,at),f=>[\"Wildcard\",[\"star\"],[\"NCName\",f]]),dn(xe([qt],\"Wildcard\")),(0,i.map)((0,i.followed)(gp,qt),f=>[\"Wildcard\",[\"uri\",f],[\"star\"]]),(0,i.map)((0,i.followed)(at,rg),f=>[\"Wildcard\",[\"NCName\",f],[\"star\"]])]),yo=(0,i.or)([Yn,(0,i.map)(Se,f=>[\"nameTest\",...f])]),_t=(0,i.or)([vn,yo]),xA=(0,i.map)((0,i.delimited)((0,i.followed)(He,G),(0,i.then)(_t,(0,i.star)((0,i.preceded)(ie(Xi,G),_t)),(f,E)=>[f].concat(E)),(0,i.followed)(G,ke),!0),f=>[\"unionNodeTest\",...f]),vs=e.version===4?(0,i.or)([xA,_t]):_t,NA=e.version===4?(0,i.or)([(0,i.map)((0,i.preceded)(Xc,vs),f=>[\"stepExpr\",[\"xpathAxis\",\"attribute\"],f]),(0,i.map)(_t,f=>[\"stepExpr\",[\"xpathAxis\",\"child\"],f])]):(0,i.then)((0,i.optional)(Xc),_t,(f,E)=>f!==null||E[0]===\"attributeTest\"||E[0]===\"schemaAttributeTest\"?[\"stepExpr\",[\"xpathAxis\",\"attribute\"],E]:[\"stepExpr\",[\"xpathAxis\",\"child\"],E]),BA=(0,i.or)([(0,i.then)(Tw,vs,(f,E)=>[\"stepExpr\",[\"xpathAxis\",f],E]),NA]),EA=(0,i.map)(dg,()=>[\"stepExpr\",[\"xpathAxis\",\"parent\"],[\"anyKindTest\"]]),IA=(0,i.or)([(0,i.then)(Cw,vs,(f,E)=>[\"stepExpr\",[\"xpathAxis\",f],E]),EA]),TA=(0,i.map)((0,i.star)((0,i.preceded)(G,T)),f=>0<f.length?[\"predicates\",...f]:void 0),CA=(0,i.then)((0,i.or)([IA,BA]),TA,(f,E)=>E===void 0?f:f.concat([E])),xs=(0,i.or)([kw,(0,i.map)(R,f=>[\"stringConstantExpr\",[\"value\",e.xa?ya(f):f]])]),Ns=(0,i.or)([(0,i.delimited)(He,ie(p,G),ke),(0,i.map)((0,i.delimited)(He,G,ke),()=>[\"sequenceExpr\"])]),nh=(0,i.or)([l,Uw]),xa=(0,i.map)((0,i.delimited)(He,ie((0,i.optional)((0,i.then)(nh,(0,i.star)((0,i.preceded)(ie(Ke,G),nh)),(f,E)=>[f,...E])),G),ke),f=>f!==null?f:[]),FA=(0,i.preceded)((0,i.not)(_e(wp,G,He,()=>{}),[\"cannot use reserved keyword for function names\"]),o((0,i.then)(Se,(0,i.preceded)(G,xa),(f,E)=>{E=[\"functionCallExpr\",[\"functionName\",...f],E!==null?[\"arguments\",...E]:[\"arguments\"]];let $=f[0].prefix,ge=f[0].URI;return f=f[1],E.Xa=$?`${$}:${f}`:ge?`Q{${ge}}${f}`:f,E}))),SA=(0,i.then)(Se,(0,i.preceded)(ig,ts),(f,E)=>[\"namedFunctionRef\",[\"functionName\",...f],E]),Ot=(0,i.delimited)(mn,ie((0,i.optional)(p),G),gn),rh=(0,i.map)(Ot,f=>f||[\"sequenceExpr\"]),Vt=(0,i.or)([(0,i.map)(yw,()=>[[\"voidSequenceType\"]]),(0,i.then)(a,(0,i.optional)((0,i.preceded)(G,Pw)),(f,E)=>[f,...E!==null?[[\"occurrenceIndicator\",E]]:[]])]),Bs=(0,i.then)(j([jc,G],Se),(0,i.optional)((0,i.followed)((0,i.then)(j([He,G],xs),(0,i.star)(j([Ke,G],xs)),(f,E)=>f.concat(E)),ke)),(f,E)=>[\"annotation\",[\"annotationName\",...f],...E?[\"arguments\",E]:[]]),RA=(0,i.map)(j([Tr,G,He,G,qt,G],ke),()=>[\"anyFunctionTest\"]),OA=(0,i.then)(j([Tr,G,He,G],(0,i.optional)(n(Vt,Ke,(f,E)=>f.concat.apply(f,E.map($=>$[1]))))),j([G,ke,b,Rt,b],Vt),(f,E)=>[\"typedFunctionTest\",[\"paramTypeList\",[\"sequenceType\",...f||[]]],[\"sequenceType\",...E]]),GA=(0,i.then)((0,i.star)(Bs),(0,i.or)([RA,OA]),(f,E)=>[E[0],...f,...E.slice(1)]),DA=(0,i.map)(j([fa,G,He,G,qt,G],ke),()=>[\"anyMapTest\"]),kA=(0,i.then)(j([fa,G,He,G],Bp),j([G,Ke],(0,i.followed)(ie(Vt,G),ke)),(f,E)=>[\"typedMapTest\",f,[\"sequenceType\",...E]]),MA=(0,i.or)([DA,kA]),UA=(0,i.map)(j([da,G,He,G,qt,G],ke),()=>[\"anyArrayTest\"]),PA=(0,i.map)(j([da,G,He],(0,i.followed)(ie(Vt,G),ke)),f=>[\"typedArrayTest\",[\"sequenceType\",...f]]),HA=(0,i.or)([UA,PA]),XA=(0,i.map)((0,i.delimited)(He,ie(a,G),ke),f=>[\"parenthesizedItemType\",f]),oh=(0,i.or)([vn,dn(xe([gw],\"anyItemType\")),GA,MA,HA,Bp,XA]),Mr=(0,i.map)(j([Rt,b],Vt),f=>[\"typeDeclaration\",...f]),jA=(0,i.then)((0,i.preceded)(Yt,Se),(0,i.optional)((0,i.preceded)(b,Mr)),(f,E)=>[\"param\",[\"varName\",...f],...E?[E]:[]]),ah=n(jA,Ke,(f,E)=>[f,...E.map($=>$[1])]),$A=Hi((0,i.star)(Bs),j([G,Tr,G,He,G],(0,i.optional)(ah)),j([G,ke,G],(0,i.optional)((0,i.map)(j([Rt,G],(0,i.followed)(Vt,G)),f=>[\"typeDeclaration\",...f]))),rh,(f,E,$,ge)=>[\"inlineFunctionExpr\",...f,[\"paramList\",...E||[]],...$?[$]:[],[\"functionBody\",ge]]),bA=(0,i.or)([SA,$A]),LA=(0,i.map)(l,f=>[\"mapKeyExpr\",f]),qA=(0,i.map)(l,f=>[\"mapValueExpr\",f]),YA=(0,i.then)(LA,(0,i.preceded)(ie(co,G),qA),(f,E)=>[\"mapConstructorEntry\",f,E]),QA=(0,i.preceded)(fa,(0,i.delimited)(ie(mn,G),(0,i.map)((0,i.optional)(n(YA,ie(Ke,G),(f,E)=>[f,...E.map($=>$[1])])),f=>f?[\"mapConstructor\",...f]:[\"mapConstructor\"]),(0,i.preceded)(G,gn))),_A=(0,i.map)((0,i.delimited)(Mc,ie((0,i.optional)(n(l,Ke,(f,E)=>[f,...E.map($=>$[1])].map($=>[\"arrayElem\",$]))),G),Uc),f=>[\"squareArray\",...f!==null?f:[]]),VA=(0,i.map)((0,i.preceded)(da,(0,i.preceded)(G,Ot)),f=>[\"curlyArray\",...f!==null?[[\"arrayElem\",f]]:[]]),JA=(0,i.map)((0,i.or)([_A,VA]),f=>[\"arrayConstructor\",f]),ih=(0,i.map)((0,i.star)((0,i.preceded)((0,i.peek)((0,i.not)((0,i.or)([cp,pp,lp]),[\"String constructors can not contain interpolation characters\"])),Qt)),f=>[\"stringConstructorChars\",f.join(\"\")]),KA=(0,i.map)((0,i.delimited)(cp,p,pp,!0),f=>[\"stringConstructorInterpolation\",f]),zA=(0,i.then)(ih,(0,i.star)((0,i.then)(KA,ih,(f,E)=>[f,E])),(f,E)=>{f=[f];for(let[$,ge]of E)f.push($,ge);return f}),WA=(0,i.map)((0,i.delimited)(ww,zA,lp,!0),f=>[\"stringConstructor\",...f]),sh=(0,i.or)([at,ts,Ns,qt]),ZA=(0,i.map)((0,i.preceded)(po,(0,i.preceded)(G,sh)),f=>f===\"*\"?[\"unaryLookup\",[\"star\"]]:typeof f==\"string\"?[\"unaryLookup\",[\"NCName\",f]]:[\"unaryLookup\",f]),Es=(0,i.or)([zi,Wi,xe([Ym],\"{\"),xe([Qm],\"}\"),(0,i.map)(Ot,f=>f||[\"sequenceExpr\"])]),ev=(0,i.or)([Xw,function(f,E){return uh(f,E)},Es,Hw]),tv=(0,i.or)([(0,i.map)(jw,f=>f.replace(/[\\x20\\x0D\\x0A\\x09]/g,\" \")),Es]),nv=(0,i.or)([(0,i.map)($w,f=>f.replace(/[\\x20\\x0D\\x0A\\x09]/g,\" \")),Es]),rv=(0,i.map)((0,i.or)([ie((0,i.star)((0,i.or)([Zi,tv])),ca),ie((0,i.star)((0,i.or)([es,nv])),la)]),f=>vp(f,!1,!1)),ov=(0,i.then)(ga,(0,i.preceded)(ie(yn,(0,i.optional)(ma)),rv),(f,E)=>{if(f[0].prefix===\"\"&&f[1]===\"xmlns\"){if(E.length&&typeof E[0]!=\"string\")throw Error(\"XQST0022: A namespace declaration may not contain enclosed expressions\");return[\"namespaceDeclaration\",E.length?[\"uri\",E[0]]:[\"uri\"]]}if(f[0].prefix===\"xmlns\"){if(E.length&&typeof E[0]!=\"string\")throw Error(\"XQST0022: The namespace declaration for 'xmlns:\"+f[1]+\"' may not contain enclosed expressions\");return[\"namespaceDeclaration\",[\"prefix\",f[1]],E.length?[\"uri\",E[0]]:[\"uri\"]]}return[\"attributeConstructor\",[\"attributeName\"].concat(f),E.length===0?[\"attributeValue\"]:E.length===1&&typeof E[0]==\"string\"?[\"attributeValue\",E[0]]:[\"attributeValueExpr\"].concat(E)]}),av=(0,i.map)((0,i.star)((0,i.preceded)(ma,(0,i.optional)(ov))),f=>f.filter(Boolean)),iv=_e((0,i.preceded)($c,ga),av,(0,i.or)([(0,i.map)(Km,()=>null),(0,i.then)((0,i.preceded)(ji,(0,i.star)(ev)),j([G,zm],(0,i.followed)(ga,(0,i.then)((0,i.optional)(ma),ji,()=>null))),(f,E)=>[vp(f,!0,!0),E])]),(f,E,$)=>{var ge=$;if($&&$.length){ge=xp(f);let Ie=xp($[1]);if(ge!==Ie)throw Error('XQST0118: The start and the end tag of an element constructor must be equal. \"'+ge+'\" does not match \"'+Ie+'\"');ge=$[0]}return[\"elementConstructor\",[\"tagName\",...f],...E.length?[[\"attributeList\",...E]]:[],...ge&&ge.length?[[\"elementContent\",...ge]]:[]]}),uh=(0,i.or)([iv,Lw,Qw]),sv=(0,i.map)(j([Wg,G],Ot),f=>[\"computedDocumentConstructor\",...f?[[\"argExpr\",f]]:[]]),uv=(0,i.map)(Ot,f=>f?[[\"contentExpr\",f]]:[]),lv=(0,i.then)(j([jn,G],(0,i.or)([(0,i.map)(Se,f=>[\"tagName\",...f]),(0,i.map)((0,i.delimited)(mn,ie(p,G),gn),f=>[\"tagNameExpr\",f])])),(0,i.preceded)(G,uv),(f,E)=>[\"computedElementConstructor\",f,...E]),cv=(0,i.then)((0,i.preceded)(fo,(0,i.or)([(0,i.map)(j([ze,G],Se),f=>[\"tagName\",...f]),(0,i.map)((0,i.preceded)(G,(0,i.delimited)(mn,ie(p,G),gn)),f=>[\"tagNameExpr\",f])])),(0,i.preceded)(G,Ot),(f,E)=>[\"computedAttributeConstructor\",f,[\"valueExpr\",E||[\"sequenceExpr\"]]]),pv=(0,i.map)(Ot,f=>f?[[\"prefixExpr\",f]]:[]),hv=(0,i.map)(Ot,f=>f?[[\"URIExpr\",f]]:[]),fv=(0,i.then)(j([$n,G],(0,i.or)([vw,pv])),(0,i.preceded)(G,hv),(f,E)=>[\"computedNamespaceConstructor\",...f,...E]),dv=(0,i.map)(j([Jc,G],Ot),f=>[\"computedTextConstructor\",...f?[[\"argExpr\",f]]:[]]),mv=(0,i.map)(j([Kc,G],Ot),f=>[\"computedCommentConstructor\",...f?[[\"argExpr\",f]]:[]]),gv=j([zc,G],(0,i.then)((0,i.or)([(0,i.map)(at,f=>[\"piTarget\",f]),(0,i.map)((0,i.delimited)(mn,ie(p,G),gn),f=>[\"piTargetExpr\",f])]),(0,i.preceded)(G,Ot),(f,E)=>[\"computedPIConstructor\",f,...E?[[\"piValueExpr\",E]]:[]])),yv=(0,i.or)([sv,lv,cv,fv,dv,mv,gv]),wv=(0,i.or)([uh,yv]),lh=(0,i.or)([xs,Ki,Ns,Mw,FA,wv,bA,QA,JA,WA,ZA]),ch=(0,i.map)(j([po,G],sh),f=>f===\"*\"?[\"lookup\",[\"star\"]]:typeof f==\"string\"?[\"lookup\",[\"NCName\",f]]:[\"lookup\",f]),Av=(0,i.then)((0,i.map)(lh,f=>rs(f)),(0,i.star)((0,i.or)([(0,i.map)((0,i.preceded)(G,T),f=>[\"predicate\",f]),(0,i.map)((0,i.preceded)(G,xa),f=>[\"argumentList\",f]),(0,i.preceded)(G,ch)])),(f,E)=>{function $(){mh&&ut.length===1?Pr.push([\"predicate\",ut[0]]):ut.length!==0&&Pr.push([\"predicates\",...ut]),ut.length=0}function ge(Qn){$(),Pr.length!==0?(Ie[0][0]===\"sequenceExpr\"&&2<Ie[0].length&&(Ie=[[\"sequenceExpr\",...Ie]]),Ie=[[\"filterExpr\",...Ie],...Pr],Pr.length=0):Qn&&(Ie=[[\"filterExpr\",...Ie]])}let Ie=[f],ut=[],Pr=[],mh=!1;for(let Qn of E)switch(Qn[0]){case\"predicate\":ut.push(Qn[1]);break;case\"lookup\":mh=!0,$(),Pr.push(Qn);break;case\"argumentList\":ge(!1),1<Ie.length&&(Ie=[[\"sequenceExpr\",[\"pathExpr\",[\"stepExpr\",...Ie]]]]),Ie=[[\"dynamicFunctionInvocationExpr\",[\"functionItem\",...Ie],...Qn[1].length?[[\"arguments\",...Qn[1]]]:[]]];break;default:throw Error(\"unreachable\")}return ge(!0),Ie}),Ur=(0,i.or)([(0,i.map)(Av,f=>[\"stepExpr\",...f]),CA]),vv=(0,i.followed)(lh,(0,i.peek)((0,i.not)((0,i.preceded)(G,(0,i.or)([T,xa,ch])),[\"primary expression not followed by predicate, argumentList, or lookup\"]))),xv=(0,i.or)([_e(Ur,(0,i.preceded)(G,ns),(0,i.preceded)(G,s),(f,E,$)=>[\"pathExpr\",f,E,...$]),(0,i.then)(Ur,(0,i.preceded)(ie(ha,G),s),(f,E)=>[\"pathExpr\",f,...E]),vv,(0,i.map)(Ur,f=>[\"pathExpr\",f])]),Is=(0,i.or)([_e(Ur,(0,i.preceded)(G,ns),(0,i.preceded)(G,s),(f,E,$)=>[f,E,...$]),(0,i.then)(Ur,(0,i.preceded)(ie(ha,G),s),(f,E)=>[f,...E]),(0,i.map)(Ur,f=>[f])]),Nv=(0,i.or)([(0,i.map)(j([ha,G],Is),f=>[\"pathExpr\",[\"rootExpr\"],...f]),(0,i.then)(ns,(0,i.preceded)(G,Is),(f,E)=>[\"pathExpr\",[\"rootExpr\"],f,...E]),(0,i.map)((0,i.followed)(ha,(0,i.not)((0,i.preceded)(G,e.xa?Ve(/[*<a-zA-Z]/):Ve(/[*a-zA-Z]/)),[\"Single rootExpr cannot be by followed by something that can be interpreted as a relative path\"])),()=>[\"pathExpr\",[\"rootExpr\"]])]),Bv=Pi((0,i.or)([xv,Nv]),Ep),Ev=(0,i.preceded)(ty,(0,i.then)((0,i.optional)((0,i.or)([(0,i.map)((0,i.preceded)(G,_w),f=>[\"validationMode\",f]),(0,i.map)(j([G,ny,G],Se),f=>[\"type\",...f])])),(0,i.delimited)((0,i.preceded)(G,mn),ie(p,G),gn),(f,E)=>[\"validateExpr\",...f?[f]:[],[\"argExpr\",E]])),Iv=(0,i.delimited)(qm,(0,i.then)((0,i.preceded)(G,Se),(0,i.optional)((0,i.preceded)(b,Vw)),(f,E)=>E?[\"pragma\",[\"pragmaName\",f],[\"pragmaContents\",E]]:[\"pragma\",[\"pragmaName\",f]]),(0,i.preceded)(G,kc)),Tv=(0,i.map)((0,i.followed)((0,i.plus)(Iv),(0,i.preceded)(G,(0,i.delimited)(mn,ie((0,i.optional)(p),G),gn))),f=>[\"extensionExpr\",...f]),Cv=o(n(Bv,sg,(f,E)=>E.length===0?f:[\"simpleMapExpr\",f[0]===\"pathExpr\"?f:[\"pathExpr\",[\"stepExpr\",[\"filterExpr\",rs(f)]]]].concat(E.map($=>($=$[1],$[0]===\"pathExpr\"?$:[\"pathExpr\",[\"stepExpr\",[\"filterExpr\",rs($)]]]))))),Fv=(0,i.or)([Ev,Tv,Cv]),ph=(0,i.or)([(0,i.then)((0,i.or)([xe([Ir],\"unaryMinusOp\"),xe([pa],\"unaryPlusOp\")]),(0,i.preceded)(G,function(f,E){return ph(f,E)}),(f,E)=>[f,[\"operand\",E]]),Fv]),Sv=(0,i.or)([(0,i.map)(Se,f=>[\"EQName\",...f]),Ki,Ns]),Rv=(0,i.then)(ph,(0,i.star)(j([G,gg,G],(0,i.then)(Sv,(0,i.preceded)(G,xa),(f,E)=>[f,E]))),(f,E)=>E.reduce(($,ge)=>[\"arrowExpr\",[\"argExpr\",$],ge[0],[\"arguments\",...ge[1]]],f)),Ov=(0,i.then)(Rv,(0,i.optional)(j([G,vg,b,Rt,ze,G],Np)),(f,E)=>E!==null?[\"castExpr\",[\"argExpr\",f],E]:f),Gv=(0,i.then)(Ov,(0,i.optional)(j([G,xg,b,Rt,ze,G],Np)),(f,E)=>E!==null?[\"castableExpr\",[\"argExpr\",f],E]:f),Dv=(0,i.then)(Gv,(0,i.optional)(j([G,Ng,b,Rt,ze,G],Vt)),(f,E)=>E!==null?[\"treatExpr\",[\"argExpr\",f],[\"sequenceType\",...E]]:f),kv=(0,i.then)(Dv,(0,i.optional)(j([G,Bg,b,bc,ze,G],Vt)),(f,E)=>E!==null?[\"instanceOfExpr\",[\"argExpr\",f],[\"sequenceType\",...E]]:f),Mv=n(kv,(0,i.followed)((0,i.or)([xe([Tg],\"intersectOp\"),xe([Cg],\"exceptOp\")]),ze),t),hh=n(Mv,(0,i.or)([xe([Xi],\"unionOp\"),(0,i.followed)(xe([Fg],\"unionOp\"),ze)]),t),Uv=n(hh,(0,i.followed)(xe([Sg],\"otherwiseOp\"),(0,i.cut)(ze)),t),Pv=n(4<=e.version?Uv:hh,(0,i.or)([xe([qt],\"multiplyOp\"),(0,i.followed)(xe([kg],\"divOp\"),ze),(0,i.followed)(xe([Mg],\"idivOp\"),ze),(0,i.followed)(xe([Ug],\"modOp\"),ze)]),t),Hv=n(Pv,(0,i.or)([xe([Ir],\"subtractOp\"),xe([pa],\"addOp\")]),t),Xv=r(Hv,(0,i.followed)(xe([Rg],\"rangeSequenceExpr\"),ze),\"startExpr\",\"endExpr\"),jv=n(Xv,xe([ug],\"stringConcatenateOp\"),t),$v=r(jv,(0,i.or)([Jw,Kw,zw])),bv=n($v,(0,i.followed)(xe([Dg],\"andOp\"),ze),t),Lv=n(bv,(0,i.followed)(xe([Gg],\"orOp\"),ze),t),qv=o((0,i.map)(p,f=>[\"ifClause\",f])),Yv=o((0,i.map)(l,f=>[\"thenClause\",f])),Qv=o((0,i.map)(l,f=>[\"elseClause\",f])),_v=(0,i.then)((0,i.then)(j([_c,G,He,G],qv),j([G,ke,G,qg,ze,G],Yv),(f,E)=>[f,E]),j([G,Yg,ze,G],Qv),(f,E)=>[\"ifThenElseExpr\",f[0],f[1],E]),Vv=(0,i.delimited)(Qg,b,$i),Jv=(0,i.map)(j([bi,b,Yt],Se),f=>[\"positionalVariableBinding\",...f]),Kv=Lm((0,i.preceded)(Yt,(0,i.cut)(Se)),(0,i.cut)((0,i.preceded)(G,(0,i.optional)(Mr))),(0,i.cut)((0,i.preceded)(G,(0,i.optional)(Vv))),(0,i.cut)((0,i.preceded)(G,(0,i.optional)(Jv))),(0,i.cut)((0,i.preceded)(ie(Vc,G),l)),(f,E,$,ge,Ie)=>[\"forClauseItem\",[\"typedVariableBinding\",[\"varName\",...f,...E?[E]:[]]],...$?[[\"allowingEmpty\"]]:[],...ge?[ge]:[],[\"forExpr\",Ie]]),zv=j([_g,b],n(Kv,Ke,(f,E)=>[\"forClause\",f,...E.map($=>$[1])])),Wv=_e((0,i.preceded)(Yt,Se),(0,i.preceded)(G,(0,i.optional)(Mr)),(0,i.preceded)(ie(Hn,G),l),(f,E,$)=>[\"letClauseItem\",[\"typedVariableBinding\",[\"varName\",...f],...E?[E]:[]],[\"letExpr\",$]]),Zv=(0,i.map)(j([Vg,G],n(Wv,Ke,(f,E)=>[f,...E.map($=>$[1])])),f=>[\"letClause\",...f]),fh=(0,i.or)([zv,Zv]),ex=(0,i.map)(j([Jg,ze,G],l),f=>[\"whereClause\",f]),tx=(0,i.map)((0,i.preceded)(Yt,Se),f=>[\"varName\",...f]),nx=(0,i.then)((0,i.preceded)(G,(0,i.optional)(Mr)),(0,i.preceded)(ie(Hn,G),l),(f,E)=>[\"groupVarInitialize\",...f?[[\"typeDeclaration\",...f]]:[],[\"varValue\",E]]),rx=_e(tx,(0,i.optional)(nx),(0,i.optional)((0,i.map)((0,i.preceded)(ie(Li,G),R),f=>[\"collation\",f])),(f,E,$)=>[\"groupingSpec\",f,...E?[E]:[],...$?[$]:[]]),ox=n(rx,Ke,(f,E)=>[f,...E.map($=>$[1])]),ax=(0,i.map)(j([Kg,b,qi,G],ox),f=>[\"groupByClause\",...f]),ix=_e((0,i.optional)((0,i.or)([Py,Hy])),(0,i.optional)(j([G,$i,G],(0,i.or)([Zc,ep].map(f=>(0,i.map)(f,E=>\"empty \"+E))))),(0,i.preceded)(G,(0,i.optional)(j([Li,G],R))),(f,E,$)=>f||E||$?[\"orderModifier\",...f?[[\"orderingKind\",f]]:[],...E?[[\"emptyOrderingMode\",E]]:[],...$?[[\"collation\",$]]:[]]:null),sx=(0,i.then)(l,(0,i.preceded)(G,ix),(f,E)=>[\"orderBySpec\",[\"orderByExpr\",f],...E?[E]:[]]),ux=n(sx,Ke,(f,E)=>[f,...E.map($=>$[1])]),lx=(0,i.then)((0,i.or)([(0,i.map)(j([Yi,b],qi),()=>!1),(0,i.map)(j([zg,b,Yi,b],qi),()=>!0)]),(0,i.preceded)(G,ux),(f,E)=>[\"orderByClause\",...f?[[\"stable\"]]:[],...E]),cx=(0,i.or)([fh,ex,ax,lx]),px=(0,i.map)(j([Cr,G],l),f=>[\"returnClause\",f]),hx=_e(fh,(0,i.cut)((0,i.star)((0,i.preceded)(G,cx))),(0,i.cut)((0,i.preceded)(G,px)),(f,E,$)=>[\"flworExpr\",f,...E,$]),fx=n(Vt,Xi,(f,E)=>E.length===0?[\"sequenceType\",...f]:[\"sequenceTypeUnion\",[\"sequenceType\",...f],...E.map($=>[\"sequenceType\",...$[1]])]),dx=_e(j([np,G],(0,i.optional)((0,i.preceded)(Yt,(0,i.followed)((0,i.followed)(Se,b),Rt)))),(0,i.preceded)(G,fx),j([b,Cr,b],l),(f,E,$)=>[\"typeswitchExprCaseClause\"].concat(f?[[\"variableBinding\",...f]]:[],[E],[[\"resultExpr\",$]])),mx=Hi((0,i.preceded)(rp,ie((0,i.delimited)(He,ie(p,G),ke),G)),(0,i.plus)((0,i.followed)(dx,G)),j([bn,b],(0,i.optional)((0,i.preceded)(Yt,(0,i.followed)(Se,b)))),j([Cr,b],l),(f,E,$,ge)=>[\"typeswitchExpr\",[\"argExpr\",f],...E,[\"typeswitchExprDefaultClause\",...$||[],[\"resultExpr\",ge]]]),gx=_e((0,i.preceded)(Yt,Se),(0,i.optional)((0,i.preceded)(b,Mr)),(0,i.preceded)(ie(Vc,b),l),(f,E,$)=>[\"quantifiedExprInClause\",[\"typedVariableBinding\",[\"varName\",...f],...E?[E]:[]],[\"sourceExpr\",$]]),yx=n(gx,Ke,(f,E)=>[f,...E.map($=>$[1])]),wx=_e((0,i.or)([uy,ly]),(0,i.preceded)(b,yx),(0,i.preceded)(ie(cy,G),l),(f,E,$)=>[\"quantifiedExpr\",[\"quantifier\",f],...E,[\"predicateExpr\",$]]),Ax=(0,i.map)(j([Eg,b,(0,i.or)([Lc,ho]),b],l),f=>[\"deleteExpr\",[\"targetExpr\",f]]),vx=_e(j([py,b],(0,i.optional)(j([Ig,b,bc],b))),j([ho,b],l),(0,i.preceded)(ie(hy,b),l),(f,E,$)=>f?[\"replaceExpr\",[\"replaceValue\"],[\"targetExpr\",E],[\"replacementExpr\",$]]:[\"replaceExpr\",[\"targetExpr\",E],[\"replacementExpr\",$]]),xx=(0,i.then)(Ki,(0,i.preceded)(ie(Hn,G),l),(f,E)=>[\"transformCopy\",f,[\"copySource\",E]]),Nx=_e(j([fy,b],n(xx,Ke,(f,E)=>[f,...E.map($=>$[1])])),j([G,dy,b],l),(0,i.preceded)(ie(Cr,b),l),(f,E,$)=>[\"transformExpr\",[\"transformCopies\",...f],[\"modifyExpr\",E],[\"returnExpr\",$]]),Bx=(0,i.or)([(0,i.followed)((0,i.map)((0,i.optional)((0,i.followed)(j([Rt,b],(0,i.or)([(0,i.map)(my,()=>[\"insertAsFirst\"]),(0,i.map)(gy,()=>[\"insertAsLast\"])])),b)),f=>f?[\"insertInto\",f]:[\"insertInto\"]),Ay),(0,i.map)(wy,()=>[\"insertAfter\"]),(0,i.map)(yy,()=>[\"insertBefore\"])]),Ex=_e(j([vy,b,(0,i.or)([Lc,ho]),b],l),(0,i.preceded)(b,Bx),(0,i.preceded)(b,l),(f,E,$)=>[\"insertExpr\",[\"sourceExpr\",f],E,[\"targetExpr\",$]]),Ix=(0,i.then)(j([xy,b,ho,G],l),j([b,Rt,b],l),(f,E)=>[\"renameExpr\",[\"targetExpr\",f],[\"newNameExpr\",E]]),Tx=(0,i.then)((0,i.plus)((0,i.then)((0,i.map)(j([np,b],(0,i.cut)(l)),f=>[\"switchCaseExpr\",f]),(0,i.cut)(b),f=>f)),(0,i.cut)(j([Cr,b],(0,i.cut)(l))),(f,E)=>[\"switchExprCaseClause\",...f,[\"resultExpr\",E]]),Cx=_e(j([op,G,He],(0,i.cut)(p)),(0,i.cut)(j([G,ke,(0,i.cut)(G)],(0,i.plus)((0,i.followed)(Tx,G)))),(0,i.cut)(j([bn,b,Cr,b],l)),(f,E,$)=>[\"switchExpr\",[\"argExpr\",f],...E,[\"switchExprDefaultClause\",[\"resultExpr\",$]]]),Fx=(0,i.map)(p,f=>[\"queryBody\",f]),Sx=j([dt,b,$n,b],(0,i.cut)((0,i.then)(at,(0,i.preceded)(ie(yn,G),R),(f,E)=>[\"namespaceDecl\",[\"prefix\",f],[\"uri\",E]]))),Rx=(0,i.then)(j([Ny,b,Yt,G],(0,i.then)(Se,(0,i.optional)((0,i.preceded)(G,Mr)),(f,E)=>[f,E])),(0,i.cut)((0,i.or)([(0,i.map)(j([G,Hn,G],l),f=>[\"varValue\",f]),(0,i.map)(j([b,_i],(0,i.optional)(j([G,Hn,G],l))),f=>[\"external\",...f?[[\"varValue\",f]]:[]])])),([f,E],$)=>[\"varDecl\",[\"varName\",...f],...E!==null?[E]:[],$]),Ox=Hi(j([Tr,b,(0,i.cut)((0,i.peek)((0,i.not)((0,i.followed)(wp,(0,i.not)(co,[\"\"])),[\"Cannot use reserved function name\"])))],Se),(0,i.cut)(j([G,He,G],(0,i.optional)(ah))),(0,i.cut)(j([G,ke],(0,i.optional)(j([b,Rt,b],Vt)))),(0,i.cut)((0,i.preceded)(G,(0,i.or)([(0,i.map)(rh,f=>[\"functionBody\",f]),(0,i.map)(_i,()=>[\"externalDefinition\"])]))),(f,E,$,ge)=>[\"functionDecl\",[\"functionName\",...f],[\"paramList\",...E||[]],...$?[[\"typeDeclaration\",...$]]:[],ge]),Gx=j([dt,b],(0,i.then)((0,i.star)((0,i.followed)((0,i.or)([Bs,Ww]),b)),(0,i.or)([Rx,Ox]),(f,E)=>[E[0],...f,...E.slice(1)])),Dx=(0,i.then)(j([dt,b,bn,b],(0,i.or)([jn,Tr])),j([b,$n,b],R),(f,E)=>[\"defaultNamespaceDecl\",[\"defaultNamespaceCategory\",f],[\"uri\",E]]),kx=(0,i.or)([(0,i.map)((0,i.followed)(j([$n,b],at),(0,i.preceded)(G,yn)),f=>[\"namespacePrefix\",f]),(0,i.map)(j([bn,b,jn,b],$n),()=>[\"defaultElementNamespace\"])]),Mx=j([ap,b,Ey],_e((0,i.optional)((0,i.preceded)(b,kx)),(0,i.preceded)(G,R),(0,i.optional)((0,i.then)(j([b,bi,b],R),(0,i.star)(j([G,Ke,G],R)),(f,E)=>[f,...E])),(f,E,$)=>[\"schemaImport\",...f?[f]:[],[\"targetNamespace\",E],...$?[$]:[]])),Ux=j([ap,b,ip],_e((0,i.optional)((0,i.followed)(j([b,$n,b],at),(0,i.preceded)(G,yn))),(0,i.preceded)(G,R),(0,i.optional)((0,i.then)(j([b,bi,b],R),(0,i.star)(j([G,Ke,G],R)),(f,E)=>[f,...E])),(f,E)=>[\"moduleImport\",[\"namespacePrefix\",f],[\"targetNamespace\",E]])),Px=(0,i.or)([Mx,Ux]),Hx=(0,i.map)(j([dt,b,bn,b,Li,b],R),f=>[\"defaultCollationDecl\",f]),Xx=(0,i.map)(j([dt,b,Iy,b],R),f=>[\"baseUriDecl\",f]),jx=(0,i.then)(j([dt,b],(0,i.or)([(0,i.map)(j([tp,b],Se),f=>[\"decimalFormatName\",...f]),(0,i.map)(j([bn,b],tp),()=>null)])),(0,i.star)((0,i.then)((0,i.preceded)(b,t1),(0,i.preceded)(ie(yn,b),R),(f,E)=>[\"decimalFormatParam\",[\"decimalFormatParamName\",f],[\"decimalFormatParamValue\",E]])),(f,E)=>[\"decimalFormatDecl\",...f?[f]:[],...E]),$x=(0,i.or)([n1,Hx,Xx,r1,o1,a1,i1,jx]),bx=(0,i.then)(j([dt,b,Ry,b],Se),(0,i.preceded)(b,R),(f,E)=>[\"optionDecl\",[\"optionName\",f],[\"optionContents\",E]]),Lx=(0,i.then)(j([dt,b,Oy,b,sp],(0,i.optional)(j([b,Rt],oh))),(0,i.or)([(0,i.map)((0,i.preceded)(ie(Hn,G),l),f=>[\"varValue\",f]),(0,i.map)(j([b,_i],(0,i.optional)((0,i.preceded)(ie(Hn,G),l))),()=>[\"external\"])]),(f,E)=>[\"contextItemDecl\",...f?[[\"contextItemType\",f]]:[],E]),dh=(0,i.then)((0,i.star)((0,i.followed)((0,i.or)([Dx,$x,Sx,Px]),(0,i.cut)(ie(Xn,G)))),(0,i.star)((0,i.followed)((0,i.or)([Lx,Gx,bx]),(0,i.cut)(ie(Xn,G)))),(f,E)=>f.length===0&&E.length===0?null:[\"prolog\",...f,...E]),qx=j([ip,b,$n,b],(0,i.then)((0,i.followed)(at,ie(yn,G)),(0,i.followed)(R,ie(Xn,G)),(f,E)=>[\"moduleDecl\",[\"prefix\",f],[\"uri\",E]])),Yx=(0,i.then)(qx,(0,i.preceded)(G,dh),(f,E)=>[\"libraryModule\",f,...E?[E]:[]]),Qx=(0,i.then)(dh,(0,i.preceded)(G,Fx),(f,E)=>[\"mainModule\",...f?[f]:[],E]),_x=(0,i.map)(j([Gy,G],(0,i.followed)((0,i.or)([(0,i.then)((0,i.preceded)(up,b),R,f=>[\"encoding\",f]),(0,i.then)(j([Dy,b],R),(0,i.optional)(j([b,up,b],R)),(f,E)=>[[\"version\",f],...E?[[\"encoding\",E]]:[]])]),(0,i.preceded)(G,Xn))),f=>[\"versionDecl\",...f]),Vx=(0,i.then)((0,i.optional)(ie(_x,G)),(0,i.or)([Yx,Qx]),(f,E)=>[\"module\",...f?[f]:[],E]),Jx=(0,i.complete)(ie(Vx,G));return(f,E)=>{m.clear(),E=Jx(f,E);let $=1,ge=1;for(let Ie=0;Ie<f.length+1;Ie++){if(m.has(Ie)){let ut=m.get(Ie);ut.line=ge,ut.ga=$}f[Ie]===`\n`?(ge++,$=1):$++}return E}}let s1=wn({Ka:!1,xa:!1,version:3.1}),u1=wn({Ka:!0,xa:!1,version:3.1}),l1=wn({Ka:!1,xa:!0,version:3.1}),c1=wn({Ka:!0,xa:!0,version:3.1}),p1=wn({Ka:!1,xa:!1,version:4}),h1=wn({Ka:!0,xa:!1,version:4}),f1=wn({Ka:!1,xa:!0,version:4}),d1=wn({Ka:!0,xa:!0,version:4});var m1={Ab:{debug:h1,mb:p1},Ib:{debug:u1,mb:s1}},g1={Ab:{debug:d1,mb:f1},Ib:{debug:c1,mb:l1}};function mo(e,t){var n=!!t.Y,r=!!t.debug;if(t=t.version,hp.clear(),fp.clear(),Ep.clear(),n=n?g1:m1,n=t===4?n.Ab:n.Ib,r=(r?n.debug:n.mb)(e,0),r.success===!0)return r.value;throw e=e.substring(0,r.offset).split(`\n`),n=e[e.length-1].length+1,new na({start:{offset:r.offset,line:e.length,ga:n},end:{offset:r.offset+1,line:e.length,ga:n+1}},\"\",\"\",Error(`XPST0003: Failed to parse script. Expected ${[...new Set(r.expected)]}`))}let Ip=\"http://www.w3.org/XML/1998/namespace http://www.w3.org/2001/XMLSchema http://www.w3.org/2001/XMLSchema-instance http://www.w3.org/2005/xpath-functions http://www.w3.org/2005/xpath-functions/math http://www.w3.org/2012/xquery http://www.w3.org/2005/xpath-functions/array http://www.w3.org/2005/xpath-functions/map\".split(\" \");function y1(e,t,n,r,o){var a=O(e,\"functionName\"),s=te(a,\"prefix\")||\"\";let l=te(a,\"URI\"),p=de(a);if(l===null&&(l=s===\"\"?t.v===null?\"http://www.w3.org/2005/xpath-functions\":t.v:t.Z(s),!l&&s))throw Fl(s);if(Ip.includes(l))throw El();if(s=Z(e,\"annotation\").map(P=>O(P,\"annotationName\")),a=s.every(P=>!te(P,\"URI\")&&de(P)!==\"private\"),s=s.some(P=>!te(P,\"URI\")&&de(P)===\"updating\"),!l)throw Ni();let m=zo(e),T=Z(O(e,\"paramList\"),\"param\"),R=T.map(P=>O(P,\"varName\")),X=T.map(P=>zo(P));if(e=O(e,\"functionBody\")){if(t.ua(l,p,X.length))throw Il(l,p);if(!o)return;let P=ki(e[1],{ra:!1,Y:!0}),V=new kn(t),se=R.map(fe=>{let Ee=te(fe,\"URI\"),st=te(fe,\"prefix\");return fe=de(fe),st&&Ee===null&&(Ee=t.Z(st||\"\")),bt(V,Ee,fe)});o=s?{j:X,arity:R.length,callFunction:(fe,Ee,st,...vn)=>(fe=pn(Zt(fe,-1,null,w.empty()),se.reduce((Yn,yo,_t)=>(Yn[yo]=je(vn[_t]),Yn),Object.create(null))),P.s(fe,Ee)),wb:!1,H:!0,cb:a,localName:p,namespaceURI:l,i:m}:{j:X,arity:R.length,callFunction:(fe,Ee,st,...vn)=>(fe=pn(Zt(fe,-1,null,w.empty()),se.reduce((Yn,yo,_t)=>(Yn[yo]=je(vn[_t]),Yn),Object.create(null))),oe(P,fe,Ee)),wb:!1,H:!1,cb:a,localName:p,namespaceURI:l,i:m},n.push({aa:P,Fb:V}),r.push({arity:R.length,aa:P,Bb:o,localName:p,namespaceURI:l,cb:a})}else{if(s)throw Error(\"Updating external function declarations are not supported\");o={j:X,arity:R.length,callFunction:(P,V,se,...fe)=>{let Ee=se.ua(l,p,R.length,!0);if(!Ee)throw Error(`XPST0017: Function Q{${l}}${p} with arity of ${R.length} not registered. ${vi(p)}`);if(Ee.i.type!==m.type||Ee.j.some((st,vn)=>st.type!==X[vn].type))throw Error(\"External function declaration types do not match actual function\");return Ee.callFunction(P,V,se,...fe)},wb:!0,H:!1,localName:p,namespaceURI:l,cb:a,i:m}}Ei(t,l,p,R.length,o)}function os(e,t,n,r){let o=[],a=[];Z(e,\"*\").forEach(T=>{switch(T[0]){case\"moduleImport\":case\"namespaceDecl\":case\"defaultNamespaceDecl\":case\"functionDecl\":case\"varDecl\":break;default:throw Error(\"Not implemented: only module imports, namespace declarations, and function declarations are implemented in XQuery modules\")}});let s=new Set;Z(e,\"moduleImport\").forEach(T=>{let R=de(O(T,\"namespacePrefix\"));if(T=de(O(T,\"targetNamespace\")),s.has(T))throw Error(`XQST0047: The namespace \"${T}\" is imported more than once.`);s.add(T),Dn(t,R,T)}),Z(e,\"namespaceDecl\").forEach(T=>{let R=de(O(T,\"prefix\"));if(T=de(O(T,\"uri\")),R===\"xml\"||R===\"xmlns\"||T===\"http://www.w3.org/XML/1998/namespace\"||T===\"http://www.w3.org/2000/xmlns/\")throw Bi();Dn(t,R,T)});let l=null,p=null;for(let T of Z(e,\"defaultNamespaceDecl\")){let R=de(O(T,\"defaultNamespaceCategory\")),X=de(O(T,\"uri\"));if(!X)throw Ni();if(X===\"http://www.w3.org/XML/1998/namespace\"||X===\"http://www.w3.org/2000/xmlns/\")throw Bi();if(R===\"function\"){if(l)throw Tl();l=X}else if(R===\"element\"){if(p)throw Tl();p=X}}l&&(t.v=l),p&&Dn(t,\"\",p),Z(e,\"functionDecl\").forEach(T=>{y1(T,t,o,a,n)});let m=[];return Z(e,\"varDecl\").forEach(T=>{let R=Fe(O(T,\"varName\")),X=R.namespaceURI;if(X===null&&(X=t.Z(R.prefix),!X&&R.prefix))throw Fl(R.prefix);if(Ip.includes(X))throw El();var P=O(T,\"external\");T=O(T,\"varValue\");let V,se;if(P!==null?(P=O(P,\"varValue\"),P!==null&&(V=O(P,\"*\"))):T!==null&&(V=O(T,\"*\")),m.some(fe=>fe.namespaceURI===X&&fe.localName===R.localName))throw Error(`XQST0049: The variable ${X?`Q{${X}}`:\"\"}${R.localName} has already been declared.`);if(bt(t,X||\"\",R.localName),n&&(V&&(se=ki(V,{ra:!1,Y:!0})),V&&!M0(t,X||\"\",R.localName))){let fe=null;Rl(t,X,R.localName,(Ee,st)=>(fe||(fe=je(oe(se,Ee,st))),fe())),o.push({aa:se,Fb:new kn(t)}),m.push({aa:se,localName:R.localName,namespaceURI:X})}}),a.forEach(T=>{if(!T.Bb.H&&T.aa.H)throw nn(`The function Q{${T.namespaceURI}}${T.localName} is updating but the %updating annotation is missing.`)}),{Ia:a.map(T=>T.Bb),Va:m,source:r,pa:T=>{s.forEach(R=>{Mi(t,R)}),o.forEach(({aa:R,Fb:X})=>{s.forEach(P=>{Mi(X,P)}),T.Ia.forEach(P=>{X.ua(P.namespaceURI,P.localName,P.arity,!0)||P.cb&&Ei(X,P.namespaceURI,P.localName,P.arity,P)}),T.Va.forEach(P=>{X.eb(P.namespaceURI,P.localName)||bt(X,P.namespaceURI,P.localName)}),R.v(X)})}}}function w1(e,t,n,r,o,a,s){let l=t.Y?\"XQuery\":\"XPath\";return n=t.Ha?null:bm(e,l,n,r,o,t.debug,a,s),n!==null?{state:n.jc?1:2,aa:n.aa}:{state:0,ac:typeof e==\"string\"?mo(e,t):ua(e)}}function A1(e,t,n,r){let o=O(e,\"mainModule\");if(!o)throw Error(\"Can not execute a library module.\");let a=O(o,\"prolog\");if(a){if(!t.Y)throw Error(\"XPST0003: Use of XQuery functionality is not allowed in XPath context\");lo(),r=os(a,n,!0,r),r.pa(r)}return pe(e,new ta(n)),e=K(o,[\"queryBody\",\"*\"]),_(e,t)}function Tp(e,t,n,r,o,a,s){let l=new Jo(n,r,a,s),p=new kn(l);switch(0<Object.keys(o).length&&lo(),Object.keys(o).forEach(m=>{let T=o[m];Mi(p,T),Dn(p,m,T)}),typeof e==\"string\"&&(e=Ui(e)),n=w1(e,t,n,r,o,a,s),n.state){case 2:return{fa:p,aa:n.aa};case 1:return n.aa.v(p),Sc(e,t.Y?\"XQuery\":\"XPath\",l,o,n.aa,t.debug,a),{fa:p,aa:n.aa};case 0:return n=A1(n.ac,t,p,e),n.v(p),t.Ha||Sc(e,t.Y?\"XQuery\":\"XPath\",l,o,n,t.debug,a),{fa:p,aa:n}}}function v1(e){if(B(e.type,1))return e.value;if(B(e.type,54))return e.value.node;throw At(`Unable to convert selector argument of type ${Be[e.type]} to either an ${Be[1]} or an ${Be[54]} representing an XQueryX program while calling 'fontoxpath:evaluate'`)}function x1(e,t,n,r){e=e.first();let o=t.first().h.reduce((a,s)=>(a[s.key.value]=je(s.value()),a),Object.create(null));t=o[\".\"]?o[\".\"]():w.empty(),delete o[\".\"],e=v1(e);try{let{aa:a,fa:s}=Tp(e,{ra:!1,Y:!0,debug:r.debug,Ha:r.Ha,version:3.1},m=>n.Z(m),Object.keys(o).reduce((m,T)=>(m[T]=T,m),{}),{},\"http://www.w3.org/2005/xpath-functions\",(m,T)=>n.Ua(m,T)),l=!t.isEmpty(),p=new ir({L:l?t.first():null,Ba:l?0:-1,sa:t,qa:Object.keys(o).reduce((m,T)=>(m[s.eb(null,T)]=o[T],m),Object.create(null))});return{kc:a.h(p,r).value,cc:e}}catch(a){lt(e,a)}}function as(e,t,n){if(t.node.nodeType!==1&&t.node.nodeType!==9)return[];let r=kt(e,t).reduce((o,a)=>{for(let s of as(e,a,n))o.push(s);return o},[]);return n(t)&&r.unshift(t),r}let Cp=(e,t,n,r,o)=>{if(e=o.first(),!e)throw Ft(\"The context is absent, it needs to be present to use id function.\");if(!B(e.type,53))throw At(\"The context item is not a node, it needs to be node to use id function.\");let a=t.h,s=r.N().reduce((l,p)=>(p.value.split(/\\s+/).forEach(m=>{l[m]=!0}),l),Object.create(null));for(t=e.value;t.node.nodeType!==9;)if(t=we(a,t),t===null)throw Error(\"FODC0001: the root node of the target node is not a document node.\");return t=as(a,t,l=>l.node.nodeType!==1||(l=Qa(a,l,\"id\"),!l||!s[l])?!1:(s[l]=!1,!0)),w.create(t.map(l=>Ce(l)))},Fp=(e,t,n,r,o)=>{if(e=o.first(),!e)throw Ft(\"The context is absent, it needs to be present to use idref function.\");if(!B(e.type,53))throw At(\"The context item is not a node, it needs to be node to use idref function.\");let a=t.h,s=r.N().reduce((l,p)=>(l[p.value]=!0,l),Object.create(null));for(t=e.value;t.node.nodeType!==9;)if(t=we(a,t),t===null)throw Error(\"FODC0001: the root node of the context node is not a document node.\");return t=as(a,t,l=>l.node.nodeType!==1?!1:(l=Qa(a,l,\"idref\"))?l.split(/\\s+/).some(p=>s[p]):!1),w.create(t.map(l=>Ce(l)))};function is(e){switch(typeof e){case\"object\":return Array.isArray(e)?w.m(new rt(e.map(t=>je(is(t))))):e===null?w.empty():w.m(new Wt(Object.keys(e).map(t=>({key:N(t,1),value:je(is(e[t]))}))));case\"number\":return w.m(N(e,3));case\"string\":return w.m(N(e,1));case\"boolean\":return e?w.$():w.S();default:throw Error(\"Unexpected type in JSON parse\")}}let Sp=(e,t,n,r,o)=>{let a=w.m(N(\"duplicates\",1));e=Va(e,t,n,o,a);let s=e.isEmpty()?\"use-first\":e.first().value;return r.M(l=>w.m(new Wt(l.reduce((p,m)=>(m.h.forEach(T=>{let R=p.findIndex(X=>ar(X.key,T.key));if(0<=R)switch(s){case\"reject\":throw Error(\"FOJS0003: Duplicate encountered when merging maps.\");case\"use-last\":p.splice(R,1,T);return;case\"combine\":p.splice(R,1,{key:T.key,value:je(w.create(p[R].value().N().concat(T.value().N())))});return;default:return}p.push(T)}),p),[]))))};function ss(e,t,n){let r=1,o=e.value;e=e.Ra(!0);let a=null,s=Math.max(t-1,0);return e!==-1&&(a=Math.max(0,(n===null?e:Math.max(0,Math.min(e,n+(t-1))))-s)),w.create({next:l=>{for(;r<t;)o.next(l),r++;return n!==null&&r>=t+n?W:(l=o.next(l),r++,l)}},a)}function us(e){return e.map(t=>B(t.type,19)?Te(t,3):t)}function Rp(e){if(e=us(e),e.some(t=>Number.isNaN(t.value)))return[N(NaN,3)];if(e=oa(e),!e)throw Error(\"FORG0006: Incompatible types to be converted to a common type\");return e}let Op=(e,t,n,r,o,a)=>ve([o,a],([s,l])=>{if(s.value===1/0)return w.empty();if(s.value===-1/0)return l&&l.value===1/0?w.empty():r;if(l){if(isNaN(l.value))return w.empty();l.value===1/0&&(l=null)}return isNaN(s.value)?w.empty():ss(r,Math.round(s.value),l?Math.round(l.value):null)}),Gp=(e,t,n,r,o)=>{if(r.isEmpty())return o;if(e=us(r.N()),e=oa(e),!e)throw Error(\"FORG0006: Incompatible types to be converted to a common type\");if(!e.every(a=>B(a.type,2)))throw Error(\"FORG0006: items passed to fn:sum are not all numeric.\");return t=e.reduce((a,s)=>a+s.value,0),e.every(a=>B(a.type,5))?w.m(N(t,5)):e.every(a=>B(a.type,3))?w.m(N(t,3)):e.every(a=>B(a.type,4))?w.m(N(t,4)):w.m(N(t,6))};var N1=[].concat(T0,[{namespaceURI:\"http://www.w3.org/2005/xpath-functions\",localName:\"boolean\",j:[{type:59,g:2}],i:{type:0,g:3},callFunction:(e,t,n,r)=>r.ea()?w.$():w.S()},{namespaceURI:\"http://www.w3.org/2005/xpath-functions\",localName:\"true\",j:[],i:{type:0,g:3},callFunction:()=>w.$()},{namespaceURI:\"http://www.w3.org/2005/xpath-functions\",localName:\"not\",j:[{type:59,g:2}],i:{type:0,g:3},callFunction:(e,t,n,r)=>r.ea()===!1?w.$():w.S()},{namespaceURI:\"http://www.w3.org/2005/xpath-functions\",localName:\"false\",j:[],i:{type:0,g:3},callFunction:()=>w.S()}],[{namespaceURI:\"http://www.w3.org/2005/xpath-functions\",localName:\"last\",j:[],i:{type:5,g:3},callFunction:e=>{if(e.L===null)throw Ft(\"The fn:last() function depends on dynamic context, which is absent.\");let t=!1;return w.create({next:()=>{if(t)return W;let n=e.sa.Ra();return t=!0,Q(N(n,5))}},1)}},{namespaceURI:\"http://www.w3.org/2005/xpath-functions\",localName:\"position\",j:[],i:{type:5,g:3},callFunction:e=>{if(e.L===null)throw Ft(\"The fn:position() function depends on dynamic context, which is absent.\");return w.m(N(e.Ba+1,5))}},{namespaceURI:\"http://www.w3.org/2005/xpath-functions\",localName:\"current-dateTime\",j:[],i:{type:10,g:3},callFunction:e=>w.m(N(Za(e),10))},{namespaceURI:\"http://www.w3.org/2005/xpath-functions\",localName:\"current-date\",j:[],i:{type:7,g:3},callFunction:e=>w.m(N(It(Za(e),7),7))},{namespaceURI:\"http://www.w3.org/2005/xpath-functions\",localName:\"current-time\",j:[],i:{type:8,g:3},callFunction:e=>w.m(N(It(Za(e),8),8))},{namespaceURI:\"http://www.w3.org/2005/xpath-functions\",localName:\"implicit-timezone\",j:[],i:{type:17,g:3},callFunction:e=>w.m(N(Tt(e),17))}],C0,F0,O0,[{namespaceURI:\"http://www.w3.org/2005/xpath-functions\",localName:\"years-from-duration\",j:[{type:18,g:0}],i:{type:5,g:0},callFunction:(e,t,n,r)=>r.isEmpty()?r:w.m(N(r.first().value.ab(),5))},{namespaceURI:\"http://www.w3.org/2005/xpath-functions\",localName:\"months-from-duration\",j:[{type:18,g:0}],i:{type:5,g:0},callFunction:(e,t,n,r)=>r.isEmpty()?r:w.m(N(r.first().value.$a(),5))},{namespaceURI:\"http://www.w3.org/2005/xpath-functions\",localName:\"days-from-duration\",j:[{type:18,g:0}],i:{type:5,g:0},callFunction:(e,t,n,r)=>r.isEmpty()?r:w.m(N(r.first().value.Za(),5))},{namespaceURI:\"http://www.w3.org/2005/xpath-functions\",localName:\"hours-from-duration\",j:[{type:18,g:0}],i:{type:5,g:0},callFunction:(e,t,n,r)=>r.isEmpty()?r:w.m(N(r.first().value.getHours(),5))},{namespaceURI:\"http://www.w3.org/2005/xpath-functions\",localName:\"minutes-from-duration\",j:[{type:18,g:0}],i:{type:5,g:0},callFunction:(e,t,n,r)=>r.isEmpty()?r:w.m(N(r.first().value.getMinutes(),5))},{namespaceURI:\"http://www.w3.org/2005/xpath-functions\",localName:\"seconds-from-duration\",j:[{type:18,g:0}],i:{type:4,g:0},callFunction:(e,t,n,r)=>r.isEmpty()?r:w.m(N(r.first().value.getSeconds(),4))}],G0,[{namespaceURI:\"http://www.w3.org/2005/xpath-functions\",localName:\"id\",j:[{type:1,g:2},{type:53,g:3}],i:{type:54,g:2},callFunction:Cp},{namespaceURI:\"http://www.w3.org/2005/xpath-functions\",localName:\"id\",j:[{type:1,g:2}],i:{type:54,g:2},callFunction(e,t,n,r){return Cp(e,t,n,r,w.m(e.L))}},{namespaceURI:\"http://www.w3.org/2005/xpath-functions\",localName:\"idref\",j:[{type:1,g:2},{type:53,g:3}],i:{type:53,g:2},callFunction:Fp},{namespaceURI:\"http://www.w3.org/2005/xpath-functions\",localName:\"idref\",j:[{type:1,g:2}],i:{type:53,g:2},callFunction(e,t,n,r){return Fp(e,t,n,r,w.m(e.L))}}],[{namespaceURI:\"http://www.w3.org/2005/xpath-functions\",localName:\"parse-json\",j:[{type:1,g:3}],i:{type:59,g:0},callFunction:(e,t,n,r)=>{let o;try{o=JSON.parse(r.first().value)}catch(a){throw Error(\"FOJS0001: parsed JSON string contains illegal JSON.\")}return is(o)}}],[{namespaceURI:\"http://www.w3.org/2005/xpath-functions/map\",localName:\"contains\",j:[{type:61,g:3},{type:46,g:3}],i:{type:0,g:3},callFunction:(e,t,n,r,o)=>ve([r,o],([a,s])=>a.h.some(l=>ar(l.key,s))?w.$():w.S())},{namespaceURI:\"http://www.w3.org/2005/xpath-functions/map\",localName:\"entry\",j:[{type:46,g:3},{type:59,g:2}],i:{type:61,g:3},callFunction:(e,t,n,r,o)=>r.map(a=>new Wt([{key:a,value:je(o)}]))},{namespaceURI:\"http://www.w3.org/2005/xpath-functions/map\",localName:\"for-each\",j:[{type:61,g:3},{type:59,g:2}],i:{type:59,g:2},callFunction:(e,t,n,r,o)=>ve([r,o],([a,s])=>Ct(a.h.map(l=>s.value.call(void 0,e,t,n,w.m(l.key),l.value()))))},{namespaceURI:\"http://www.w3.org/2005/xpath-functions/map\",localName:\"get\",j:[{type:61,g:3},{type:46,g:3}],i:{type:59,g:2},callFunction:Va},{namespaceURI:\"http://www.w3.org/2005/xpath-functions/map\",localName:\"keys\",j:[{type:61,g:3}],i:{type:46,g:2},callFunction:(e,t,n,r)=>ve([r],([o])=>w.create(o.h.map(a=>a.key)))},{namespaceURI:\"http://www.w3.org/2005/xpath-functions/map\",localName:\"merge\",j:[{type:61,g:2},{type:61,g:3}],i:{type:61,g:3},callFunction:Sp},{namespaceURI:\"http://www.w3.org/2005/xpath-functions/map\",localName:\"merge\",j:[{type:61,g:2}],i:{type:61,g:3},callFunction(e,t,n,r){return Sp(e,t,n,r,w.m(new Wt([{key:N(\"duplicates\",1),value:()=>w.m(N(\"use-first\",1))}])))}},{namespaceURI:\"http://www.w3.org/2005/xpath-functions/map\",localName:\"put\",j:[{type:61,g:3},{type:46,g:3},{type:59,g:2}],i:{type:61,g:3},callFunction:(e,t,n,r,o,a)=>ve([r,o],([s,l])=>{s=s.h.concat();let p=s.findIndex(m=>ar(m.key,l));return 0<=p?s.splice(p,1,{key:l,value:je(a)}):s.push({key:l,value:je(a)}),w.m(new Wt(s))})},{namespaceURI:\"http://www.w3.org/2005/xpath-functions/map\",localName:\"remove\",j:[{type:61,g:3},{type:46,g:2}],i:{type:61,g:3},callFunction:(e,t,n,r,o)=>ve([r],([a])=>{let s=a.h.concat();return o.M(l=>(l.forEach(p=>{let m=s.findIndex(T=>ar(T.key,p));0<=m&&s.splice(m,1)}),w.m(new Wt(s))))})},{namespaceURI:\"http://www.w3.org/2005/xpath-functions/map\",localName:\"size\",j:[{type:61,g:3}],i:{type:5,g:3},callFunction:(e,t,n,r)=>r.map(o=>N(o.h.length,5))}],[{namespaceURI:\"http://www.w3.org/2005/xpath-functions/math\",localName:\"pi\",j:[],i:{type:3,g:3},callFunction:()=>w.m(N(Math.PI,3))},{namespaceURI:\"http://www.w3.org/2005/xpath-functions/math\",localName:\"exp\",j:[{type:3,g:0}],i:{type:3,g:0},callFunction:(e,t,n,r)=>r.map(o=>N(Math.pow(Math.E,o.value),3))},{namespaceURI:\"http://www.w3.org/2005/xpath-functions/math\",localName:\"exp10\",j:[{type:3,g:0}],i:{type:3,g:0},callFunction:(e,t,n,r)=>r.map(o=>N(Math.pow(10,o.value),3))},{namespaceURI:\"http://www.w3.org/2005/xpath-functions/math\",localName:\"log\",j:[{type:3,g:0}],i:{type:3,g:0},callFunction:(e,t,n,r)=>r.map(o=>N(Math.log(o.value),3))},{namespaceURI:\"http://www.w3.org/2005/xpath-functions/math\",localName:\"log10\",j:[{type:3,g:0}],i:{type:3,g:0},callFunction:(e,t,n,r)=>r.map(o=>N(Math.log10(o.value),3))},{namespaceURI:\"http://www.w3.org/2005/xpath-functions/math\",localName:\"pow\",j:[{type:3,g:0},{type:2,g:3}],i:{type:3,g:0},callFunction:(e,t,n,r,o)=>o.M(([a])=>r.map(s=>Math.abs(s.value)!==1||Number.isFinite(a.value)?N(Math.pow(s.value,a.value),3):N(1,3)))},{namespaceURI:\"http://www.w3.org/2005/xpath-functions/math\",localName:\"sqrt\",j:[{type:3,g:0}],i:{type:3,g:0},callFunction:(e,t,n,r)=>r.map(o=>N(Math.sqrt(o.value),3))},{namespaceURI:\"http://www.w3.org/2005/xpath-functions/math\",localName:\"sin\",j:[{type:3,g:0}],i:{type:3,g:0},callFunction:(e,t,n,r)=>r.map(o=>N(Math.sin(o.value),3))},{namespaceURI:\"http://www.w3.org/2005/xpath-functions/math\",localName:\"cos\",j:[{type:3,g:0}],i:{type:3,g:0},callFunction:(e,t,n,r)=>r.map(o=>N(Math.cos(o.value),3))},{namespaceURI:\"http://www.w3.org/2005/xpath-functions/math\",localName:\"tan\",j:[{type:3,g:0}],i:{type:3,g:0},callFunction:(e,t,n,r)=>r.map(o=>N(Math.tan(o.value),3))},{namespaceURI:\"http://www.w3.org/2005/xpath-functions/math\",localName:\"asin\",j:[{type:3,g:0}],i:{type:3,g:0},callFunction:(e,t,n,r)=>r.map(o=>N(Math.asin(o.value),3))},{namespaceURI:\"http://www.w3.org/2005/xpath-functions/math\",localName:\"acos\",j:[{type:3,g:0}],i:{type:3,g:0},callFunction:(e,t,n,r)=>r.map(o=>N(Math.acos(o.value),3))},{namespaceURI:\"http://www.w3.org/2005/xpath-functions/math\",localName:\"atan\",j:[{type:3,g:0}],i:{type:3,g:0},callFunction:(e,t,n,r)=>r.map(o=>N(Math.atan(o.value),3))},{namespaceURI:\"http://www.w3.org/2005/xpath-functions/math\",localName:\"atan2\",j:[{type:3,g:0},{type:3,g:3}],i:{type:3,g:0},callFunction:(e,t,n,r,o)=>o.M(([a])=>r.map(s=>N(Math.atan2(s.value,a.value),3)))}],u0,a0,[{namespaceURI:\"http://fontoxpath/operators\",localName:\"to\",j:[{type:5,g:0},{type:5,g:0}],i:{type:5,g:2},callFunction:(e,t,n,r,o)=>{if(e=r.first(),o=o.first(),e===null||o===null)return w.empty();let a=e.value;return o=o.value,a>o?w.empty():w.create({next:()=>Q(N(a++,5))},o-a+1)}}],[{namespaceURI:\"http://www.w3.org/2005/xpath-functions\",localName:\"QName\",j:[{type:1,g:0},{type:1,g:3}],i:{type:23,g:3},callFunction:(e,t,n,r,o)=>ve([r,o],([a,s])=>{if(s=s.value,!Xo(s,23))throw Error(\"FOCA0002: The provided QName is invalid.\");if(a=a&&a.value||null,a===null&&s.includes(\":\"))throw Error(\"FOCA0002: The URI of a QName may not be empty if a prefix is provided.\");if(r.isEmpty())return w.m(N(new tt(\"\",null,s),23));if(!s.includes(\":\"))return w.m(N(new tt(\"\",a,s),23));let[l,p]=s.split(\":\");return w.m(N(new tt(l,a,p),23))})},{namespaceURI:\"http://www.w3.org/2005/xpath-functions\",localName:\"prefix-from-QName\",j:[{type:23,g:0}],i:{type:24,g:0},callFunction:(e,t,n,r)=>ve([r],([o])=>o===null?w.empty():(o=o.value,o.prefix?w.m(N(o.prefix,24)):w.empty()))},{namespaceURI:\"http://www.w3.org/2005/xpath-functions\",localName:\"local-name-from-QName\",j:[{type:23,g:0}],i:{type:24,g:0},callFunction:(e,t,n,r)=>r.map(o=>N(o.value.localName,24))},{namespaceURI:\"http://www.w3.org/2005/xpath-functions\",localName:\"namespace-uri-from-QName\",j:[{type:23,g:0}],i:{type:20,g:0},callFunction:(e,t,n,r)=>r.map(o=>N(o.value.namespaceURI||\"\",20))}],[{j:[{type:59,g:2}],callFunction:(e,t,n,r)=>r.X({empty:()=>w.$(),multiple:()=>w.S(),m:()=>w.S()}),localName:\"empty\",namespaceURI:\"http://www.w3.org/2005/xpath-functions\",i:{type:0,g:3}},{j:[{type:59,g:2}],callFunction:(e,t,n,r)=>r.X({empty:()=>w.S(),multiple:()=>w.$(),m:()=>w.$()}),localName:\"exists\",namespaceURI:\"http://www.w3.org/2005/xpath-functions\",i:{type:0,g:3}},{j:[{type:59,g:2}],callFunction:(e,t,n,r)=>ss(r,1,1),localName:\"head\",namespaceURI:\"http://www.w3.org/2005/xpath-functions\",i:{type:59,g:0}},{j:[{type:59,g:2}],callFunction:(e,t,n,r)=>ss(r,2,null),localName:\"tail\",namespaceURI:\"http://www.w3.org/2005/xpath-functions\",i:{type:59,g:2}},{j:[{type:59,g:2},{type:5,g:3},{type:59,g:2}],callFunction:(e,t,n,r,o,a)=>r.isEmpty()?a:a.isEmpty()?r:(e=r.N(),o=o.first().value-1,0>o?o=0:o>e.length&&(o=e.length),t=e.slice(o),w.create(e.slice(0,o).concat(a.N(),t))),localName:\"insert-before\",namespaceURI:\"http://www.w3.org/2005/xpath-functions\",i:{type:59,g:2}},{j:[{type:59,g:2},{type:5,g:3}],callFunction:(e,t,n,r,o)=>(e=o.first().value,r=r.N(),!r.length||1>e||e>r.length||r.splice(e-1,1),w.create(r)),localName:\"remove\",namespaceURI:\"http://www.w3.org/2005/xpath-functions\",i:{type:59,g:2}},{j:[{type:59,g:2}],callFunction:(e,t,n,r)=>r.M(o=>w.create(o.reverse())),localName:\"reverse\",namespaceURI:\"http://www.w3.org/2005/xpath-functions\",i:{type:59,g:2}},{j:[{type:59,g:2},{type:3,g:3}],callFunction:(e,t,n,r,o)=>Op(e,t,n,r,o,w.empty()),localName:\"subsequence\",namespaceURI:\"http://www.w3.org/2005/xpath-functions\",i:{type:59,g:2}},{j:[{type:59,g:2},{type:3,g:3},{type:3,g:3}],callFunction:Op,localName:\"subsequence\",namespaceURI:\"http://www.w3.org/2005/xpath-functions\",i:{type:59,g:2}},{j:[{type:59,g:2}],callFunction:(e,t,n,r)=>r,localName:\"unordered\",namespaceURI:\"http://www.w3.org/2005/xpath-functions\",i:{type:59,g:2}},{j:[{type:46,g:2}],callFunction:(e,t,n,r)=>{let o=$e(r,t).N();return w.create(o).filter((a,s)=>o.slice(0,s).every(l=>!eo(a,l)))},localName:\"distinct-values\",namespaceURI:\"http://www.w3.org/2005/xpath-functions\",i:{type:46,g:2}},{j:[{type:46,g:2},{type:1,g:3}],callFunction(){throw Error(\"FOCH0002: No collations are supported\")},localName:\"distinct-values\",namespaceURI:\"http://www.w3.org/2005/xpath-functions\",i:{type:46,g:2}},{j:[{type:46,g:2},{type:46,g:3}],callFunction:(e,t,n,r,o)=>o.M(([a])=>$e(r,t).map((s,l)=>ra(\"eqOp\",s.type,a.type)(s,a,e)?N(l+1,5):N(-1,5)).filter(s=>s.value!==-1)),localName:\"index-of\",namespaceURI:\"http://www.w3.org/2005/xpath-functions\",i:{type:5,g:2}},{j:[{type:46,g:2},{type:46,g:3},{type:1,g:3}],callFunction(){throw Error(\"FOCH0002: No collations are supported\")},localName:\"index-of\",namespaceURI:\"http://www.w3.org/2005/xpath-functions\",i:{type:5,g:2}},{j:[{type:59,g:2},{type:59,g:2}],callFunction:(e,t,n,r,o)=>{let a=!1,s=hn(e,t,n,r,o);return w.create({next:()=>{if(a)return W;let l=s.next(0);return l.done?l:(a=!0,Q(N(l.value,0)))}})},localName:\"deep-equal\",namespaceURI:\"http://www.w3.org/2005/xpath-functions\",i:{type:0,g:3}},{j:[{type:59,g:2},{type:59,g:2},{type:1,g:3}],callFunction(){throw Error(\"FOCH0002: No collations are supported\")},localName:\"deep-equal\",namespaceURI:\"http://www.w3.org/2005/xpath-functions\",i:{type:0,g:3}},{j:[{type:59,g:2}],callFunction:(e,t,n,r)=>{let o=!1;return w.create({next:()=>{if(o)return W;let a=r.Ra();return o=!0,Q(N(a,5))}})},localName:\"count\",namespaceURI:\"http://www.w3.org/2005/xpath-functions\",i:{type:5,g:3}},{j:[{type:46,g:2}],callFunction:(e,t,n,r)=>{if(r.isEmpty())return r;if(e=us(r.N()),e=oa(e),!e)throw Error(\"FORG0006: Incompatible types to be converted to a common type\");if(!e.every(o=>B(o.type,2)))throw Error(\"FORG0006: items passed to fn:avg are not all numeric.\");return t=e.reduce((o,a)=>o+a.value,0)/e.length,e.every(o=>B(o.type,5)||B(o.type,3))?w.m(N(t,3)):e.every(o=>B(o.type,4))?w.m(N(t,4)):w.m(N(t,6))},localName:\"avg\",namespaceURI:\"http://www.w3.org/2005/xpath-functions\",i:{type:46,g:0}},{j:[{type:46,g:2}],callFunction:(e,t,n,r)=>r.isEmpty()?r:(e=Rp(r.N()),w.m(e.reduce((o,a)=>o.value<a.value?a:o))),localName:\"max\",namespaceURI:\"http://www.w3.org/2005/xpath-functions\",i:{type:46,g:0}},{j:[{type:46,g:2},{type:1,g:3}],callFunction(){throw Error(\"FOCH0002: No collations are supported\")},localName:\"max\",namespaceURI:\"http://www.w3.org/2005/xpath-functions\",i:{type:46,g:0}},{j:[{type:46,g:2}],callFunction:(e,t,n,r)=>r.isEmpty()?r:(e=Rp(r.N()),w.m(e.reduce((o,a)=>o.value>a.value?a:o))),localName:\"min\",namespaceURI:\"http://www.w3.org/2005/xpath-functions\",i:{type:46,g:0}},{j:[{type:46,g:2},{type:1,g:3}],callFunction(){throw Error(\"FOCH0002: No collations are supported\")},localName:\"min\",namespaceURI:\"http://www.w3.org/2005/xpath-functions\",i:{type:46,g:0}},{j:[{type:46,g:2}],callFunction:(e,t,n,r)=>Gp(e,t,n,r,w.m(N(0,5))),localName:\"sum\",namespaceURI:\"http://www.w3.org/2005/xpath-functions\",i:{type:46,g:3}},{j:[{type:46,g:2},{type:46,g:0}],callFunction:Gp,localName:\"sum\",namespaceURI:\"http://www.w3.org/2005/xpath-functions\",i:{type:46,g:0}},{j:[{type:59,g:2}],callFunction:(e,t,n,r)=>{if(!r.isEmpty()&&!r.oa())throw Error(\"FORG0003: The argument passed to fn:zero-or-one contained more than one item.\");return r},localName:\"zero-or-one\",namespaceURI:\"http://www.w3.org/2005/xpath-functions\",i:{type:59,g:0}},{j:[{type:59,g:2}],callFunction:(e,t,n,r)=>{if(r.isEmpty())throw Error(\"FORG0004: The argument passed to fn:one-or-more was empty.\");return r},localName:\"one-or-more\",namespaceURI:\"http://www.w3.org/2005/xpath-functions\",i:{type:59,g:1}},{j:[{type:59,g:2}],callFunction:(e,t,n,r)=>{if(!r.oa())throw Error(\"FORG0005: The argument passed to fn:exactly-one is empty or contained more than one item.\");return r},localName:\"exactly-one\",namespaceURI:\"http://www.w3.org/2005/xpath-functions\",i:{type:59,g:3}},{j:[{type:59,g:2},{type:60,g:3}],callFunction:(e,t,n,r,o)=>{if(r.isEmpty())return r;let a=o.first(),s=a.o;if(s.length!==1)throw Error(\"XPTY0004: signature of function passed to fn:filter is incompatible.\");return r.filter(l=>{if(l=Pt(s[0],w.m(l),t,\"fn:filter\",!1),l=a.value.call(void 0,e,t,n,l),!l.oa()||!B(l.first().type,0))throw Error(\"XPTY0004: signature of function passed to fn:filter is incompatible.\");return l.first().value})},localName:\"filter\",namespaceURI:\"http://www.w3.org/2005/xpath-functions\",i:{type:59,g:2}},{j:[{type:59,g:2},{type:60,g:3}],callFunction:(e,t,n,r,o)=>{if(r.isEmpty())return r;let a=o.first(),s=a.o;if(s.length!==1)throw Error(\"XPTY0004: signature of function passed to fn:for-each is incompatible.\");let l=r.value,p;return w.create({next:m=>{for(;;){if(!p){var T=l.next(0);if(T.done)return T;T=Pt(s[0],w.m(T.value),t,\"fn:for-each\",!1),p=a.value.call(void 0,e,t,n,T).value}if(T=p.next(m),!T.done)return T;p=null}}})},localName:\"for-each\",namespaceURI:\"http://www.w3.org/2005/xpath-functions\",i:{type:59,g:2}},{j:[{type:59,g:2},{type:59,g:2},{type:60,g:3}],callFunction:(e,t,n,r,o,a)=>{if(r.isEmpty())return r;let s=a.first(),l=s.o;if(l.length!==2)throw Error(\"XPTY0004: signature of function passed to fn:fold-left is incompatible.\");return r.M(p=>p.reduce((m,T)=>(m=Pt(l[0],m,t,\"fn:fold-left\",!1),T=Pt(l[1],w.m(T),t,\"fn:fold-left\",!1),s.value.call(void 0,e,t,n,m,T)),o))},localName:\"fold-left\",namespaceURI:\"http://www.w3.org/2005/xpath-functions\",i:{type:59,g:2}},{j:[{type:59,g:2},{type:59,g:2},{type:60,g:3}],callFunction:(e,t,n,r,o,a)=>{if(r.isEmpty())return r;let s=a.first(),l=s.o;if(l.length!==2)throw Error(\"XPTY0004: signature of function passed to fn:fold-right is incompatible.\");return r.M(p=>p.reduceRight((m,T)=>(m=Pt(l[0],m,t,\"fn:fold-right\",!1),T=Pt(l[1],w.m(T),t,\"fn:fold-right\",!1),s.value.call(void 0,e,t,n,T,m)),o))},localName:\"fold-right\",namespaceURI:\"http://www.w3.org/2005/xpath-functions\",i:{type:59,g:2}},{j:[{type:59,g:2}],callFunction:(e,t,n,r)=>{if(!t.Wa)throw Error(\"serialize() called but no xmlSerializer set in execution parameters.\");if(e=r.N(),!e.every(o=>B(o.type,53)))throw Error(\"Expected argument to fn:serialize to resolve to a sequence of Nodes.\");return w.m(N(e.map(o=>t.Wa.serializeToString(Ze(o.value,t,!1))).join(\"\"),1))},localName:\"serialize\",namespaceURI:\"http://www.w3.org/2005/xpath-functions\",i:{type:1,g:3}}],i0,[{j:[{type:59,g:3},{type:61,g:3}],callFunction:(e,t,n,r,o)=>{let a,s;return w.create({next:()=>{a||({kc:a,cc:s}=x1(r,o,n,t));try{return a.next(0)}catch(l){lt(s,l)}}})},localName:\"evaluate\",namespaceURI:\"http://fontoxml.com/fontoxpath\",i:{type:59,g:2}},{j:[],callFunction:()=>w.m(N(typeof d==\"undefined\"?\"devbuild\":d,1)),localName:\"version\",namespaceURI:\"http://fontoxml.com/fontoxpath\",i:{type:1,g:3}}],[{j:[{type:23,g:3},{type:5,g:3}],callFunction:(e,t,n,r,o)=>ve([r,o],([a,s])=>{let l=n.ua(a.value.namespaceURI,a.value.localName,s.value);return l===null?w.empty():(a=new sn({j:l.j,arity:s.value,localName:a.value.localName,namespaceURI:a.value.namespaceURI,i:l.i,value:l.callFunction}),w.m(a))}),localName:\"function-lookup\",namespaceURI:\"http://www.w3.org/2005/xpath-functions\",i:{g:0,type:60}},{j:[{type:60,g:3}],callFunction:(e,t,n,r)=>ve([r],([o])=>o.bb()?w.empty():w.m(N(new tt(\"\",o.l,o.D),23))),localName:\"function-name\",namespaceURI:\"http://www.w3.org/2005/xpath-functions\",i:{type:23,g:0}},{j:[{type:60,g:3}],callFunction:(e,t,n,r)=>ve([r],([o])=>w.m(N(o.v,5))),localName:\"function-arity\",namespaceURI:\"http://www.w3.org/2005/xpath-functions\",i:{type:5,g:3}}]);class Dp{constructor(t){this.h=t}createAttributeNS(t,n){return this.h.createAttributeNS(t,n)}createCDATASection(t){return this.h.createCDATASection(t)}createComment(t){return this.h.createComment(t)}createDocument(){return this.h.createDocument()}createElementNS(t,n){return this.h.createElementNS(t,n)}createProcessingInstruction(t,n){return this.h.createProcessingInstruction(t,n)}createTextNode(t){return this.h.createTextNode(t)}}var ls=Symbol(\"IS_XPATH_VALUE_SYMBOL\");function B1(e){return(t,n)=>(t=su(new Go(n===null?new un:n),t,Tn(e)),{[ls]:!0,zb:t})}N1.forEach(e=>{Bl(e.namespaceURI,e.localName,e.j,e.i,e.callFunction)});function kp(e){return e&&typeof e==\"object\"&&\"lookupNamespaceURI\"in e?t=>e.lookupNamespaceURI(t||null):()=>null}function cs(e){return({prefix:t,localName:n})=>t?null:{namespaceURI:e,localName:n}}function ps(e,t,n,r,o,a){r==null&&(r=r||{});let s=o?{jb:o.logger||{trace:console.log.bind(console)},Oa:o.documentWriter,kb:o.moduleImports,Db:o.namespaceResolver,dc:o.functionNameResolver,Ja:o.nodesFactory,Wa:o.xmlSerializer}:{jb:{trace:console.log.bind(console)},kb:{},Db:null,Ja:null,Oa:null,Wa:null},l=new Go(n===null?new un:n);n=s.kb||Object.create(null);var p=o.defaultFunctionNamespaceURI===void 0?\"http://www.w3.org/2005/xpath-functions\":o.defaultFunctionNamespaceURI;let m=Tp(e,a,s.Db||kp(t),r,n,p,s.dc||cs(p));e=t?Uo(l,t):w.empty(),t=!s.Ja&&a.Y?new ol(t):new Dp(s.Ja),n=s.Oa?new eu(s.Oa):Ya,p=s.Wa;let T=Object.keys(r).reduce((P,V)=>{let se=r[V];return P[`Q{}${V}[0]`]=se&&typeof se==\"object\"&&ls in se?()=>w.create(se.zb):()=>Uo(l,r[V]),P},Object.create(null)),R;for(let P of Object.keys(m.fa.Fa))T[P]||(T[P]=()=>(0,m.fa.Fa[P])(R,X));R=new ir({L:e.first(),Ba:0,sa:e,qa:T});let X=new lu(a.debug,a.Ha,l,t,n,o.currentContext,new Map,s.jb,p);return{tb:R,ub:X,aa:m.aa}}function hs(e,t){let n={},r=0,o=!1,a=null;return{next:()=>{if(o)return W;for(;r<e.h.length;){let l=e.h[r].key.value;if(!a){let p=e.h[r];var s=p.value().X({default:m=>m,multiple:()=>{throw Error(`Serialization error: The value of an entry in a map is expected to be a single item or an empty sequence. Use arrays when putting multiple values in a map. The value of the key ${p.key.value} holds multiple items`)}}).first();if(s===null){n[l]=null,r++;continue}a=qn(s,t)}s=a.next(0),a=null,n[l]=s.value,r++}return o=!0,Q(n)}}}function fs(e,t){let n=[],r=0,o=!1,a=null;return{next:()=>{if(o)return W;for(;r<e.members.length;){if(!a){var s=e.members[r]().X({default:l=>l,multiple:()=>{throw Error(\"Serialization error: The value of an entry in an array is expected to be a single item or an empty sequence. Use nested arrays when putting multiple values in an array.\")}}).first();if(s===null){n[r++]=null;continue}a=qn(s,t)}s=a.next(0),a=null,n[r++]=s.value}return o=!0,Q(n)}}}function qn(e,t){if(B(e.type,61))return hs(e,t);if(B(e.type,62))return fs(e,t);if(B(e.type,23)){let n=e.value;return{next:()=>Q(`Q{${n.namespaceURI||\"\"}}${n.localName}`)}}switch(e.type){case 7:case 8:case 9:case 11:case 12:case 13:case 14:case 15:let n=e.value;return{next:()=>Q(Vr(n))};case 47:case 53:case 54:case 55:case 56:case 57:case 58:let r=e.value;return{next:()=>Q(Ze(r,t,!1))};default:return{next:()=>Q(e.value)}}}var be={ANY:0,NUMBER:1,STRING:2,BOOLEAN:3,NODES:7,FIRST_NODE:9,STRINGS:10,MAP:11,ARRAY:12,NUMBERS:13,ALL_RESULTS:14,ASYNC_ITERATOR:99};be[be.ANY]=\"ANY\",be[be.NUMBER]=\"NUMBER\",be[be.STRING]=\"STRING\",be[be.BOOLEAN]=\"BOOLEAN\",be[be.NODES]=\"NODES\",be[be.FIRST_NODE]=\"FIRST_NODE\",be[be.STRINGS]=\"STRINGS\",be[be.MAP]=\"MAP\",be[be.ARRAY]=\"ARRAY\",be[be.NUMBERS]=\"NUMBERS\",be[be.ALL_RESULTS]=\"ALL_RESULTS\",be[be.ASYNC_ITERATOR]=\"ASYNC_ITERATOR\";function Mp(e,t,n,r){switch(n){case 3:return t.ea();case 2:return t=$e(t,r).N(),t.length?t.map(p=>Te(p,1).value).join(\" \"):\"\";case 10:return t=$e(t,r).N(),t.length?t.map(p=>p.value+\"\"):[];case 1:return t=t.first(),t!==null&&B(t.type,2)?t.value:NaN;case 9:if(t=t.first(),t===null)return null;if(!B(t.type,53))throw Error(\"Expected XPath \"+$t(e)+\" to resolve to Node. Got \"+Be[t.type]);return Ze(t.value,r,!1);case 7:if(t=t.N(),!t.every(p=>B(p.type,53)))throw Error(\"Expected XPath \"+$t(e)+\" to resolve to a sequence of Nodes.\");return t.map(p=>Ze(p.value,r,!1));case 11:if(t=t.N(),t.length!==1)throw Error(\"Expected XPath \"+$t(e)+\" to resolve to a single map.\");if(t=t[0],!B(t.type,61))throw Error(\"Expected XPath \"+$t(e)+\" to resolve to a map\");return hs(t,r).next(0).value;case 12:if(t=t.N(),t.length!==1)throw Error(\"Expected XPath \"+$t(e)+\" to resolve to a single array.\");if(t=t[0],!B(t.type,62))throw Error(\"Expected XPath \"+$t(e)+\" to resolve to an array\");return fs(t,r).next(0).value;case 13:return t.N().map(p=>{if(!B(p.type,2))throw Error(\"Expected XPath \"+$t(e)+\" to resolve to numbers\");return p.value});case 99:let o=t.value,a=null,s=!1,l=()=>{for(;!s;){if(!a){var p=o.next(0);if(p.done){s=!0;break}a=qn(p.value,r)}return p=a.next(0),a=null,p}return Promise.resolve({done:!0,value:null})};return\"asyncIterator\"in Symbol?{[Symbol.asyncIterator](){return this},next:()=>new Promise(p=>p(l())).catch(p=>{lt(e,p)})}:{next:()=>new Promise(p=>p(l()))};case 14:return t.N().map(p=>qn(p,r).next(0).value);default:return t=t.N(),t.every(p=>B(p.type,53)&&!B(p.type,47))?(t=t.map(p=>Ze(p.value,r,!1)),t.length===1?t[0]:t):t.length===1?(t=t[0],B(t.type,62)?fs(t,r).next(0).value:B(t.type,61)?hs(t,r).next(0).value:en(t,r).first().value):$e(w.create(t),r).N().map(p=>p.value)}}let wa=!1,An=null;var E1={getPerformanceSummary(){let e=An.getEntriesByType(\"measure\").filter(t=>t.name.startsWith(\"XPath: \"));return Array.from(e.reduce((t,n)=>{var r=n.name.substring(7);return t.has(r)?(r=t.get(r),r.times+=1,r.totalDuration+=n.duration):t.set(r,{xpath:r,times:1,totalDuration:n.duration,average:0}),t},new Map).values()).map(t=>(t.average=t.totalDuration/t.times,t)).sort((t,n)=>n.totalDuration-t.totalDuration)},setPerformanceImplementation(e){An=e},startProfiling(){if(An===null)throw Error(\"Performance API object must be set using `profiler.setPerformanceImplementation` before starting to profile\");An.clearMarks(),An.clearMeasures(),wa=!0},stopProfiling(){wa=!1}};let Fr=0;var I1={XPATH_3_1_LANGUAGE:\"XPath3.1\",XQUERY_3_1_LANGUAGE:\"XQuery3.1\",XQUERY_UPDATE_3_1_LANGUAGE:\"XQueryUpdate3.1\",XPATH_4_0_LANGUAGE:\"XPath4.0\",XQUERY_4_0_LANGUAGE:\"XQuery4.0\",XQUERY_UPDATE_4_0_LANGUAGE:\"XQueryUpdate4.0\"};let Le=(e,t,n,r,o,a)=>{if(o=o||0,!e||typeof e!=\"string\"&&!(\"nodeType\"in e))throw new TypeError(\"Failed to execute 'evaluateXPath': xpathExpression must be a string or an element depicting an XQueryX DOM tree.\");a=a||{};let s,l;try{let m=ps(e,t,n||null,r||{},a,{ra:a.language===\"XQueryUpdate3.1\",Y:a.language===\"XQuery3.1\"||a.language===\"XQueryUpdate3.1\",debug:!!a.debug,Ha:!!a.disableCache,version:a.language===\"XPath4.0\"||a.language===\"XQuery4.0\"||a.language===\"XQueryUpdate4.0\"?4:3.1});var p=m.tb;s=m.ub,l=m.aa}catch(m){lt(e,m)}if(l.H)throw Error(\"XUST0001: Updating expressions should be evaluated as updating expressions\");if(o===3&&t&&typeof t==\"object\"&&\"nodeType\"in t&&(n=l.D(),t=zt(t),n!==null&&!t.includes(n)))return!1;try{t=e,wa&&(typeof t!=\"string\"&&(t=$t(t)),An.mark(`${t}${Fr===0?\"\":\"@\"+Fr}`),Fr++);let m=oe(l,p,s),T=Mp(e,m,o,s);return o=e,wa&&(typeof o!=\"string\"&&(o=$t(o)),Fr--,p=`${o}${Fr===0?\"\":\"@\"+Fr}`,An.measure(`XPath: ${o}`,p),An.clearMarks(p)),T}catch(m){lt(e,m)}};Object.assign(Le,{lc:14,ANY_TYPE:0,Nb:12,Ob:99,BOOLEAN_TYPE:3,Qb:9,Tb:11,Vb:7,Wb:13,NUMBER_TYPE:1,Xb:10,STRING_TYPE:2,mc:\"XPath3.1\",nc:\"XQuery3.1\",$b:\"XQueryUpdate3.1\"}),Object.assign(Le,{ALL_RESULTS_TYPE:14,ANY_TYPE:0,ARRAY_TYPE:12,ASYNC_ITERATOR_TYPE:99,BOOLEAN_TYPE:3,FIRST_NODE_TYPE:9,MAP_TYPE:11,NODES_TYPE:7,NUMBERS_TYPE:13,NUMBER_TYPE:1,STRINGS_TYPE:10,STRING_TYPE:2,XPATH_3_1_LANGUAGE:\"XPath3.1\",XQUERY_3_1_LANGUAGE:\"XQuery3.1\",XQUERY_UPDATE_3_1_LANGUAGE:\"XQueryUpdate3.1\",XPATH_4_0_LANGUAGE:\"XPath4.0\",XQUERY_4_0_LANGUAGE:\"XQuery4.0\"});function Up(e,t,n,r,o){return Le(e,t,n,r,Le.Ob,o)}function Pp(e,t,n,r){return{pendingUpdateList:e.ca.map(o=>o.h(r)),xdmValue:Mp(t,w.create(e.I),n,r)}}function T1(e,t,n,r,o){return xt(this,null,function*(){o=o||{},lo();let a,s;try{let m=ps(e,t,n||null,r||{},o||{},{ra:!0,Y:!0,debug:!!o.debug,Ha:!!o.disableCache,version:o.language===\"XQueryUpdate4.0\"?4:3.1});var l=m.tb;a=m.ub,s=m.aa}catch(m){lt(e,m)}if(!s.H){for(l=[],e=Up(e,t,n,r,Object.assign(Object.assign({},o),{language:\"XQueryUpdate3.1\"})),t=yield e.next();!t.done;t=yield e.next())l.push(t.value);return Promise.resolve({pendingUpdateList:[],xdmValue:l})}let p;try{p=s.s(l,a).next(0)}catch(m){lt(e,m)}return Pp(p.value,e,o.returnType,a)})}function C1(e,t,n,r,o){o=o||{},lo();let a,s,l;try{let m=ps(e,t,n||null,r||{},o||{},{ra:!0,Y:!0,debug:!!o.debug,Ha:!!o.disableCache,version:o.language===\"XQueryUpdate4.0\"?4:3.1});a=m.tb,s=m.ub,l=m.aa}catch(m){lt(e,m)}if(!l.H)return{pendingUpdateList:[],xdmValue:Le(e,t,n,r,o.i,Object.assign(Object.assign({},o),{language:Le.$b}))};let p;try{p=l.s(a,s).next(0)}catch(m){lt(e,m)}return Pp(p.value,e,o.returnType,s)}function F1(e,t,n,r,o){return Le(e,t,n,r,Le.Nb,o)}function S1(e,t,n,r,o){return Le(e,t,n,r,Le.BOOLEAN_TYPE,o)}function R1(e,t,n,r,o){return Le(e,t,n,r,Le.Qb,o)}function O1(e,t,n,r,o){return Le(e,t,n,r,Le.Tb,o)}function G1(e,t,n,r,o){return Le(e,t,n,r,Le.Vb,o)}function D1(e,t,n,r,o){return Le(e,t,n,r,Le.NUMBER_TYPE,o)}function k1(e,t,n,r,o){return Le(e,t,n,r,Le.Wb,o)}function M1(e,t,n,r,o){return Le(e,t,n,r,Le.STRING_TYPE,o)}function U1(e,t,n,r,o){return Le(e,t,n,r,Le.Xb,o)}function P1(e,t,n,r){t=new Go(t||new un),r=r?new eu(r):Ya,n=n?n=new Dp(n):null,e=e.map(vc),ul(e,t,n,r)}function le(e,t,n){return{code:e,ta:t,G:n,isAstAccepted:!0}}function Ne(e){return{isAstAccepted:!1,reason:e}}function re(e,t){return e.isAstAccepted?t(e):e}function ds(e,t){return e.isAstAccepted?t(e):[e,null]}function rn(e,t,n){return re(e,r=>{switch(r.ta.type){case 0:return r;case 1:return re(it(n,r,\"nodes\"),o=>re(it(n,t,\"contextItem\"),a=>le(`(function () {\n\t\t\t\t\t\t\tconst { done, value } = ${o.code}(${a.code}).next();\n\t\t\t\t\t\t\treturn done ? null : value;\n\t\t\t\t\t\t})()`,{type:0},[...o.G,...a.G])));default:throw Error(`invalid generated code type to convert to value: ${r.ta.type}`)}})}function Sr(e,t,n,r){return e=rn(e,n,r),t&&t.type===0&&t.g===3?e:re(e,o=>le(`!!${o.code}`,{type:0},o.G))}function go(e,t,n){return t?e.isAstAccepted&&e.ta.type!==0?Ne(\"Atomization only implemented for single value\"):B(t.type,1)?e:B(t.type,47)?re(it(n,e,\"attr\"),r=>le(`(${r.code} ? domFacade.getData(${r.code}) : null)`,{type:0},r.G)):Ne(\"Atomization only implemented for string and attribute\"):Ne(\"Can not atomize value if type was not annotated\")}function Hp(e,t,n,r){return e=rn(e,n,r),r=go(e,t,r),Rn(t)?re(r,o=>le(`${o.code} ?? ''`,{type:0},o.G)):r}function ms(e,t,n){return re(it(n,e,\"node\"),r=>r.ta.type===1?r:t&&!B(t.type,53)?Ne(\"Can not evaluate to node if expression does not result in nodes\"):le(`(function () {\n\t\t\t\tif (${r.code} !== null && !${r.code}.nodeType) {\n\t\t\t\t\tthrow new Error('XPDY0050: The result of the expression was not a node');\n\t\t\t\t}\n\t\t\t\treturn ${r.code};\n\t\t\t})()`,{type:0},r.G))}function H1(e,t,n,r){return re(e,o=>{switch(o.ta.type){case 1:return re(it(r,o,\"nodes\"),a=>re(it(r,n,\"contextItem\"),s=>le(`Array.from(${a.code}(${s.code}))`,{type:0},[...a.G,...s.G])));case 0:return re(it(r,ms(o,t,r),\"node\"),a=>le(`(${a.code} === null ? [] : [${a.code}])`,{type:0},a.G));default:return Ne(\"Unsupported code type to evaluate to nodes\")}})}function Rr(e,t){return re(e,n=>re(t,r=>{if(n.ta.type!==0||r.ta.type!==0)throw Error(\"can only use emitAnd with value expressions\");return le(`${n.code} && ${r.code}`,{type:0},[...n.G,...r.G])}))}function Or(e,t,n,r){return(e=K(e,[t,\"*\"]))?r.h(e,n,r):[Ne(`${t} expression not found`),null]}let gs={equalOp:\"eqOp\",notEqualOp:\"neOp\",lessThanOrEqualOp:\"leOp\",lessThanOp:\"ltOp\",greaterThanOrEqualOp:\"geOp\",greaterThanOp:\"gtOp\"},X1={eqOp:\"eqOp\",neOp:\"neOp\",leOp:\"geOp\",ltOp:\"gtOp\",geOp:\"leOp\",gtOp:\"ltOp\"};function Xp(e,t,n,r){let o=te(K(e,[\"firstOperand\",\"*\"]),\"type\"),a=te(K(e,[\"secondOperand\",\"*\"]),\"type\");if(!o||!a)return Ne(\"Can not generate code for value compare without both types\");var s=[47,1];if(!s.includes(o.type)||!s.includes(a.type))return Ne(`Unsupported types in compare: [${Be[o.type]}, ${Be[a.type]}]`);if(s=new Map([[\"eqOp\",\"===\"],[\"neOp\",\"!==\"]]),!s.has(t))return Ne(t+\" not yet implemented\");let l=s.get(t);return[t]=Or(e,\"firstOperand\",n,r),t=rn(t,n,r),t=go(t,o,r),re(it(r,t,\"first\"),p=>{var[m]=Or(e,\"secondOperand\",n,r);return m=rn(m,n,r),m=go(m,a,r),re(it(r,m,\"second\"),T=>{let R=[];return Rn(o)&&R.push(`${p.code} === null`),Rn(a)&&R.push(`${T.code} === null`),le(`(${R.length?`${R.join(\" || \")} ? null : `:\"\"}${p.code} ${l} ${T.code})`,{type:0},[...p.G,...T.G])})})}function jp(e,t,n,r,o,a){var s=te(K(e,[t,\"*\"]),\"type\");let l=te(K(e,[n,\"*\"]),\"type\");if(!s||!l)return Ne(\"Can not generate code for general compare without both types\");var p=[47,1];if(!p.includes(s.type)||!p.includes(l.type))return Ne(`Unsupported types in compare: [${Be[s.type]}, ${Be[l.type]}]`);if(p=new Map([[\"eqOp\",\"===\"],[\"neOp\",\"!==\"]]),!p.has(r))return Ne(r+\" not yet implemented\");let m=p.get(r);return[t]=Or(e,t,o,a),t=rn(t,o,a),s=go(t,s,a),re(it(a,s,\"single\"),T=>{let[R]=Or(e,n,o,a);return re(it(a,R,\"multiple\"),X=>{if(X.ta.type!==1)return Ne(\"can only generate general compare for a single value and a generator\");let P=va(a,Aa(a,\"n\")),V=go(P,l,a);return re(o,se=>re(V,fe=>le(`(function () {\n\t\t\t\t\t\t\t\t\tfor (const ${P.code} of ${X.code}(${se.code})) {\n\t\t\t\t\t\t\t\t\t\t${fe.G.join(`\n`)}\n\t\t\t\t\t\t\t\t\t\tif (${fe.code} ${m} ${T.code}) {\n\t\t\t\t\t\t\t\t\t\t\treturn true;\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t\t\t})()`,{type:0},[...T.G,...P.G,...se.G,...X.G])))})})}function Gr(e){return JSON.stringify(e).replace(/\\u2028/g,\"\\\\u2028\").replace(/\\u2029/g,\"\\\\u2029\")}let j1={\"false#0\":_1,\"local-name#0\":qp,\"local-name#1\":qp,\"name#0\":Lp,\"name#1\":Lp,\"not#1\":Q1,\"true#0\":V1},$1={\"http://fontoxml.com/fontoxpath\":[\"version#0\"],\"\":[\"root#1\",\"path#1\"]};function b1(e,t,n,r){let[o]=r.h(e,n,r);if(e=te(e,\"type\"),!t||t.g===2||t.g===1)return Ne(\"Not supported: sequence arguments with multiple items\");if(B(t.type,53))return t=rn(o,n,r),ms(t,e,r);switch(t.type){case 59:return rn(o,n,r);case 0:return Sr(o,e,n,r);case 1:return Hp(o,e,n,r)}return Ne(`Argument types not supported: ${e?Be[e.type]:\"unknown\"} -> ${Be[t.type]}`)}function $p(e,t,n,r){if(e.length!==t.length||t.some(p=>p===4))return Ne(\"Not supported: variadic function or mismatch in argument count\");if(e.length===0)return le(\"\",{type:0},[]);let[o,...a]=e,[s,...l]=t;return e=it(r,b1(o,s,n,r),\"arg\"),a.length===0?e:re(e,p=>{let m=$p(a,l,n,r);return re(m,T=>le(`${p.code}, ${T.code}`,{type:0},[...p.G,...T.G]))})}function L1(e,t){return re(e,n=>!t||t.g===2||t.g===1||![0,1].includes(t.type)&&!B(t.type,53)?Ne(`Function return type ${Be[t.type]} not supported`):n)}function q1(e,t,n){let{localName:r,namespaceURI:o}=Fe(O(e,\"functionName\")),a=Z(O(e,\"arguments\"),\"*\");var s=a.length;let l=`${r}#${s}`,p=o===n.D;if(p){let m=j1[l];if(m!==void 0)return m(e,t,n)}return(e=$1[p?\"\":o])&&!e.includes(l)?Ne(`Not supported: built-in function not on allow list: ${l}`):(s=xi(o,r,s),s?s.H?Ne(\"Not supported: updating functions\"):(t=$p(a,s.j,t,n),t=re(t,m=>le(`runtimeLib.callFunction(domFacade, ${Gr(o)}, ${Gr(r)}, [${m.code}], options)`,{type:0},m.G)),L1(t,s.i)):Ne(`Unknown function / arity: ${l}`))}function Y1(e,t){return re(it(t,e,\"contextItem\"),n=>le(n.code,{type:0},[...n.G,`if (${n.code} === undefined || ${n.code} === null) {\n\t\t\t\t\tthrow errXPDY0002('The function which was called depends on dynamic context, which is absent.');\n\t\t\t\t}`]))}function bp(e,t,n,r){if((e=K(e,[\"arguments\",\"*\"]))&&e[0]!==\"contextItemExpr\"){let o=te(e,\"type\");if(!o||!B(o.type,53))return Ne(\"name function only implemented if arg is a node\");[e]=n.h(e,t,n)}else e=Y1(t,n);return t=rn(e,t,n),re(it(n,t,\"arg\"),o=>le(`(${o.code} ? ${r(o.code)} : '')`,{type:0},o.G))}function Lp(e,t,n){return bp(e,t,n,r=>`(((${r}.prefix || '').length !== 0 ? ${r}.prefix + ':' : '')\n\t\t+ (${r}.localName || ${r}.target || ''))`)}function qp(e,t,n){return bp(e,t,n,r=>`(${r}.localName || ${r}.target || '')`)}function Q1(e,t,n){var r=K(e,[\"arguments\",\"*\"]);return e=te(r,\"type\"),[r]=n.h(r,t,n),t=Sr(r,e,t,n),re(t,o=>le(`!${o.code}`,{type:0},o.G))}function _1(){return le(\"false\",{type:0},[])}function V1(){return le(\"true\",{type:0},[])}function Yp(e,t,n,r){let[o,a]=Or(e,\"firstOperand\",n,r);var s=te(K(e,[\"firstOperand\",\"*\"]),\"type\");s=Sr(o,s,n,r);let[l,p]=Or(e,\"secondOperand\",n,r);s=re(s,T=>{var R=te(K(e,[\"secondOperand\",\"*\"]),\"type\");return R=Sr(l,R,n,r),re(R,X=>le(`(${T.code} ${t} ${X.code})`,{type:0},[...T.G,...X.G]))});let m=t===\"&&\"?ft(a,p):a===p?a:null;return[s,m]}function Qp(e,t,n){return re(e,r=>re(t,o=>re(n,a=>le(`for (${r.code}) {\n\t\t\t\t\t\t${o.G.join(`\n`)}\n\t\t\t\t\t\tif (!(${o.code})) {\n\t\t\t\t\t\t\tcontinue;\n\t\t\t\t\t\t}\n\t\t\t\t\t\t${a.G.join(`\n`)}\n\t\t\t\t\t\t${a.code}\n\t\t\t\t\t}`,{type:2},r.G))))}function J1(e,t,n,r,o){let a=t?`, \"${t}\"`:\"\";return t=re(r,s=>re(o,l=>le(`let ${s.code} = domFacade.getFirstChild(${l.code}${a});\n\t\t\t\t\t\t\t${s.code};\n\t\t\t\t\t\t\t${s.code} = domFacade.getNextSibling(${s.code}${a})`,{type:2},[...s.G,...l.G]))),Qp(t,e,n)}function K1(e,t,n,r,o){let a=ft(t,\"type-2\"),s=re(o,l=>le(`(${l.code} && ${l.code}.nodeType === /*ELEMENT_NODE*/ 1 ? domFacade.getAllAttributes(${l.code}${a?`, \"${a}\"`:\"\"}) : [])`,{type:0},l.G));return t=re(r,l=>re(s,p=>le(`const ${l.code} of ${p.code}`,{type:2},[...l.G,...p.G]))),Qp(t,e,n)}function z1(e,t,n,r,o){let a=t?`, \"${t}\"`:\"\";return t=re(o,s=>le(`domFacade.getParentNode(${s.code}${a})`,{type:0},s.G)),_p(r,t,e,n)}function _p(e,t,n,r){let o=Rr(e,n);return re(e,a=>re(t,s=>re(o,l=>re(r,p=>le(`const ${a.code} = ${s.code};\n\t\t\t\t\t\t${l.G.join(`\n`)}\n\t\t\t\t\t\tif (${l.code}) {\n\t\t\t\t\t\t\t${p.G.join(`\n`)}\n\t\t\t\t\t\t\t${p.code}\n\t\t\t\t\t\t}`,{type:2},[...a.G,...s.G])))))}function W1(e,t,n,r,o,a){switch(e=de(e),e){case\"attribute\":return[K1(t,n,r,o,a),\"type-1\"];case\"child\":return[J1(t,n,r,o,a),null];case\"parent\":return[z1(t,n,r,o,a),null];case\"self\":return[_p(o,a,t,r),n];default:return[Ne(`Unsupported: the ${e} axis`),null]}}let Dr={Yb:\"textTest\",Pb:\"elementTest\",Ub:\"nameTest\",Zb:\"Wildcard\",Mb:\"anyKindTest\"};var Vp=Object.values(Dr);function Z1(e){return[re(e,t=>le(`(${t.code}.nodeType === /*TEXT_NODE*/ 3 ||\n\t\t\t\t${t.code}.nodeType === /* CDATA_SECTION_NODE */ 4)`,{type:0},[])),\"type-3\"]}function eA(e,t){if(e.namespaceURI===null&&e.prefix!==\"*\"){if(t=t.Z(e.prefix||\"\")||null,!t&&e.prefix)throw Error(`XPST0081: The prefix ${e.prefix} could not be resolved.`);e.namespaceURI=t}}function kr(e,t,n,r){eA(e,r);let o=e.prefix,a=e.namespaceURI,s=e.localName;return ds(n,l=>{var p=t?le(`${l.code}.nodeType\n\t\t\t\t\t\t&& (${l.code}.nodeType === /*ELEMENT_NODE*/ 1\n\t\t\t\t\t\t|| ${l.code}.nodeType === /*ATTRIBUTE_NODE*/ 2)`,{type:0},[]):le(`${l.code}.nodeType\n\t\t\t\t\t\t&& ${l.code}.nodeType === /*ELEMENT_NODE*/ 1`,{type:0},[]);if(o===\"*\")return s===\"*\"?[p,t?\"type-1-or-type-2\":\"type-1\"]:[Rr(p,le(`${l.code}.localName === ${Gr(s)}`,{type:0},[])),`name-${s}`];p=s===\"*\"?p:Rr(p,le(`${l.code}.localName === ${Gr(s)}`,{type:0},[]));var m=le(Gr(a),{type:0},[]);return m=o===\"\"&&t?re(m,T=>le(`${l.code}.nodeType === /*ELEMENT_NODE*/ 1 ? ${T.code} : null`,{type:0},T.G)):m,m=re(m,T=>le(`(${l.code}.namespaceURI || null) === ((${T.code}) || null)`,{type:0},T.G)),[Rr(p,m),`name-${s}`]})}function tA(e,t,n){let r=(e=O(e,\"elementName\"))&&O(e,\"star\");return e===null||r?[re(t,o=>le(`${o.code}.nodeType === /*ELEMENT_NODE*/ 1`,{type:0},[])),\"type-1\"]:(e=Fe(O(e,\"QName\")),kr(e,!1,t,n))}function nA(e){return[re(e,t=>le(`!!${t.code}.nodeType`,{type:0},[])),null]}function Jp(e,t,n,r){var o=e[0];switch(o){case Dr.Pb:return tA(e,n,r);case Dr.Yb:return Z1(n);case Dr.Ub:return kr(Fe(e),t,n,r);case Dr.Zb:return O(e,\"star\")?(o=O(e,\"uri\"),o!==null?e=kr({localName:\"*\",namespaceURI:de(o),prefix:\"\"},t,n,r):(o=O(e,\"NCName\"),e=O(e,\"*\")[0]===\"star\"?kr({localName:de(o),namespaceURI:null,prefix:\"*\"},t,n,r):kr({localName:\"*\",namespaceURI:null,prefix:de(o)},t,n,r))):e=kr({localName:\"*\",namespaceURI:null,prefix:\"*\"},t,n,r),e;case Dr.Mb:return nA(n);default:return[Ne(`Test not implemented: '${o}`),null]}}function Kp(e,t,n){let[r,o]=n.h(e,t,n);return e=te(e,\"type\"),[Sr(r,e,t,n),o]}function zp(e,t,n){e=e?Z(e,\"*\"):[];let[r,o]=e.reduce(([a,s],l)=>{if(!a)return Kp(l,t,n);let p=s;return ds(a,m=>{let[T,R]=Kp(l,t,n);return p=ft(s,R),[re(T,X=>le(`${m.code} && ${X.code}`,{type:0},[...m.G,...X.G])),p]})},[null,null]);return[r?re(r,a=>le(`(function () {\n\t\t\t\t\t\t\t${a.G.join(`\n`)}\n\t\t\t\t\t\t\treturn ${a.code};\n\t\t\t\t\t\t})()`,{type:0},[])):null,o]}function ys(e,t,n,r){if(e.length===0)return[re(n,P=>le(`yield ${P.code};`,{type:2},P.G)),null];let[o,...a]=e;if(0<Z(o,\"lookup\").length)return[Ne(\"Unsupported: lookups\"),null];let s=va(r,Aa(r,\"contextItem\"));e=O(o,\"predicates\");let[l,p]=zp(e,s,r);if(e=O(o,\"xpathAxis\")){var m=O(o,Vp);if(!m)return[Ne(\"Unsupported test in step\"),null];var T=de(e);t=T===\"attribute\"||T===\"self\"&&t;let[P,V]=Jp(m,t,s,r);return m=l===null?P:Rr(P,l),T=ft(V,p),[t]=ys(a,t,s,r),W1(e,m,T,t,s,n)}if(e=K(o,[\"filterExpr\",\"*\"]),!e)return[Ne(\"Unsupported: unknown step type\"),null];let[R,X]=r.h(e,n,r);return[re(R,P=>{let V=a.length===0?le(\"\",{type:2},[]):le(`if (${s.code} !== null && !${s.code}.nodeType) {\n\t\t\t\t\t\t\t\t\tthrow new Error('XPTY0019: The result of E1 in a path expression E1/E2 should evaluate to a sequence of nodes.');\n\t\t\t\t\t\t\t\t}`,{type:2},[]),[se]=ys(a,!0,s,r),fe=l===null?se:re(l,Ee=>re(se,st=>le(`if (${Ee.code}) {\n\t\t\t\t\t\t\t\t\t${st.G.join(`\n`)}\n\t\t\t\t\t\t\t\t\t${st.code}\n\t\t\t\t\t\t\t\t}`,{type:2},Ee.G)));return re(fe,Ee=>{switch(P.ta.type){case 1:return re(n,st=>le(`for (const ${s.code} of ${P.code}(${st.code})) {\n\t\t\t\t\t\t\t\t\t${Ee.G.join(`\n`)}\n\t\t\t\t\t\t\t\t\t${Ee.code}\n\t\t\t\t\t\t\t\t}`,{type:2},[...s.G,...P.G,...V.G]));case 0:return le(`const ${s.code} = ${P.code};\n\t\t\t\t\t\t\t${V.code}\n\t\t\t\t\t\t\tif (${s.code} !== null) {\n\t\t\t\t\t\t\t\t${Ee.G.join(`\n`)}\n\t\t\t\t\t\t\t\t${Ee.code}\n\t\t\t\t\t\t\t}`,{type:2},[...s.G,...P.G,...V.G]);default:return Ne(\"Unsupported generated code type for filterExpr\")}})}),X]}function rA(e){return re(e,t=>le(`(function () {\n\t\t\t\tlet n = ${t.code};\n\t\t\t\twhile (n.nodeType !== /*DOCUMENT_NODE*/9) {\n\t\t\t\t\tn = domFacade.getParentNode(n);\n\t\t\t\t\tif (n === null) {\n\t\t\t\t\t\tthrow new Error('XPDY0050: the root node of the context node is not a document node.');\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn n;\n\t\t\t})()`,{type:0},t.G))}function oA(e,t,n){return ds(t,r=>{if(0<Z(e,\"lookup\").length)return[Ne(\"Unsupported: lookups\"),null];var o=O(e,\"predicates\");let[a,s]=zp(o,r,n);if(o=O(e,Vp),!o)return[Ne(\"Unsupported test in step\"),null];let[l,p]=Jp(o,!0,r,n);o=a===null?l:Rr(l,a);let m=ft(p,s);return[re(o,T=>le(`((${T.code}) ? ${r.code} : null)`,{type:0},[...r.G,...T.G])),m]})}function aA(e,t,n){let r=Z(e,\"stepExpr\");if(r.length===1){let l=O(r[0],\"xpathAxis\");if(l&&de(l)===\"self\")return oA(r[0],t,n)}let o=va(n,Aa(n,\"contextItem\"));t=(e=O(e,\"rootExpr\"))?it(n,rA(o),\"root\"):o;let[a,s]=ys(r,!e,t,n);return[re(a,l=>le(`(function* (${o.code}) {\n\t\t\t${l.G.join(`\n`)}\n\t\t\t${l.code}\n\t\t})`,{type:1},[])),s]}function iA(e,t,n){let r=e[0];switch(r){case\"contextItemExpr\":return[t,null];case\"pathExpr\":return aA(e,t,n);case\"andOp\":return Yp(e,\"&&\",t,n);case\"orOp\":return Yp(e,\"||\",t,n);case\"stringConstantExpr\":return e=O(e,\"value\")[1]||\"\",e=Gr(e),[le(e,{type:0},[]),null];case\"equalOp\":case\"notEqualOp\":case\"lessThanOrEqualOp\":case\"lessThanOp\":case\"greaterThanOrEqualOp\":case\"greaterThanOp\":case\"eqOp\":case\"neOp\":case\"ltOp\":case\"leOp\":case\"gtOp\":case\"geOp\":case\"isOp\":case\"nodeBeforeOp\":case\"nodeAfterOp\":e:switch(r){case\"eqOp\":case\"neOp\":case\"ltOp\":case\"leOp\":case\"gtOp\":case\"geOp\":case\"isOp\":e=Xp(e,r,t,n);break e;case\"equalOp\":case\"notEqualOp\":case\"lessThanOrEqualOp\":case\"lessThanOp\":case\"greaterThanOrEqualOp\":case\"greaterThanOp\":let o=te(K(e,[\"firstOperand\",\"*\"]),\"type\"),a=te(K(e,[\"secondOperand\",\"*\"]),\"type\");e=o&&a?o.g===3&&a.g===3?Xp(e,gs[r],t,n):o.g===3?jp(e,\"firstOperand\",\"secondOperand\",gs[r],t,n):a.g===3?jp(e,\"secondOperand\",\"firstOperand\",X1[gs[r]],t,n):Ne(\"General comparison for sequences is not implemented\"):Ne(\"types of compare are not known\");break e;default:e=Ne(`Unsupported compare type: ${r}`)}return[e,null];case\"functionCallExpr\":return[q1(e,t,n),null];default:return[Ne(`Unsupported: the base expression '${r}'.`),null]}}function it(e,t,n){return re(t,r=>{var o=e.o.get(r);return o||(o=Aa(e,n),o=le(o,r.ta,[...r.G,`const ${o} = ${r.code};`]),e.o.set(r,o),e.o.set(o,o)),o})}function Aa(e,t=\"v\"){let n=e.v.get(t)||0;return e.v.set(t,n+1),`${t}${n}`}function va(e,t){return t=le(t,{type:0},[]),e.o.set(t,t),t}var sA=class{constructor(e,t){this.o=new Map,this.v=new Map,this.Z=e,this.D=t,this.h=iA}};function Wp(e){let t=Z(e,\"*\");if(e[0]===\"pathExpr\")return!0;for(let n of t)if(Wp(n))return!0;return!1}function uA(e,t,n){if(n=n||{},t=t||0,typeof e==\"string\"){e=Ui(e);var r={Y:n.language===\"XQuery3.1\"||n.language===\"XQueryUpdate3.1\",debug:!1,version:n.language===\"XPath4.0\"||n.language===\"XQuery4.0\"||n.language===\"XQueryUpdate4.0\"?4:3.1};try{var o=mo(e,r)}catch(s){lt(e,s)}}else o=ua(e);if(e=O(o,\"mainModule\"),!e)return Ne(\"Unsupported: XQuery Library modules are not supported.\");if(O(e,\"prolog\"))return Ne(\"Unsupported: XQuery Prologs are not supported.\");if(r=n.defaultFunctionNamespaceURI===void 0?\"http://www.w3.org/2005/xpath-functions\":n.defaultFunctionNamespaceURI,e=new sA(n.namespaceResolver||kp(null),r),n=new ta(new kn(new Jo(e.Z,{},r,n.functionNameResolver||cs(\"http://www.w3.org/2005/xpath-functions\")))),pe(o,n),n=O(o,\"mainModule\"))if(O(n,\"prolog\"))e=Ne(\"Unsupported: XQuery.\");else{var a=K(n,[\"queryBody\",\"*\"]);n=va(e,\"contextItem\"),[r]=e.h(a,n,e),a=te(a,\"type\");e:switch(t){case 9:t=rn(r,n,e),e=ms(t,a,e);break e;case 7:e=H1(r,a,n,e);break e;case 3:e=Sr(r,a,n,e);break e;case 2:e=Hp(r,a,n,e);break e;default:e=Ne(`Unsupported: the return type '${t}'.`)}e.isAstAccepted&&(e=`\n\t\t${e.G.join(`\n`)}\n\t\treturn ${e.code};`,t=`\n\treturn (contextItem, domFacade, runtimeLib, options) => {\n\t\tconst {\n\t\t\terrXPDY0002,\n\t\t} = runtimeLib;`,Wp(o)&&(t+=`\n\t\tif (!contextItem) {\n\t\t\tthrow errXPDY0002(\"Context is needed to evaluate the given path expression.\");\n\t\t}\n\n\t\tif (!contextItem.nodeType) {\n\t\t\tthrow new Error(\"Context item must be subtype of node().\");\n\t\t}\n\t\t`),e={code:t+(e+`}\n//# sourceURL=generated.js`),isAstAccepted:!0})}else e=Ne(\"Unsupported: Can not execute a library module.\");return e}class lA extends Error{constructor(t,n,r){var o=t.stack;o&&(o.includes(t.message)&&(o=o.substr(o.indexOf(t.message)+t.message.length).trim()),o=o.split(`\n`),o.splice(10),o=o.map(a=>a.startsWith(\"    \")||a.startsWith(\"\t\")?a:`    ${a}`),o=o.join(`\n`)),super(`Custom XPath function Q{${r}}${n} raised:\n${t.message}\n${o}`)}}function Zp(e,t,n){return t.g===0?e.isEmpty()?null:qn(e.first(),n).next(0).value:t.g===2||t.g===1?e.N().map(r=>{if(B(r.type,47))throw Error(\"Cannot pass attribute nodes to custom functions\");return qn(r,n).next(0).value}):qn(e.first(),n).next(0).value}function cA(e){if(typeof e==\"object\")return e;if(e=e.split(\":\"),e.length!==2)throw Error(\"Do not register custom functions in the default function namespace\");let[t,n]=e;if(e=no[t],!e){if(e=`generated_namespace_uri_${t}`,no[t])throw Error(\"Prefix already registered: Do not register the same prefix twice.\");no[t]=e}return{localName:n,namespaceURI:e}}function pA(e,t,n,r){let{namespaceURI:o,localName:a}=cA(e);if(!o)throw Ni();let s=t.map(p=>Tn(p)),l=Tn(n);Bl(o,a,s,l,function(p,m,T){var R=Array.from(arguments);R.splice(0,3),R=R.map((V,se)=>Zp(V,s[se],m));let X={currentContext:m.o,domFacade:m.h.h},P;try{P=r.apply(void 0,[X,...R])}catch(V){throw new lA(V,a,o)}return P&&typeof P==\"object\"&&Object.getOwnPropertySymbols(P).includes(ls)?w.create(P.zb):Uo(m.h,P,l)})}var hA={callFunction(e,t,n,r,o){let a=xi(t,n,r.length);if(!a)throw Error(\"function not found for codegen function call\");t=new ir({L:null,Ba:0,sa:w.empty(),qa:{}});let s=new Go(e);return e=new lu(!1,!1,s,null,null,o?o.currentContext:null,null),r=a.callFunction(t,e,null,...r.map((l,p)=>Uo(s,l,a.j[p]))),Zp(r,{type:59,g:0},e)},errXPDY0002:Ft},fA=(e,t,n,r)=>(n=n||new un,e()(t!=null?t:null,n,hA,r));let eh={\"http://www.w3.org/2005/XQueryX\":\"xqx\",\"http://www.w3.org/2007/xquery-update-10\":\"xquf\",\"http://fontoxml.com/fontoxpath\":\"x\"};function dA(e,t){switch(e){case\"copySource\":case\"insertAfter\":case\"insertAsFirst\":case\"insertAsLast\":case\"insertBefore\":case\"insertInto\":case\"modifyExpr\":case\"newNameExpr\":case\"replacementExpr\":case\"replaceValue\":case\"returnExpr\":case\"sourceExpr\":case\"targetExpr\":case\"transformCopies\":case\"transformCopy\":return{localName:e,lb:t||\"http://www.w3.org/2005/XQueryX\"};case\"deleteExpr\":case\"insertExpr\":case\"renameExpr\":case\"replaceExpr\":case\"transformExpr\":return{localName:e,lb:\"http://www.w3.org/2007/xquery-update-10\"};case\"x:stackTrace\":return{localName:\"stackTrace\",lb:\"http://fontoxml.com/fontoxpath\"};default:return{localName:e,lb:\"http://www.w3.org/2005/XQueryX\"}}}function th(e,t,n,r,o){if(typeof n==\"string\")return n.length===0?null:t.createTextNode(n);if(!Array.isArray(n))throw new TypeError(\"JsonML element should be an array or string\");var a=dA(n[0],r);r=a.localName,a=a.lb;let s=t.createElementNS(a,eh[a]+\":\"+r),l=n[1];var p=1;if(typeof l==\"object\"&&!Array.isArray(l)){if(l!==null)for(var m of Object.keys(l))p=l[m],p!==null&&(m===\"type\"?p!==void 0&&e.setAttributeNS(s,a,\"fontoxpath:\"+m,Bt(p)):(m!==\"start\"&&m!==\"end\"&&m!==\"comment\"||r!==\"stackTrace\"||(p=JSON.stringify(p)),o&&m===\"prefix\"&&p===\"\"||e.setAttributeNS(s,a,eh[a]+\":\"+m,p)));p=2}for(let T=p,R=n.length;T<R;++T)m=th(e,t,n[T],a,o),m!==null&&e.insertBefore(s,m,null);return s}function mA(e,t,n,r=Ya){e=Ui(e);let o;try{o=mo(e,{Y:t.language===\"XQuery3.1\"||t.language===\"XQueryUpdate3.1\"||t.language===\"XQuery4.0\"||t.language===\"XQueryUpdate4.0\",version:t.language===\"XPath4.0\"||t.language===\"XQuery4.0\"||t.language===\"XQueryUpdate4.0\"?4:3.1,debug:t.debug})}catch(p){lt(e,p)}var a=new Jo(t.namespaceResolver||(()=>null),{},t.defaultFunctionNamespaceURI===void 0?\"http://www.w3.org/2005/xpath-functions\":t.defaultFunctionNamespaceURI,t.functionNameResolver||(()=>null));a=new kn(a);var s=O(o,[\"mainModule\",\"libraryModule\"]),l=O(s,\"moduleDecl\");if(l){let p=de(O(l,\"prefix\"));l=de(O(l,\"uri\")),Dn(a,p,l)}return(s=O(s,\"prolog\"))&&os(s,a,!1,e),t.annotateAst!==!1&&Hl(o,new ta(a)),a=new un,t=th(r,n,o,null,t.oc===!1),r.insertBefore(t,n.createComment(e),a.getFirstChild(t)),t}function gA(e){return Promise.resolve(e)}function yA(e,t={debug:!1,language:\"XQuery3.1\"}){try{var n=mo(e,{Y:!0,debug:t.debug,version:t.language===\"XQuery4.0\"||t.language===\"XQueryUpdate4.0\"?4:3.1})}catch(a){lt(e,a)}if(Hl(n,new ta),t=O(n,\"libraryModule\"),!t)throw Error(\"XQuery module must be declared in a library module.\");n=O(t,\"moduleDecl\");var r=O(n,\"uri\");let o=de(r);if(n=O(n,\"prefix\"),r=de(n),n=new kn(new Jo(()=>null,Object.create(null),\"http://www.w3.org/2005/xpath-functions\",cs(\"http://www.w3.org/2005/xpath-functions\"))),Dn(n,r,o),t=O(t,\"prolog\"),t!==null){let a;try{a=os(t,n,!0,e)}catch(s){lt(e,s)}a.Ia.forEach(({namespaceURI:s})=>{if(o!==s)throw Error(\"XQST0048: Functions and variables declared in a module must reside in the module target namespace.\")}),Rc(o,a)}else Rc(o,{Ia:[],Va:[],pa:null,source:e});return o}let ws=new Map;function As(e){var t;e:{if(t=sa.get(e)){for(let n of Object.keys(t))if(t[n]&&t[n].length){t=t[n][0].h;break e}}t=null}if(t)return t;if(ws.has(e))return ws.get(e);if(t=typeof e==\"string\"?mo(e,{Y:!1,version:4}):ua(e),t=K(t,[\"mainModule\",\"queryBody\",\"*\"]),t===null)throw Error(\"Library modules do not have a specificity\");return t=ki(t,{ra:!1,Y:!1}),ws.set(e,t),t}function wA(e){return As(e).D()}function AA(e,t){return hr(As(e).o,As(t).o)}var vA=new un;return typeof h!=\"undefined\"&&(h.compareSpecificity=AA,h.compileXPathToJavaScript=uA,h.domFacade=vA,h.evaluateXPath=Le,h.evaluateXPathToArray=F1,h.evaluateXPathToAsyncIterator=Up,h.evaluateXPathToBoolean=S1,h.evaluateXPathToFirstNode=R1,h.evaluateXPathToMap=O1,h.evaluateXPathToNodes=G1,h.evaluateXPathToNumber=D1,h.evaluateXPathToNumbers=k1,h.evaluateXPathToString=M1,h.evaluateXPathToStrings=U1,h.evaluateUpdatingExpression=T1,h.evaluateUpdatingExpressionSync=C1,h.executeJavaScriptCompiledXPath=fA,h.executePendingUpdateList=P1,h.getBucketForSelector=wA,h.getBucketsForNode=zt,h.precompileXPath=gA,h.registerXQueryModule=yA,h.registerCustomXPathFunction=pA,h.parseScript=mA,h.profiler=E1,h.createTypedValueFactory=B1,h.finalizeModuleRegistration=lo,h.Language=I1,h.ReturnType=be),h}).call(typeof window==\"undefined\"?void 0:window,js,Vs),DB=Ge.compareSpecificity,kB=Ge.compileXPathToJavaScript,MB=Ge.createTypedValueFactory,UB=Ge.domFacade,PB=Ge.evaluateUpdatingExpression,HB=Ge.evaluateUpdatingExpressionSync,XB=Ge.evaluateXPath,jB=Ge.evaluateXPathToArray,$B=Ge.evaluateXPathToAsyncIterator,hB=Ge.evaluateXPathToBoolean,bB=Ge.evaluateXPathToFirstNode,LB=Ge.evaluateXPathToMap,sf=Ge.evaluateXPathToNodes,qB=Ge.evaluateXPathToNumber,YB=Ge.evaluateXPathToNumbers,QB=Ge.evaluateXPathToString,_B=Ge.evaluateXPathToStrings,VB=Ge.executeJavaScriptCompiledXPath,JB=Ge.executePendingUpdateList,KB=Ge.finalizeModuleRegistration,zB=Ge.getBucketForSelector,WB=Ge.getBucketsForNode,ZB=Ge.Language,eE=Ge.parseScript,tE=Ge.precompileXPath,nE=Ge.profiler,rE=Ge.registerCustomXPathFunction,oE=Ge.registerXQueryModule,aE=Ge.ReturnType;var Ha={ELEMENT_NODE:1,ATTRIBUTE_NODE:2,TEXT_NODE:3,DOCUMENT_NODE:9},fB=[\"name\",\"width\",\"height\",\"x\",\"y\",\"visible\",\"opacity\",\"cornerRadius\",\"characters\",\"fontSize\",\"layoutMode\",\"itemSpacing\",\"paddingTop\",\"paddingBottom\",\"paddingLeft\",\"paddingRight\",\"strokeWeight\",\"rotation\",\"constrainProportions\"];function uf(u,c){return{nodeType:Ha.ELEMENT_NODE,nodeName:u.type,localName:u.type,namespaceURI:null,prefix:null,_figmaNode:u,_parent:c}}function dB(u){let c={nodeType:Ha.DOCUMENT_NODE,nodeName:\"#document\",documentElement:null},d=uf(u,c);return c.documentElement=d,c._children=[d],c}function mB(u){if(u._attrs)return u._attrs;let c=u._figmaNode,d=[];for(let h of fB)if(h in c){let x=c[h];if(x==null||typeof x==\"symbol\")continue;d.push({nodeType:Ha.ATTRIBUTE_NODE,nodeName:h,name:h,localName:h,namespaceURI:null,prefix:null,value:String(x),ownerElement:u})}return u._attrs=d,d}function Co(u){if(u._children)return u._children;let c=u._figmaNode;return!(\"children\"in c)||!c.children?(u._children=[],[]):(u._children=c.children.map(d=>uf(d,u)),u._children)}function En(u){return(u==null?void 0:u.nodeType)===Ha.DOCUMENT_NODE}var gB={getAllAttributes(u){return En(u)?[]:mB(u)},getAttribute(u,c){if(En(u))return null;let d=u._figmaNode;if(c in d){let h=d[c];return h==null||typeof h==\"symbol\"?null:String(h)}return null},getChildNodes(u){return En(u)?u._children||[]:Co(u)},getData(u){return u.value},getFirstChild(u){return En(u)?u.documentElement:Co(u)[0]||null},getLastChild(u){if(En(u))return u.documentElement;let c=Co(u);return c[c.length-1]||null},getNextSibling(u){if(En(u))return null;let c=u._parent;if(!c)return null;let d=Co(c),h=d.indexOf(u);return d[h+1]||null},getParentNode(u){return En(u)?null:u._parent||null},getPreviousSibling(u){if(En(u))return null;let c=u._parent;if(!c)return null;let d=Co(c),h=d.indexOf(u);return h>0?d[h-1]:null}};function lf(u,c,d={}){let{limit:h=1e3}=d,x=Array.isArray(c)?c:[c],S=[];console.log(\"[xpath] Query:\",u);try{for(let C of x){let M=dB(C);console.log(\"[xpath] Evaluating on:\",C.name);let v=sf(u,M,gB);console.log(\"[xpath] Found:\",v.length);for(let y of v){if(S.length>=h)break;let g=y._figmaNode;g&&\"type\"in g&&g.type!==\"PAGE\"&&S.push(g)}}}catch(C){throw console.error(\"[xpath] Error:\",C),C}return console.log(\"[xpath] Total results:\",S.length),S}console.log(\"[Figma Bridge] Plugin main loaded at\",new Date().toISOString());var yB=u=>new Promise(c=>setTimeout(c,u));function ff(u,c=10,d=50,h=\"fixed\"){return xt(this,null,function*(){for(let x=0;x<c;x++){let S=yield u();if(S)return S;if(x<c-1){let C=h===\"linear\"?d*(x+1):h===\"exponential\"?d*Math.pow(2,x):d;yield yB(C)}}return null})}var Ks=new Set,$a=new Map,df=figma.loadFontAsync({family:\"Inter\",style:\"Regular\"});$a.set(\"Inter:Regular\",df);df.then(()=>Ks.add(\"Inter:Regular\"));function tr(u,c){let d=`${u}:${c}`;if(Ks.has(d))return;let h=$a.get(d);if(h)return h;let x=figma.loadFontAsync({family:u,style:c});return $a.set(d,x),x.then(()=>{Ks.add(d),$a.delete(d)}),x}function wB(u,c,d,h){return xt(this,null,function*(){if(!c)return null;let{x=0,y:S=0,width:C,height:M,name:v,fill:y,stroke:g,strokeWeight:A,radius:I,opacity:F,layoutMode:D,itemSpacing:k,padding:U,text:H,fontSize:L,fontFamily:ee,fontStyle:z}=c,J=null;switch(u){case\"create-frame\":{let N=figma.createFrame();N.x=x,N.y=S,N.resize(C||100,M||100),v&&(N.name=v),y&&(N.fills=[{type:\"SOLID\",color:an(er(y))}]),g&&(N.strokes=[{type:\"SOLID\",color:an(er(g))}]),A&&(N.strokeWeight=A),typeof I==\"number\"&&(N.cornerRadius=I),typeof F==\"number\"&&(N.opacity=F),D&&D!==\"NONE\"&&(h==null||h.push({frame:N,layoutMode:D,itemSpacing:k,padding:U})),J=N;break}case\"create-rectangle\":{let N=figma.createRectangle();N.x=x,N.y=S,N.resize(C||100,M||100),v&&(N.name=v),y&&(N.fills=[{type:\"SOLID\",color:an(er(y))}]),g&&(N.strokes=[{type:\"SOLID\",color:an(er(g))}]),A&&(N.strokeWeight=A),typeof I==\"number\"&&(N.cornerRadius=I),typeof F==\"number\"&&(N.opacity=F),J=N;break}case\"create-ellipse\":{let N=figma.createEllipse();N.x=x,N.y=S,N.resize(C||100,M||100),v&&(N.name=v),y&&(N.fills=[{type:\"SOLID\",color:an(er(y))}]),g&&(N.strokes=[{type:\"SOLID\",color:an(er(g))}]),A&&(N.strokeWeight=A),typeof F==\"number\"&&(N.opacity=F),J=N;break}case\"create-text\":{let N=figma.createText(),Xe=ee||\"Inter\",Me=z||\"Regular\";yield tr(Xe,Me),N.fontName={family:Xe,style:Me},N.characters=H||\"\",N.x=x,N.y=S,v&&(N.name=v),L&&(N.fontSize=L),y&&(N.fills=[{type:\"SOLID\",color:an(er(y))}]),typeof F==\"number\"&&(N.opacity=F),J=N;break}default:return null}return J})}var AB=new Set([\"get-node-info\",\"get-node-tree\",\"get-node-children\",\"set-parent\",\"clone-node\",\"delete-node\",\"get-pages\",\"set-current-page\",\"get-components\",\"get-styles\",\"export-node\",\"screenshot\"]),cf=!1;function mf(u,c){return xt(this,null,function*(){var x,S,C,M;switch(u){case\"batch\":{let{commands:v}=c,y=[],g=new Map,A=new Map,I=[],F=[],D=[],k=[];for(let U of v){(x=U.args)!=null&&x.parentRef&&g.has(U.args.parentRef)&&(U.args.parentId=g.get(U.args.parentRef),delete U.args.parentRef);let H=yield wB(U.command,U.args,A,I);if(H){y.push({id:H.id,name:H.name}),A.set(H.id,H),(S=U.args)!=null&&S.ref&&g.set(U.args.ref,H.id);let L=(C=U.args)==null?void 0:C.parentId;L?A.has(L)?F.push({node:H,parentId:L}):D.push({node:H,parentId:L}):k.push(H)}else{let L=yield mf(U.command,U.args);y.push(L),(M=U.args)!=null&&M.ref&&g.set(U.args.ref,L.id)}}for(let U of F){let H=A.get(U.parentId);H&&\"appendChild\"in H&&H.appendChild(U.node)}for(let U=I.length-1;U>=0;U--){let H=I[U];H.frame.layoutMode=H.layoutMode,H.frame.primaryAxisSizingMode=\"AUTO\",H.frame.counterAxisSizingMode=\"AUTO\",H.itemSpacing&&(H.frame.itemSpacing=H.itemSpacing),H.padding&&(H.frame.paddingTop=H.padding.top,H.frame.paddingRight=H.padding.right,H.frame.paddingBottom=H.padding.bottom,H.frame.paddingLeft=H.padding.left)}for(let U of k)figma.currentPage.appendChild(U);for(let U of D){let H=A.get(U.parentId);H||(H=yield figma.getNodeByIdAsync(U.parentId)),H&&\"appendChild\"in H&&H.appendChild(U.node)}return figma.commitUndo(),y}case\"get-selection\":return figma.currentPage.selection.map(ne);case\"get-node-info\":{let{id:v}=c,y=yield figma.getNodeByIdAsync(v);return y?ne(y):null}case\"get-current-page\":return{id:figma.currentPage.id,name:figma.currentPage.name};case\"list-fonts\":return(yield figma.listAvailableFontsAsync()).map(y=>({family:y.fontName.family,style:y.fontName.style}));case\"get-node-tree\":{let{id:v}=c,y=yield figma.getNodeByIdAsync(v);if(!y)throw new Error(\"Node not found\");let g=A=>{let I={id:A.id,name:A.name,type:A.type};if(\"x\"in A&&(I.x=Math.round(A.x)),\"y\"in A&&(I.y=Math.round(A.y)),\"width\"in A&&(I.width=Math.round(A.width)),\"height\"in A&&(I.height=Math.round(A.height)),\"fills\"in A&&Array.isArray(A.fills)){let F=A.fills.find(D=>D.type===\"SOLID\");F&&(I.fills=[{type:\"SOLID\",color:So(F.color)}])}if(\"strokes\"in A&&Array.isArray(A.strokes)&&A.strokes.length>0){let F=A.strokes.find(D=>D.type===\"SOLID\");F&&(I.strokes=[{type:\"SOLID\",color:So(F.color)}])}if(\"strokeWeight\"in A&&typeof A.strokeWeight==\"number\"&&A.strokeWeight>0&&(I.strokeWeight=A.strokeWeight),\"cornerRadius\"in A&&typeof A.cornerRadius==\"number\"&&A.cornerRadius>0&&(I.cornerRadius=A.cornerRadius),\"opacity\"in A&&A.opacity!==1&&(I.opacity=A.opacity),\"visible\"in A&&!A.visible&&(I.visible=!1),\"locked\"in A&&A.locked&&(I.locked=!0),\"layoutMode\"in A&&A.layoutMode!==\"NONE\"&&(I.layoutMode=A.layoutMode,\"itemSpacing\"in A&&(I.itemSpacing=A.itemSpacing)),A.type===\"TEXT\"){let F=A;I.characters=F.characters,typeof F.fontSize==\"number\"&&(I.fontSize=F.fontSize),typeof F.fontName==\"object\"&&(I.fontFamily=F.fontName.family,I.fontStyle=F.fontName.style)}return\"children\"in A&&A.children&&(I.children=A.children.map(g)),I};return g(y)}case\"get-all-components\":{let{name:v,limit:y=50,page:g}=c||{},A=[],I=v==null?void 0:v.toLowerCase(),F=k=>{if(A.length>=y)return!1;if((k.type===\"COMPONENT\"||k.type===\"COMPONENT_SET\")&&(!I||k.name.toLowerCase().includes(I))&&A.push(ne(k)),\"children\"in k){for(let U of k.children)if(!F(U))return!1}return A.length<y},D=g?figma.root.children.filter(k=>k.id===g||k.name===g||k.name.includes(g)):figma.root.children;for(let k of D){if(A.length>=y)break;for(let U of k.children)if(!F(U))break}return A}case\"get-pages\":return figma.root.children.map(v=>({id:v.id,name:v.name}));case\"create-page\":{let{name:v}=c,y=figma.createPage();return y.name=v,{id:y.id,name:y.name}}case\"set-current-page\":{let{page:v}=c,y=null,g=yield figma.getNodeByIdAsync(v);if(g&&g.type===\"PAGE\"?y=g:y=figma.root.children.find(A=>A.name===v||A.name.includes(v))||null,!y)throw new Error(\"Page not found\");return yield figma.setCurrentPageAsync(y),{id:y.id,name:y.name}}case\"get-local-styles\":{let{type:v}=c||{},y={};if(!v||v===\"all\"||v===\"paint\"){let g=yield figma.getLocalPaintStylesAsync();g.length>0&&(y.paintStyles=g.map(A=>({id:A.id,name:A.name,paints:A.paints.map(zs)})))}if(!v||v===\"all\"||v===\"text\"){let g=yield figma.getLocalTextStylesAsync();g.length>0&&(y.textStyles=g.map(A=>({id:A.id,name:A.name,fontSize:A.fontSize,fontFamily:A.fontName.family,fontStyle:A.fontName.style})))}if(!v||v===\"all\"||v===\"effect\"){let g=yield figma.getLocalEffectStylesAsync();g.length>0&&(y.effectStyles=g.map(A=>({id:A.id,name:A.name,effects:A.effects.map(I=>({type:I.type,radius:\"radius\"in I?I.radius:void 0}))})))}if(!v||v===\"all\"||v===\"grid\"){let g=yield figma.getLocalGridStylesAsync();g.length>0&&(y.gridStyles=g.map(A=>({id:A.id,name:A.name,grids:A.layoutGrids.length})))}return y}case\"get-viewport\":return{center:figma.viewport.center,zoom:figma.viewport.zoom,bounds:figma.viewport.bounds};case\"create-rectangle\":{let{x:v,y,width:g,height:A,name:I,parentId:F,fill:D,stroke:k,strokeWeight:U,radius:H,opacity:L}=c,ee=figma.createRectangle();return ee.x=v,ee.y=y,ee.resize(g,A),I&&(ee.name=I),D&&(ee.fills=[yield gt(D)]),k&&(ee.strokes=[yield gt(k)]),U!==void 0&&(ee.strokeWeight=U),H!==void 0&&(ee.cornerRadius=H),L!==void 0&&(ee.opacity=L),yield Dt(ee,F),ne(ee)}case\"create-ellipse\":{let{x:v,y,width:g,height:A,name:I,parentId:F,fill:D,stroke:k,strokeWeight:U,opacity:H}=c,L=figma.createEllipse();return L.x=v,L.y=y,L.resize(g,A),I&&(L.name=I),D&&(L.fills=[yield gt(D)]),k&&(L.strokes=[yield gt(k)]),U!==void 0&&(L.strokeWeight=U),H!==void 0&&(L.opacity=H),yield Dt(L,F),ne(L)}case\"create-line\":{let{x:v,y,length:g,rotation:A,name:I,parentId:F,stroke:D,strokeWeight:k}=c,U=figma.createLine();return U.x=v,U.y=y,U.resize(g,0),A&&(U.rotation=A),I&&(U.name=I),D&&(U.strokes=[yield gt(D)]),k!==void 0&&(U.strokeWeight=k),yield Dt(U,F),ne(U)}case\"create-polygon\":{let{x:v,y,size:g,sides:A,name:I,parentId:F}=c,D=figma.createPolygon();return D.x=v,D.y=y,D.resize(g,g),A&&(D.pointCount=A),I&&(D.name=I),yield Dt(D,F),ne(D)}case\"create-star\":{let{x:v,y,size:g,points:A,innerRadius:I,name:F,parentId:D}=c,k=figma.createStar();return k.x=v,k.y=y,k.resize(g,g),A&&(k.pointCount=A),I!==void 0&&(k.innerRadius=I),F&&(k.name=F),yield Dt(k,D),ne(k)}case\"create-vector\":{let{x:v,y,path:g,name:A,parentId:I}=c,F=figma.createNodeFromSvg(`<svg><path d=\"${g}\"/></svg>`);return F.x=v,F.y=y,A&&(F.name=A),yield Dt(F,I),ne(F)}case\"create-frame\":{let{x:v,y,width:g,height:A,name:I,parentId:F,fill:D,stroke:k,strokeWeight:U,radius:H,opacity:L,layoutMode:ee,itemSpacing:z,padding:J}=c,N=figma.createFrame();return N.x=v,N.y=y,N.resize(g,A),I&&(N.name=I),D&&(N.fills=[yield gt(D)]),k&&(N.strokes=[yield gt(k)]),U!==void 0&&(N.strokeWeight=U),H!==void 0&&(N.cornerRadius=H),L!==void 0&&(N.opacity=L),ee&&ee!==\"NONE\"&&(N.layoutMode=ee,z!==void 0&&(N.itemSpacing=z),J&&(N.paddingTop=J.top,N.paddingRight=J.right,N.paddingBottom=J.bottom,N.paddingLeft=J.left)),yield Dt(N,F),ne(N)}case\"create-section\":{let{x:v,y,width:g,height:A,name:I}=c,F=figma.createSection();return F.x=v,F.y=y,F.resizeWithoutConstraints(g,A),I&&(F.name=I),ne(F)}case\"create-slice\":{let{x:v,y,width:g,height:A,name:I}=c,F=figma.createSlice();return F.x=v,F.y=y,F.resize(g,A),I&&(F.name=I),ne(F)}case\"create-text\":{let{x:v,y,text:g,fontSize:A,fontFamily:I,fontStyle:F,fill:D,opacity:k,name:U,parentId:H}=c,L=figma.createText(),ee=I||\"Inter\",z=F||\"Regular\";return yield tr(ee,z),L.x=v,L.y=y,L.fontName={family:ee,style:z},L.characters=g,A&&(L.fontSize=A),D&&(L.fills=[yield gt(D)]),k!==void 0&&(L.opacity=k),U&&(L.name=U),yield Dt(L,H),ne(L)}case\"create-instance\":{let{componentId:v,x:y,y:g,name:A,parentId:I}=c,F=yield figma.getNodeByIdAsync(v);if(!F||F.type!==\"COMPONENT\")throw new Error(\"Component not found\");let D=F.createInstance();return y!==void 0&&(D.x=y),g!==void 0&&(D.y=g),A&&(D.name=A),yield Dt(D,I),ne(D)}case\"create-component\":{let{name:v,parentId:y,x:g,y:A,width:I,height:F,fill:D}=c,k=figma.createComponent();return k.name=v,g!==void 0&&(k.x=g),A!==void 0&&(k.y=A),I&&F&&k.resize(I,F),D&&(k.fills=[yield gt(D)]),yield Dt(k,y),ne(k)}case\"clone-node\":{let{id:v}=c,y=yield figma.getNodeByIdAsync(v);if(!y||!(\"clone\"in y))throw new Error(\"Node not found\");let g=y.clone();return ne(g)}case\"convert-to-component\":{let{id:v}=c,y=yield figma.getNodeByIdAsync(v);if(!y)throw new Error(\"Node not found\");let g=figma.createComponentFromNode(y);return ne(g)}case\"create-paint-style\":{let{name:v,color:y}=c,g=figma.createPaintStyle();return g.name=v,g.paints=[yield gt(y)],{id:g.id,name:g.name,key:g.key}}case\"create-text-style\":{let{name:v,fontFamily:y,fontStyle:g,fontSize:A}=c,I=figma.createTextStyle();return I.name=v,yield tr(y||\"Inter\",g||\"Regular\"),I.fontName={family:y||\"Inter\",style:g||\"Regular\"},A&&(I.fontSize=A),{id:I.id,name:I.name,key:I.key}}case\"create-effect-style\":{let{name:v,type:y,radius:g,color:A,offsetX:I,offsetY:F}=c,D=figma.createEffectStyle();D.name=v;let k=A?pf(A):{r:0,g:0,b:0,a:.25};return y===\"DROP_SHADOW\"||y===\"INNER_SHADOW\"?D.effects=[{type:y,color:k,offset:{x:I||0,y:F||4},radius:g||10,spread:0,visible:!0,blendMode:\"NORMAL\"}]:(y===\"BLUR\"||y===\"BACKGROUND_BLUR\")&&(D.effects=[{type:y,blurType:\"NORMAL\",radius:g||10,visible:!0}]),{id:D.id,name:D.name,key:D.key}}case\"move-node\":{let{id:v,x:y,y:g}=c,A=yield figma.getNodeByIdAsync(v);if(!A)throw new Error(\"Node not found\");return A.x=y,A.y=g,ne(A)}case\"resize-node\":{let{id:v,width:y,height:g}=c,A=yield figma.getNodeByIdAsync(v);if(!A)throw new Error(\"Node not found\");if(\"resize\"in A)A.resize(y,g);else if(\"width\"in A&&\"height\"in A)A.resizeWithoutConstraints(y,g);else throw new Error(\"Node cannot be resized\");return ne(A)}case\"set-fill-color\":{let{id:v,color:y}=c,g=yield figma.getNodeByIdAsync(v);if(!g||!(\"fills\"in g))throw new Error(\"Node not found\");return g.fills=[yield gt(y)],ne(g)}case\"set-stroke-color\":{let{id:v,color:y,weight:g,align:A}=c,I=yield figma.getNodeByIdAsync(v);if(!I||!(\"strokes\"in I))throw new Error(\"Node not found\");return I.strokes=[yield gt(y)],g!==void 0&&\"strokeWeight\"in I&&(I.strokeWeight=g),A&&\"strokeAlign\"in I&&(I.strokeAlign=A),ne(I)}case\"set-corner-radius\":{let{id:v,cornerRadius:y,topLeftRadius:g,topRightRadius:A,bottomLeftRadius:I,bottomRightRadius:F}=c,D=yield figma.getNodeByIdAsync(v);if(!D||!(\"cornerRadius\"in D))throw new Error(\"Node not found\");return D.cornerRadius=y,g!==void 0&&(D.topLeftRadius=g),A!==void 0&&(D.topRightRadius=A),I!==void 0&&(D.bottomLeftRadius=I),F!==void 0&&(D.bottomRightRadius=F),ne(D)}case\"set-opacity\":{let{id:v,opacity:y}=c,g=yield figma.getNodeByIdAsync(v);if(!g||!(\"opacity\"in g))throw new Error(\"Node not found\");return g.opacity=y,ne(g)}case\"set-image-fill\":{let{id:v,url:y,scaleMode:g}=c,A=yield figma.getNodeByIdAsync(v);if(!A||!(\"fills\"in A))throw new Error(\"Node not found\");let I=yield figma.createImageAsync(y);return A.fills=[{type:\"IMAGE\",imageHash:I.hash,scaleMode:g||\"FILL\"}],ne(A)}case\"rename-node\":{let{id:v,name:y}=c,g=yield figma.getNodeByIdAsync(v);if(!g)throw new Error(\"Node not found\");return g.name=y,ne(g)}case\"bind-fill-variable-by-name\":{let D=function(k){if(\"fills\"in k&&Array.isArray(k.fills)&&k.fills.length>0){let U=[...k.fills];for(let H=0;H<U.length;H++)U[H].type===\"SOLID\"&&(U[H]=figma.variables.setBoundVariableForPaint(U[H],\"color\",F));k.fills=U}if(g&&\"children\"in k)for(let U of k.children)D(U)};var d=D;let{id:v,variableName:y,recursive:g}=c,A=yield figma.getNodeByIdAsync(v);if(!A)throw new Error(\"Node not found\");let F=(yield figma.variables.getLocalVariablesAsync(\"COLOR\")).find(k=>k.name===y);if(!F)throw new Error(`Variable \"${y}\" not found`);return D(A),ne(A)}case\"set-visible\":{let{id:v,visible:y}=c,g=yield figma.getNodeByIdAsync(v);if(!g)throw new Error(\"Node not found\");return g.visible=y,ne(g)}case\"set-locked\":{let{id:v,locked:y}=c,g=yield figma.getNodeByIdAsync(v);if(!g)throw new Error(\"Node not found\");return g.locked=y,ne(g)}case\"set-effect\":{let{id:v,type:y,color:g,offsetX:A,offsetY:I,radius:F,spread:D}=c,k=yield figma.getNodeByIdAsync(v);if(!k||!(\"effects\"in k))throw new Error(\"Node not found\");let U=g?pf(g):{r:0,g:0,b:0,a:.25};return y===\"DROP_SHADOW\"||y===\"INNER_SHADOW\"?k.effects=[{type:y,color:U,offset:{x:A!=null?A:0,y:I!=null?I:4},radius:F!=null?F:8,spread:D!=null?D:0,visible:!0,blendMode:\"NORMAL\"}]:y===\"BLUR\"&&(k.effects=[{type:\"LAYER_BLUR\",blurType:\"NORMAL\",radius:F!=null?F:8,visible:!0}]),ne(k)}case\"set-text\":{let{id:v,text:y}=c,g=yield figma.getNodeByIdAsync(v);if(!g||g.type!==\"TEXT\")throw new Error(\"Text node not found\");let A=g.fontName;return yield tr(A.family,A.style),g.characters=y,ne(g)}case\"import-svg\":{let{svg:v,x:y,y:g,name:A,parentId:I,noFill:F,insertIndex:D}=c,k=figma.createNodeFromSvg(v);return y!==void 0&&(k.x=y),g!==void 0&&(k.y=g),A&&(k.name=A),F&&(k.fills=[]),yield Dt(k,I,D),ne(k)}case\"set-font\":{let{id:v,fontFamily:y,fontStyle:g,fontSize:A}=c,I=yield figma.getNodeByIdAsync(v);if(!I||I.type!==\"TEXT\")throw new Error(\"Text node not found\");let F=I.fontName,D=y||F.family,k=g||F.style;return yield tr(D,k),I.fontName={family:D,style:k},A!==void 0&&(I.fontSize=A),ne(I)}case\"set-font-range\":{let{id:v,start:y,end:g,family:A,style:I,size:F,color:D}=c,k=yield figma.getNodeByIdAsync(v);if(!k||k.type!==\"TEXT\")throw new Error(\"Text node not found\");if(A||I){let U=k.getRangeFontName(y,g),H=A||U.family,L=I||U.style;yield tr(H,L),k.setRangeFontName(y,g,{family:H,style:L})}return F!==void 0&&k.setRangeFontSize(y,g,F),D&&k.setRangeFills(y,g,[yield gt(D)]),ne(k)}case\"get-children\":{let{id:v,depth:y}=c,g=yield figma.getNodeByIdAsync(v);if(!g)throw new Error(\"Node not found\");if(!(\"children\"in g))return[];let A=y||1,I=(F,D)=>{let k=ne(F);return D<A&&\"children\"in F&&(k.children=F.children.map(U=>I(U,D+1))),k};return g.children.map(F=>I(F,1))}case\"find-by-name\":{let{name:v,type:y,exact:g,limit:A=100}=c,I=[],F=v==null?void 0:v.toLowerCase(),D=k=>{if(I.length>=A)return!1;let U=!F||(g?k.name===v:k.name.toLowerCase().includes(F)),H=!y||k.type===y;if(U&&H&&I.push(ne(k)),\"children\"in k){for(let L of k.children)if(!D(L))return!1}return I.length<A};for(let k of figma.currentPage.children)if(!D(k))break;return I}case\"select-nodes\":{let{ids:v}=c,g=(yield Promise.all(v.map(A=>figma.getNodeByIdAsync(A)))).filter(A=>A!==null&&\"id\"in A);return figma.currentPage.selection=g,{selected:g.length}}case\"set-constraints\":{let{id:v,horizontal:y,vertical:g}=c,A=yield figma.getNodeByIdAsync(v);if(!A||!(\"constraints\"in A))throw new Error(\"Node not found\");return A.constraints={horizontal:y||A.constraints.horizontal,vertical:g||A.constraints.vertical},ne(A)}case\"set-blend-mode\":{let{id:v,mode:y}=c,g=yield figma.getNodeByIdAsync(v);if(!g||!(\"blendMode\"in g))throw new Error(\"Node not found\");return g.blendMode=y,ne(g)}case\"set-auto-layout\":{let{id:v,mode:y,wrap:g,itemSpacing:A,counterSpacing:I,padding:F,primaryAlign:D,counterAlign:k,sizingH:U,sizingV:H,gridColumnSizes:L,gridRowSizes:ee,gridColumnGap:z,gridRowGap:J}=c,N=yield figma.getNodeByIdAsync(v);if(!N||!(\"layoutMode\"in N))throw new Error(\"Frame not found\");return y&&(N.layoutMode=y),g!==void 0&&(N.layoutWrap=g?\"WRAP\":\"NO_WRAP\"),A!==void 0&&(N.itemSpacing=A),I!==void 0&&(N.counterAxisSpacing=I),F&&(N.paddingTop=F.top,N.paddingRight=F.right,N.paddingBottom=F.bottom,N.paddingLeft=F.left),D&&(N.primaryAxisAlignItems=D),k&&(N.counterAxisAlignItems=k),U&&(N.layoutSizingHorizontal=U),H&&(N.layoutSizingVertical=H),L&&(N.gridColumnCount=L.length,N.gridColumnSizes=L),ee&&(N.gridRowCount=ee.length,N.gridRowSizes=ee),z!==void 0&&(N.gridColumnGap=z),J!==void 0&&(N.gridRowGap=J),ne(N)}case\"set-layout-child\":{let{id:v,horizontalSizing:y,verticalSizing:g,positioning:A,x:I,y:F}=c,D=yield figma.getNodeByIdAsync(v);if(!D)throw new Error(\"Node not found\");return y&&\"layoutSizingHorizontal\"in D&&(D.layoutSizingHorizontal=y),g&&\"layoutSizingVertical\"in D&&(D.layoutSizingVertical=g),A&&\"layoutPositioning\"in D&&(D.layoutPositioning=A),A===\"ABSOLUTE\"&&(I!==void 0&&(D.x=I),F!==void 0&&(D.y=F)),ne(D)}case\"set-text-properties\":{let{id:v,lineHeight:y,letterSpacing:g,textAlign:A,verticalAlign:I,autoResize:F,maxLines:D,paragraphSpacing:k,paragraphIndent:U}=c,H=yield figma.getNodeByIdAsync(v);if(!H||H.type!==\"TEXT\")throw new Error(\"Text node not found\");let L=H.fontName;return yield tr(L.family,L.style),y!==void 0&&(H.lineHeight=y===\"auto\"?{unit:\"AUTO\"}:{unit:\"PIXELS\",value:y}),g!==void 0&&(H.letterSpacing={unit:\"PIXELS\",value:g}),A&&(H.textAlignHorizontal=A),I&&(H.textAlignVertical=I),F&&(H.textAutoResize=F),D!==void 0&&(H.maxLines=D),k!==void 0&&(H.paragraphSpacing=k),U!==void 0&&(H.paragraphIndent=U),ne(H)}case\"set-min-max\":{let{id:v,minWidth:y,maxWidth:g,minHeight:A,maxHeight:I}=c,F=yield figma.getNodeByIdAsync(v);if(!F)throw new Error(\"Node not found\");return y!==void 0&&\"minWidth\"in F&&(F.minWidth=y),g!==void 0&&\"maxWidth\"in F&&(F.maxWidth=g),A!==void 0&&\"minHeight\"in F&&(F.minHeight=A),I!==void 0&&\"maxHeight\"in F&&(F.maxHeight=I),ne(F)}case\"set-rotation\":{let{id:v,angle:y}=c,g=yield figma.getNodeByIdAsync(v);if(!g)throw new Error(\"Node not found\");return\"rotation\"in g&&(g.rotation=y),ne(g)}case\"set-stroke-align\":{let{id:v,align:y}=c,g=yield figma.getNodeByIdAsync(v);if(!g||!(\"strokeAlign\"in g))throw new Error(\"Node not found\");return g.strokeAlign=y,ne(g)}case\"set-layout\":{let{id:v,mode:y,wrap:g,clip:A,itemSpacing:I,primaryAxisAlignItems:F,counterAxisAlignItems:D,paddingLeft:k,paddingRight:U,paddingTop:H,paddingBottom:L,layoutSizingVertical:ee,layoutSizingHorizontal:z}=c,J=yield figma.getNodeByIdAsync(v);if(!J||!(\"layoutMode\"in J))throw new Error(\"Node not found\");return J.layoutMode=y,g!==void 0&&(J.layoutWrap=g?\"WRAP\":\"NO_WRAP\"),A!==void 0&&(J.clipsContent=A),I!==void 0&&(J.itemSpacing=I),F&&(J.primaryAxisAlignItems=F),D&&(J.counterAxisAlignItems=D),k!==void 0&&(J.paddingLeft=k),U!==void 0&&(J.paddingRight=U),H!==void 0&&(J.paddingTop=H),L!==void 0&&(J.paddingBottom=L),ee&&(J.layoutSizingVertical=ee),z&&(J.layoutSizingHorizontal=z),ne(J)}case\"set-parent-id\":{let{id:v,parentId:y}=c,g=yield figma.getNodeByIdAsync(v),A=yield figma.getNodeByIdAsync(y);if(!g||!A)throw new Error(\"Node or parent not found\");return A.appendChild(g),ne(g)}case\"group-nodes\":{let{ids:v,name:y}=c,A=(yield Promise.all(v.map(D=>figma.getNodeByIdAsync(D)))).filter(D=>D!==null&&\"parent\"in D);if(A.length===0)throw new Error(\"No valid nodes found\");let I=A[0].parent;if(!I||!(\"children\"in I))throw new Error(\"Invalid parent\");let F=figma.group(A,I);return y&&(F.name=y),ne(F)}case\"ungroup-node\":{let{id:v}=c,y=yield figma.getNodeByIdAsync(v);if(!y||y.type!==\"GROUP\")throw new Error(\"Not a group node\");return figma.ungroup(y).map(ne)}case\"flatten-nodes\":{let{ids:v}=c,g=(yield Promise.all(v.map(I=>figma.getNodeByIdAsync(I)))).filter(I=>I!==null&&\"parent\"in I);if(g.length===0)throw new Error(\"No valid nodes found\");let A=figma.flatten(g);return ne(A)}case\"boolean-operation\":{let{ids:v,operation:y}=c,A=(yield Promise.all(v.map(D=>figma.getNodeByIdAsync(D)))).filter(D=>D!==null&&\"parent\"in D);if(A.length<2)throw new Error(\"Need at least 2 nodes\");let I=A[0].parent;if(!I||!(\"children\"in I))throw new Error(\"Invalid parent\");let F;switch(y){case\"UNION\":F=figma.union(A,I);break;case\"SUBTRACT\":F=figma.subtract(A,I);break;case\"INTERSECT\":F=figma.intersect(A,I);break;case\"EXCLUDE\":F=figma.exclude(A,I);break}return ne(F)}case\"set-instance-properties\":{let{instanceId:v,properties:y}=c,g=yield figma.getNodeByIdAsync(v);if(!g||g.type!==\"INSTANCE\")throw new Error(\"Instance not found\");return g.setProperties(y),ne(g)}case\"set-node-component-property-references\":{let{id:v,componentPropertyReferences:y}=c,g=yield figma.getNodeByIdAsync(v);if(!g||!(\"componentPropertyReferences\"in g))throw new Error(\"Node not found\");for(let[A,I]of Object.entries(y))g.componentPropertyReferences=Ba(_n({},g.componentPropertyReferences),{[A]:I});return ne(g)}case\"add-component-property\":{let{componentId:v,name:y,type:g,defaultValue:A}=c,I=yield figma.getNodeByIdAsync(v);if(!I||I.type!==\"COMPONENT\"&&I.type!==\"COMPONENT_SET\")throw new Error(\"Component not found\");let F=A;return g===\"BOOLEAN\"&&(F=A===\"true\"||A===!0),I.addComponentProperty(y,g,F),ne(I)}case\"edit-component-property\":{let{componentId:v,name:y,defaultValue:g,preferredValues:A}=c,I=yield figma.getNodeByIdAsync(v);if(!I||I.type!==\"COMPONENT\"&&I.type!==\"COMPONENT_SET\")throw new Error(\"Component not found\");let F=I.componentPropertyDefinitions,D=Object.keys(F).find(H=>H===y||H.startsWith(y+\"#\"));if(!D)throw new Error(\"Property not found\");let k=F[D],U=g;return k.type===\"BOOLEAN\"&&(U=g===\"true\"||g===!0),I.editComponentProperty(D,{name:y,defaultValue:U,preferredValues:A==null?void 0:A.map(H=>({type:\"COMPONENT\",key:H}))}),ne(I)}case\"delete-component-property\":{let{componentId:v,name:y}=c,g=yield figma.getNodeByIdAsync(v);if(!g||g.type!==\"COMPONENT\"&&g.type!==\"COMPONENT_SET\")throw new Error(\"Component not found\");let A=g.componentPropertyDefinitions,I=Object.keys(A).find(F=>F===y||F.startsWith(y+\"#\"));if(!I)throw new Error(\"Property not found\");return g.deleteComponentProperty(I),ne(g)}case\"set-viewport\":{let{x:v,y,zoom:g}=c;return v!==void 0&&y!==void 0&&(figma.viewport.center={x:v,y}),g!==void 0&&(figma.viewport.zoom=g),{center:figma.viewport.center,zoom:figma.viewport.zoom}}case\"zoom-to-fit\":{let{ids:v}=c,y;return v&&v.length>0?y=(yield Promise.all(v.map(A=>figma.getNodeByIdAsync(A)))).filter(A=>A!==null&&\"absoluteBoundingBox\"in A):y=figma.currentPage.selection,y.length>0&&figma.viewport.scrollAndZoomIntoView(y),{center:figma.viewport.center,zoom:figma.viewport.zoom}}case\"export-node\":{let{id:v,format:y,scale:g}=c,A=yield figma.getNodeByIdAsync(v);if(!A)throw new Error(\"Node not found\");let I=yield A.exportAsync(_n({format:y},y!==\"SVG\"&&y!==\"PDF\"?{scale:g||1}:{}));return{data:figma.base64Encode(I),filename:`${A.name}.${y.toLowerCase()}`}}case\"screenshot\":{let{scale:v}=c,y=figma.viewport.bounds,g=figma.createFrame();g.name=\"__screenshot_temp__\",g.x=y.x,g.y=y.y,g.resize(y.width,y.height),g.fills=[],g.clipsContent=!0;for(let I of figma.currentPage.children)if(I.id!==g.id&&I.visible&&\"absoluteBoundingBox\"in I&&I.absoluteBoundingBox){let F=I.absoluteBoundingBox;if(F.x+F.width>y.x&&F.x<y.x+y.width&&F.y+F.height>y.y&&F.y<y.y+y.height){let D=I.clone();D.x=I.x-y.x,D.y=I.y-y.y,g.appendChild(D)}}let A=yield g.exportAsync({format:\"PNG\",constraint:{type:\"SCALE\",value:v||1}});return g.remove(),{data:figma.base64Encode(A)}}case\"export-selection\":{let{format:v,scale:y,padding:g}=c,A=figma.currentPage.selection;if(A.length===0)throw new Error(\"No selection\");if(A.length===1&&!g){let ee=yield A[0].exportAsync(_n({format:v||\"PNG\"},v!==\"SVG\"&&v!==\"PDF\"?{scale:y||2}:{}));return{data:figma.base64Encode(ee)}}let I=1/0,F=1/0,D=-1/0,k=-1/0;for(let ee of A)if(\"absoluteBoundingBox\"in ee&&ee.absoluteBoundingBox){let z=ee.absoluteBoundingBox;I=Math.min(I,z.x),F=Math.min(F,z.y),D=Math.max(D,z.x+z.width),k=Math.max(k,z.y+z.height)}let U=g||0,H=figma.createFrame();H.name=\"__export_temp__\",H.x=I-U,H.y=F-U,H.resize(D-I+U*2,k-F+U*2),H.fills=[{type:\"SOLID\",color:{r:1,g:1,b:1}}],H.clipsContent=!0;for(let ee of A){let z=ee.clone();z.x=ee.x-H.x,z.y=ee.y-H.y,H.appendChild(z)}let L=yield H.exportAsync(_n({format:v||\"PNG\"},v!==\"SVG\"&&v!==\"PDF\"?{scale:y||2}:{}));return H.remove(),{data:figma.base64Encode(L)}}case\"delete-node\":{let{id:v}=c,y=yield figma.getNodeByIdAsync(v);if(!y||!(\"remove\"in y))throw new Error(\"Node not found\");return y.remove(),{deleted:!0}}case\"node-bounds\":{let{id:v}=c,y=yield figma.getNodeByIdAsync(v);if(!y||!(\"x\"in y))throw new Error(\"Node not found\");let g=y;return{x:Math.round(g.x*100)/100,y:Math.round(g.y*100)/100,width:Math.round(g.width*100)/100,height:Math.round(g.height*100)/100,centerX:Math.round((g.x+g.width/2)*100)/100,centerY:Math.round((g.y+g.height/2)*100)/100,right:Math.round((g.x+g.width)*100)/100,bottom:Math.round((g.y+g.height)*100)/100}}case\"path-get\":{let{id:v}=c,y=yield figma.getNodeByIdAsync(v);if(!y||y.type!==\"VECTOR\")throw new Error(\"Vector node not found\");return{paths:y.vectorPaths}}case\"path-set\":{let{id:v,path:y,windingRule:g=\"NONZERO\"}=c,A=yield figma.getNodeByIdAsync(v);if(!A||A.type!==\"VECTOR\")throw new Error(\"Vector node not found\");return A.vectorPaths=[{windingRule:g,data:y}],{updated:!0}}case\"path-move\":{let{id:v,dx:y=0,dy:g=0}=c,A=yield figma.getNodeByIdAsync(v);if(!A||A.type!==\"VECTOR\")throw new Error(\"Vector node not found\");let I=A.vectorPaths.map(F=>({windingRule:F.windingRule,data:ja((0,Fo.default)(F.data).translate(y,g).round(2))}));return A.vectorPaths=I,{updated:!0,paths:I}}case\"path-scale\":{let{id:v,factor:y}=c,g=yield figma.getNodeByIdAsync(v);if(!g||g.type!==\"VECTOR\")throw new Error(\"Vector node not found\");let A=g.vectorPaths.map(I=>({windingRule:I.windingRule,data:ja((0,Fo.default)(I.data).scale(y).round(2))}));return g.vectorPaths=A,{updated:!0,paths:A}}case\"path-flip\":{let{id:v,axis:y}=c,g=yield figma.getNodeByIdAsync(v);if(!g||g.type!==\"VECTOR\")throw new Error(\"Vector node not found\");let A=g.vectorPaths.map(I=>({windingRule:I.windingRule,data:ja(y===\"x\"?(0,Fo.default)(I.data).scale(-1,1).round(2):(0,Fo.default)(I.data).scale(1,-1).round(2))}));return g.vectorPaths=A,{updated:!0,paths:A}}case\"query\":{let{selector:v,rootId:y,select:g,limit:A}=c,I=y?yield figma.getNodeByIdAsync(y):figma.currentPage;if(!I)return{error:\"Root node not found\"};let F=lf(v,I,{limit:A!=null?A:1e3}),D=g||[\"id\",\"name\",\"type\"];return F.map(k=>{let U={};for(let H of D)H in k&&(U[H]=k[H]);return U})}case\"eval\":{let{code:v}=c,y=Object.getPrototypeOf(function(){return xt(this,null,function*(){})}).constructor,g=v.trim().startsWith(\"return\")?v:`return (async () => { ${v} })()`;return yield new y(\"figma\",g)(figma)}case\"trigger-layout\":{let{nodeId:v,pendingComponentSetInstances:y,pendingGridLayouts:g}=c,A=yield ff(()=>figma.getNodeByIdAsync(v),10,100,\"linear\");if(!A)return null;if(y&&y.length>0)for(let F of y){let D=z=>{if(z.type===\"COMPONENT_SET\"&&z.name===F.componentSetName)return z;if(\"children\"in z)for(let J of z.children){let N=D(J);if(N)return N}return null},k=D(A);if(!k)continue;let U=k.children.find(z=>z.type===\"COMPONENT\"&&z.name===F.variantName);if(!U)continue;let H=U.createInstance();H.x=F.x,H.y=F.y;let L=`${F.parentGUID.sessionID}:${F.parentGUID.localID}`,ee=yield figma.getNodeByIdAsync(L);ee&&\"appendChild\"in ee&&ee.appendChild(H)}if(g&&g.length>0)for(let F of g){let D=`${F.nodeGUID.sessionID}:${F.nodeGUID.localID}`,k=yield figma.getNodeByIdAsync(D);if(!k||k.type!==\"FRAME\")continue;let U=k;U.layoutMode!==\"GRID\"&&(U.layoutMode=\"GRID\");let H=z=>z.split(/\\s+/).filter(Boolean).map(J=>J.endsWith(\"px\")?{type:\"FIXED\",value:parseFloat(J)}:J.endsWith(\"fr\")?{type:\"FLEX\",value:parseFloat(J)||1}:J===\"auto\"||J===\"hug\"?{type:\"HUG\",value:1}:{type:\"FIXED\",value:parseFloat(J)||100}),L=F.gridTemplateColumns?H(F.gridTemplateColumns):null,ee=F.gridTemplateRows?H(F.gridTemplateRows):null;L&&L.length>0&&(U.gridColumnCount=L.length),ee&&ee.length>0&&(U.gridRowCount=ee.length),L&&L.length>0&&(U.gridColumnSizes=L),ee&&ee.length>0&&(U.gridRowSizes=ee)}let I=F=>xt(null,null,function*(){if(\"children\"in F)for(let D of F.children)yield I(D);if(F.type===\"TEXT\"&&F.textAutoResize!==\"NONE\")try{yield figma.loadFontAsync(F.fontName);let D=F.characters;F.characters=\"\",F.characters=D}catch(D){}if(\"layoutMode\"in F&&F.layoutMode!==\"NONE\"){let D=F,k=D.primaryAxisSizingMode===\"AUTO\",U=D.counterAxisSizingMode===\"AUTO\";(k||U)&&(k&&(D.primaryAxisSizingMode=\"FIXED\",D.primaryAxisSizingMode=\"AUTO\"),U&&(D.counterAxisSizingMode=\"FIXED\",D.counterAxisSizingMode=\"AUTO\"))}});return yield I(A),{triggered:!0}}case\"get-variables\":{let{type:v,simple:y}=c,g=yield figma.variables.getLocalVariablesAsync(v);return y?g.map(A=>({id:A.id,name:A.name})):g.map(A=>Xa(A))}case\"get-variable\":{let{id:v}=c,y=yield figma.variables.getVariableByIdAsync(v);if(!y)throw new Error(\"Variable not found\");return Xa(y)}case\"create-variable\":{let{name:v,collectionId:y,type:g,value:A}=c,I=yield figma.variables.getVariableCollectionByIdAsync(y);if(!I)throw new Error(\"Collection not found\");let F=figma.variables.createVariable(v,I,g);if(A!==void 0&&I.modes.length>0){let D=I.modes[0].modeId;F.setValueForMode(D,hf(A,g))}return Xa(F)}case\"set-variable-value\":{let{id:v,modeId:y,value:g}=c,A=yield figma.variables.getVariableByIdAsync(v);if(!A)throw new Error(\"Variable not found\");return A.setValueForMode(y,hf(g,A.resolvedType)),Xa(A)}case\"delete-variable\":{let{id:v}=c,y=yield figma.variables.getVariableByIdAsync(v);if(!y)throw new Error(\"Variable not found\");return y.remove(),{deleted:!0}}case\"bind-variable\":{let{nodeId:v,field:y,variableId:g}=c,A=yield figma.getNodeByIdAsync(v);if(!A)throw new Error(\"Node not found\");let I=yield figma.variables.getVariableByIdAsync(g);if(!I)throw new Error(\"Variable not found\");if(\"setBoundVariable\"in A)A.setBoundVariable(y,I);else throw new Error(\"Node does not support variable binding\");return ne(A)}case\"bind-fill-variable\":{let{nodeId:v,variableId:y,paintIndex:g=0}=c,A=yield figma.getNodeByIdAsync(v);if(!A)throw new Error(\"Node not found\");if(!(\"fills\"in A))throw new Error(\"Node does not have fills\");let I=yield figma.variables.getVariableByIdAsync(y);if(!I)throw new Error(\"Variable not found\");let F=A.fills;if(!F[g])throw new Error(\"Paint not found at index \"+g);let D=figma.variables.setBoundVariableForPaint(F[g],\"color\",I);return A.fills=[...F.slice(0,g),D,...F.slice(g+1)],ne(A)}case\"bind-stroke-variable\":{let{nodeId:v,variableId:y,paintIndex:g=0}=c,A=yield figma.getNodeByIdAsync(v);if(!A)throw new Error(\"Node not found\");if(!(\"strokes\"in A))throw new Error(\"Node does not have strokes\");let I=yield figma.variables.getVariableByIdAsync(y);if(!I)throw new Error(\"Variable not found\");let F=A.strokes;if(!F[g])throw new Error(\"Paint not found at index \"+g);let D=figma.variables.setBoundVariableForPaint(F[g],\"color\",I);return A.strokes=[...F.slice(0,g),D,...F.slice(g+1)],ne(A)}case\"get-variable-collections\":return(yield figma.variables.getLocalVariableCollectionsAsync()).map(y=>Js(y));case\"get-variable-collection\":{let{id:v}=c,y=yield figma.variables.getVariableCollectionByIdAsync(v);if(!y)throw new Error(\"Collection not found\");return Js(y)}case\"create-variable-collection\":{let{name:v}=c,y=figma.variables.createVariableCollection(v);return Js(y)}case\"delete-variable-collection\":{let{id:v}=c,y=yield figma.variables.getVariableCollectionByIdAsync(v);if(!y)throw new Error(\"Collection not found\");return y.remove(),{deleted:!0}}case\"create-connector\":{let{fromId:v,toId:y,fromMagnet:g,toMagnet:A,lineType:I,startCap:F,endCap:D,stroke:k,strokeWeight:U,cornerRadius:H}=c,L=yield figma.getNodeByIdAsync(v),ee=yield figma.getNodeByIdAsync(y);if(!L||!(\"absoluteBoundingBox\"in L))throw new Error(\"From node not found or invalid\");if(!ee||!(\"absoluteBoundingBox\"in ee))throw new Error(\"To node not found or invalid\");let z=figma.createConnector();if(z.connectorStart={endpointNodeId:v,magnet:g||\"AUTO\"},z.connectorEnd={endpointNodeId:y,magnet:A||\"AUTO\"},I&&(z.connectorLineType=I),F&&(z.connectorStartStrokeCap=F),D&&(z.connectorEndStrokeCap=D),H!==void 0&&(z.cornerRadius=H),U!==void 0&&(z.strokeWeight=U),k){let J=k.replace(\"#\",\"\"),N=parseInt(J.slice(0,2),16)/255,Xe=parseInt(J.slice(2,4),16)/255,Me=parseInt(J.slice(4,6),16)/255;z.strokes=[{type:\"SOLID\",color:{r:N,g:Xe,b:Me}}]}return ne(z)}case\"get-connector\":{let{id:v}=c,y=yield figma.getNodeByIdAsync(v);if(!y||y.type!==\"CONNECTOR\")throw new Error(\"Connector not found\");let g=y,A=yield figma.getNodeByIdAsync(g.connectorStart.endpointNodeId),I=yield figma.getNodeByIdAsync(g.connectorEnd.endpointNodeId),F=g.strokes[0],D=F&&F.type===\"SOLID\"?\"#\"+[F.color.r,F.color.g,F.color.b].map(k=>Math.round(k*255).toString(16).padStart(2,\"0\")).join(\"\").toUpperCase():void 0;return{id:g.id,name:g.name,fromNode:{id:g.connectorStart.endpointNodeId,name:(A==null?void 0:A.name)||\"Unknown\",magnet:g.connectorStart.magnet},toNode:{id:g.connectorEnd.endpointNodeId,name:(I==null?void 0:I.name)||\"Unknown\",magnet:g.connectorEnd.magnet},lineType:g.connectorLineType,startCap:g.connectorStartStrokeCap,endCap:g.connectorEndStrokeCap,stroke:D,strokeWeight:g.strokeWeight,cornerRadius:g.cornerRadius}}case\"set-connector\":{let{id:v,fromId:y,toId:g,fromMagnet:A,toMagnet:I,lineType:F,startCap:D,endCap:k,stroke:U,strokeWeight:H,cornerRadius:L}=c,ee=yield figma.getNodeByIdAsync(v);if(!ee||ee.type!==\"CONNECTOR\")throw new Error(\"Connector not found\");let z=ee;if(y?z.connectorStart={endpointNodeId:y,magnet:A||z.connectorStart.magnet}:A&&(z.connectorStart=Ba(_n({},z.connectorStart),{magnet:A})),g?z.connectorEnd={endpointNodeId:g,magnet:I||z.connectorEnd.magnet}:I&&(z.connectorEnd=Ba(_n({},z.connectorEnd),{magnet:I})),F&&(z.connectorLineType=F),D&&(z.connectorStartStrokeCap=D),k&&(z.connectorEndStrokeCap=k),L!==void 0&&(z.cornerRadius=L),H!==void 0&&(z.strokeWeight=H),U){let J=U.replace(\"#\",\"\"),N=parseInt(J.slice(0,2),16)/255,Xe=parseInt(J.slice(2,4),16)/255,Me=parseInt(J.slice(4,6),16)/255;z.strokes=[{type:\"SOLID\",color:{r:N,g:Xe,b:Me}}]}return ne(z)}case\"list-connectors\":{let I=function(D){if(D.type===\"CONNECTOR\"){let k=D;if(v&&k.connectorStart.endpointNodeId!==v||y&&k.connectorEnd.endpointNodeId!==y)return;A.push(k)}if(\"children\"in D)for(let k of D.children)I(k)};var h=I;let{fromId:v,toId:y}=c,g=figma.currentPage,A=[];return I(g),yield Promise.all(A.map(D=>xt(null,null,function*(){let k=yield figma.getNodeByIdAsync(D.connectorStart.endpointNodeId),U=yield figma.getNodeByIdAsync(D.connectorEnd.endpointNodeId),H=D.strokes[0],L=H&&H.type===\"SOLID\"?\"#\"+[H.color.r,H.color.g,H.color.b].map(ee=>Math.round(ee*255).toString(16).padStart(2,\"0\")).join(\"\").toUpperCase():void 0;return{id:D.id,name:D.name,fromNode:{id:D.connectorStart.endpointNodeId,name:(k==null?void 0:k.name)||\"Unknown\",magnet:D.connectorStart.magnet},toNode:{id:D.connectorEnd.endpointNodeId,name:(U==null?void 0:U.name)||\"Unknown\",magnet:D.connectorEnd.magnet},lineType:D.connectorLineType,stroke:L}})))}default:throw new Error(`Unknown command: ${u}`)}})}function Dt(u,c,d){return xt(this,null,function*(){if(c){let h=yield ff(()=>figma.getNodeByIdAsync(c),10,50);if(h&&\"appendChild\"in h){d!==void 0&&\"insertChild\"in h?h.insertChild(d,u):h.appendChild(u);return}console.warn(`Parent ${c} not found after retries, appending to page`)}figma.currentPage.appendChild(u)})}function ne(u){var d,h;let c={id:u.id,name:u.name,type:u.type};if(u.parent&&u.parent.type!==\"PAGE\"&&(c.parentId=u.parent.id),\"x\"in u&&(c.x=Math.round(u.x)),\"y\"in u&&(c.y=Math.round(u.y)),\"width\"in u&&(c.width=Math.round(u.width)),\"height\"in u&&(c.height=Math.round(u.height)),\"opacity\"in u&&u.opacity!==1&&(c.opacity=u.opacity),\"visible\"in u&&!u.visible&&(c.visible=!1),\"locked\"in u&&u.locked&&(c.locked=!0),\"fills\"in u&&Array.isArray(u.fills)&&u.fills.length>0&&(c.fills=u.fills.map(zs)),\"strokes\"in u&&Array.isArray(u.strokes)&&u.strokes.length>0&&(c.strokes=u.strokes.map(zs)),\"strokeWeight\"in u&&typeof u.strokeWeight==\"number\"&&u.strokeWeight>0&&(c.strokeWeight=u.strokeWeight),\"cornerRadius\"in u&&typeof u.cornerRadius==\"number\"&&u.cornerRadius>0&&(c.cornerRadius=u.cornerRadius),\"componentPropertyDefinitions\"in u)try{c.componentPropertyDefinitions=u.componentPropertyDefinitions}catch(x){}if(\"componentProperties\"in u&&(c.componentProperties=u.componentProperties),\"layoutMode\"in u&&u.layoutMode!==\"NONE\"&&(c.layoutMode=u.layoutMode,\"itemSpacing\"in u&&(c.itemSpacing=u.itemSpacing),\"paddingLeft\"in u&&(u.paddingLeft||u.paddingRight||u.paddingTop||u.paddingBottom)&&(c.padding={left:u.paddingLeft,right:u.paddingRight,top:u.paddingTop,bottom:u.paddingBottom}),u.layoutMode===\"GRID\")){let x=u;x.gridColumnGap!==void 0&&(c.gridColumnGap=x.gridColumnGap),x.gridRowGap!==void 0&&(c.gridRowGap=x.gridRowGap),x.gridColumnCount!==void 0&&(c.gridColumnCount=x.gridColumnCount),x.gridRowCount!==void 0&&(c.gridRowCount=x.gridRowCount),((d=x.gridColumnSizes)==null?void 0:d.length)>0&&(c.gridColumnSizes=x.gridColumnSizes),((h=x.gridRowSizes)==null?void 0:h.length)>0&&(c.gridRowSizes=x.gridRowSizes)}if(u.type===\"TEXT\"){let x=u;c.characters=x.characters,typeof x.fontSize==\"number\"&&(c.fontSize=x.fontSize),typeof x.fontName==\"object\"&&(c.fontFamily=x.fontName.family,c.fontStyle=x.fontName.style)}return\"children\"in u&&(c.childCount=u.children.length),c}function zs(u){if(u.type===\"SOLID\"){let c={type:\"SOLID\",color:So(u.color)};return u.opacity!==void 0&&u.opacity!==1&&(c.opacity=u.opacity),c}return u.type===\"IMAGE\"?{type:\"IMAGE\",imageHash:u.imageHash,scaleMode:u.scaleMode}:u.type===\"GRADIENT_LINEAR\"||u.type===\"GRADIENT_RADIAL\"||u.type===\"GRADIENT_ANGULAR\"||u.type===\"GRADIENT_DIAMOND\"?{type:u.type,stops:u.gradientStops.map(c=>({color:So(c.color),position:c.position}))}:{type:u.type}}function So(u){let c=Math.round(u.r*255).toString(16).padStart(2,\"0\"),d=Math.round(u.g*255).toString(16).padStart(2,\"0\"),h=Math.round(u.b*255).toString(16).padStart(2,\"0\");return`#${c}${d}${h}`.toUpperCase()}function gf(u){let c=u.replace(\"#\",\"\");return c.length===3?c[0]+c[0]+c[1]+c[1]+c[2]+c[2]:c.length===4?c[0]+c[0]+c[1]+c[1]+c[2]+c[2]+c[3]+c[3]:c}function an(u){let c=gf(u);return{r:parseInt(c.slice(0,2),16)/255,g:parseInt(c.slice(2,4),16)/255,b:parseInt(c.slice(4,6),16)/255}}function yf(u){let c=u.match(/^(?:var:|[$])(.+)$/);return c?{variable:c[1]}:{hex:u}}function er(u){return yf(u).hex||\"#000000\"}function gt(u){return xt(this,null,function*(){let c=yf(u);if(c.hex)return{type:\"SOLID\",color:an(c.hex)};let h=(yield figma.variables.getLocalVariablesAsync(\"COLOR\")).find(S=>S.name===c.variable);if(!h)return console.warn(`Variable \"${c.variable}\" not found, using black`),{type:\"SOLID\",color:{r:0,g:0,b:0}};let x={type:\"SOLID\",color:{r:0,g:0,b:0}};return figma.variables.setBoundVariableForPaint(x,\"color\",h)})}function pf(u){let c=gf(u),d=c.length===8;return{r:parseInt(c.slice(0,2),16)/255,g:parseInt(c.slice(2,4),16)/255,b:parseInt(c.slice(4,6),16)/255,a:d?parseInt(c.slice(6,8),16)/255:1}}function Xa(u){return{id:u.id,name:u.name,type:u.resolvedType,collectionId:u.variableCollectionId,description:u.description||void 0,valuesByMode:Object.fromEntries(Object.entries(u.valuesByMode).map(([c,d])=>[c,vB(d,u.resolvedType)]))}}function Js(u){return{id:u.id,name:u.name,modes:u.modes.map(c=>({modeId:c.modeId,name:c.name})),variableIds:u.variableIds}}function vB(u,c){return c===\"COLOR\"&&typeof u==\"object\"&&\"r\"in u?So(u):typeof u==\"object\"&&\"type\"in u&&u.type===\"VARIABLE_ALIAS\"?{alias:u.id}:u}function hf(u,c){switch(c){case\"COLOR\":return an(u);case\"FLOAT\":return parseFloat(u);case\"BOOLEAN\":return u===\"true\";default:return u}}function ja(u){return u.segments.map(c=>c.join(\" \")).join(\" \")}function xB(u,c){return xt(this,null,function*(){return!cf&&AB.has(u)&&(yield figma.loadAllPagesAsync(),cf=!0),mf(u,c)})}typeof window!=\"undefined\"&&(window.__figmaRpc=xB);})();\n"
